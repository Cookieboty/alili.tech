---
title: '前端性能优化 -- 从 10 多秒到 1.05 秒' 
date: 2018-11-29 9:33:05
hidden: true
slug: g5ny5rvtlnk
categories: [reprint]
---

{{< raw >}}

                    
<p>&#x5173;&#x4E8E; <strong>&#x6027;&#x80FD;&#x4F18;&#x5316;</strong> &#x662F;&#x4E2A;&#x5927;&#x7684;&#x9762;&#xFF0C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x5230; <strong>&#x524D;&#x7AEF;</strong> &#x7684;&#x51E0;&#x4E2A;&#x70B9;&#xFF0C;&#x5982; <strong>&#x524D;&#x7AEF;&#x6027;&#x80FD;&#x4F18;&#x5316;</strong> &#x7684;&#x6D41;&#x7A0B;&#x3001;&#x5E38;&#x89C1;&#x6280;&#x672F;&#x624B;&#x6BB5;&#x3001;&#x5DE5;&#x5177;&#x7B49;&#x3002;</p>
<p>&#x63D0;&#x53CA; <strong>&#x524D;&#x7AEF;&#x6027;&#x80FD;&#x4F18;&#x5316;</strong> &#xFF0C;&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x90FD;&#x4F1A;&#x60F3;&#x5230; <strong>&#x96C5;&#x864E;&#x519B;&#x89C4;</strong>&#xFF0C;&#x672C;&#x6587;&#x4F1A;&#x7ED3;&#x5408; <strong>&#x96C5;&#x864E;&#x519B;&#x89C4;</strong> &#x878D;&#x5165;&#x81EA;&#x5DF1;&#x7684;&#x4E86;&#x89E3;&#x77E5;&#x8BC6;&#xFF0C;&#x8FDB;&#x884C;&#x7684;&#x603B;&#x7ED3;&#x548C;&#x68B3;&#x7406; &#x1F61C;</p>
<p>&#x8BE6;&#x60C5;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;&#x6211;&#x7684; <strong>&#x535A;&#x5BA2;</strong> <a href="https://lishaoy.net" rel="nofollow noreferrer" target="_blank">lishaoy.net</a></p>
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x770B; &#x1F440; <strong>&#x96C5;&#x864E;&#x519B;&#x89C4;</strong> &#x7684; <strong>35</strong> &#x6761;&#x3002;</p>
<blockquote><ol>
<li>&#x5C3D;&#x91CF;&#x51CF;&#x5C11; HTTP &#x8BF7;&#x6C42;&#x4E2A;&#x6570;&#x2014;&#x2014;&#x987B;&#x6743;&#x8861;</li>
<li>&#x4F7F;&#x7528; <strong>CDN</strong>&#xFF08;&#x5185;&#x5BB9;&#x5206;&#x53D1;&#x7F51;&#x7EDC;&#xFF09;</li>
<li>&#x4E3A;&#x6587;&#x4EF6;&#x5934;&#x6307;&#x5B9A; Expires &#x6216; Cache-Control &#xFF0C;&#x4F7F;&#x5185;&#x5BB9;&#x5177;&#x6709;&#x7F13;&#x5B58;&#x6027;&#x3002;</li>
<li>&#x907F;&#x514D;&#x7A7A;&#x7684; src &#x548C; href</li>
<li>&#x4F7F;&#x7528; gzip &#x538B;&#x7F29;&#x5185;&#x5BB9;</li>
<li>&#x628A; CSS &#x653E;&#x5230;&#x9876;&#x90E8;</li>
<li>&#x628A; JS &#x653E;&#x5230;&#x5E95;&#x90E8;</li>
<li>&#x907F;&#x514D;&#x4F7F;&#x7528; CSS &#x8868;&#x8FBE;&#x5F0F;</li>
<li>&#x5C06; CSS &#x548C; JS &#x653E;&#x5230;&#x5916;&#x90E8;&#x6587;&#x4EF6;&#x4E2D;</li>
<li>&#x51CF;&#x5C11; DNS &#x67E5;&#x627E;&#x6B21;&#x6570;</li>
<li>&#x7CBE;&#x7B80; CSS &#x548C; JS</li>
<li>&#x907F;&#x514D;&#x8DF3;&#x8F6C;</li>
<li>&#x5254;&#x9664;&#x91CD;&#x590D;&#x7684; JS &#x548C; CSS</li>
<li>&#x914D;&#x7F6E; ETags</li>
<li>&#x4F7F; AJAX &#x53EF;&#x7F13;&#x5B58;</li>
<li>&#x5C3D;&#x65E9;&#x5237;&#x65B0;&#x8F93;&#x51FA;&#x7F13;&#x51B2;</li>
<li>&#x4F7F;&#x7528; GET &#x6765;&#x5B8C;&#x6210; AJAX &#x8BF7;&#x6C42;</li>
<li>&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;</li>
<li>&#x9884;&#x52A0;&#x8F7D;</li>
<li>&#x51CF;&#x5C11; DOM &#x5143;&#x7D20;&#x4E2A;&#x6570;</li>
<li>&#x6839;&#x636E;&#x57DF;&#x540D;&#x5212;&#x5206;&#x9875;&#x9762;&#x5185;&#x5BB9;</li>
<li>&#x5C3D;&#x91CF;&#x51CF;&#x5C11; iframe &#x7684;&#x4E2A;&#x6570;</li>
<li>&#x907F;&#x514D; 404</li>
<li>&#x51CF;&#x5C11; Cookie &#x7684;&#x5927;&#x5C0F;</li>
<li>&#x4F7F;&#x7528;&#x65E0; cookie &#x7684;&#x57DF;</li>
<li>&#x51CF;&#x5C11; DOM &#x8BBF;&#x95EE;</li>
<li>&#x5F00;&#x53D1;&#x667A;&#x80FD;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;</li>
<li>&#x7528; &lt;link&gt; &#x4EE3;&#x66FF; @import</li>
<li>&#x907F;&#x514D;&#x4F7F;&#x7528;&#x6EE4;&#x955C;</li>
<li>&#x4F18;&#x5316;&#x56FE;&#x50CF;</li>
<li>&#x4F18;&#x5316; CSS Spirite</li>
<li>&#x4E0D;&#x8981;&#x5728; HTML &#x4E2D;&#x7F29;&#x653E;&#x56FE;&#x50CF;&#x2014;&#x2014;&#x987B;&#x6743;&#x8861;</li>
<li>favicon.ico&#x8981;&#x5C0F;&#x800C;&#x4E14;&#x53EF;&#x7F13;&#x5B58;</li>
<li>&#x4FDD;&#x6301;&#x5355;&#x4E2A;&#x5185;&#x5BB9;&#x5C0F;&#x4E8E;25K</li>
<li>&#x6253;&#x5305;&#x7EC4;&#x4EF6;&#x6210;&#x590D;&#x5408;&#x6587;&#x672C;</li>
</ol></blockquote>
<p>&#x5982;&#x5BF9; <strong>&#x96C5;&#x864E;&#x519B;&#x89C4;</strong> &#x7684;&#x5177;&#x4F53;&#x7EC6;&#x5219;&#x5185;&#x5BB9;&#x4E0D;&#x662F;&#x5F88;&#x4E86;&#x89E3;&#xFF0C;&#x53EF;&#x81EA;&#x884C;&#x53BB;&#x5404;&#x641C;&#x7D22; &#x1F50D; &#x5F15;&#x64CE; &#xFF0C;&#x641C;&#x7D22; <strong>&#x96C5;&#x864E;&#x519B;&#x89C4;</strong> &#x4E86;&#x89E3;&#x8BE6;&#x60C5;&#x3002;</p>
<h2 id="articleHeader0">&#x538B;&#x7F29; &#x5408;&#x5E76;</h2>
<p>&#x5BF9;&#x4E8E; <strong>&#x524D;&#x7AEF;&#x6027;&#x80FD;&#x4F18;&#x5316;</strong> &#x81EA;&#x7136;&#x8981;&#x5173;&#x6CE8; <strong>&#x9996;&#x5C4F;</strong> &#x6253;&#x5F00;&#x901F;&#x5EA6;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x901F;&#x5EA6;&#xFF0C;&#x5F88;&#x5927;&#x56E0;&#x7D20;&#x662F;&#x82B1;&#x8D39;&#x5728;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x4E0A;&#xFF0C;&#x90A3;&#x4E48;&#x600E;&#x4E48;&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x95F4;&#x5462;&#xFF1F;</p>
<ul>
<li>&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6B21;&#x6570;</li>
<li>&#x51CF;&#x5C0F;&#x6587;&#x4EF6;&#x4F53;&#x79EF;</li>
<li>&#x4F7F;&#x7528; <code>CDN</code> &#x52A0;&#x901F;</li>
</ul>
<p>&#x6240;&#x4EE5; <strong>&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;</strong> &#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x7528; <code>gulp</code> &#x3001; <code>webpack</code> &#x3001; <code>grunt</code> &#x7B49;&#x6784;&#x5EFA;&#x5DE5;&#x5177; <strong>&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;</strong></p>
<h3 id="articleHeader1">
<code>JS&#x3001;CSS</code> &#x538B;&#x7F29; &#x5408;&#x5E76;</h3>
<p>&#x4F8B;&#x5982;&#xFF1A;<code>gulp js&#x3001;css</code> &#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;&#x4EE3;&#x7801;&#x5982;&#x4E0B; &#x1F447;</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="//&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;js
gulp.task(&apos;scripts&apos;, function () {
    return gulp.src([
        &apos;./public/lib/fastclick/lib/fastclick.min.js&apos;,
        &apos;./public/lib/jquery_lazyload/jquery.lazyload.js&apos;,
        &apos;./public/lib/velocity/velocity.min.js&apos;,
        &apos;./public/lib/velocity/velocity.ui.min.js&apos;,
        &apos;./public/lib/fancybox/source/jquery.fancybox.pack.js&apos;,
        &apos;./public/js/src/utils.js&apos;,
        &apos;./public/js/src/motion.js&apos;,
        &apos;./public/js/src/scrollspy.js&apos;,
        &apos;./public/js/src/post-details.js&apos;,
        &apos;./public/js/src/bootstrap.js&apos;,
        &apos;./public/js/src/push.js&apos;,
        &apos;./public/live2dw/js/perTips.js&apos;,
        &apos;./public/live2dw/lib/L2Dwidget.min.js&apos;,
        &apos;./public/js/src/love.js&apos;,
        &apos;./public/js/src/busuanzi.pure.mini.js&apos;,
        &apos;./public/js/src/activate-power-mode.js&apos;
    ]).pipe(concat(&apos;all.js&apos;)).pipe(minify()).pipe(gulp.dest(&apos;./public/dist/&apos;));
});

// &#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76; CSS 
gulp.task(&apos;css&apos;, function () {
    return gulp.src([
        &apos;./public/lib/font-awesome/css/font-awesome.min.css&apos;,
        &apos;./public/lib/fancybox/source/jquery.fancybox.css&apos;,
        &apos;./public/css/main.css&apos;,
        &apos;./public/css/lib.css&apos;,
        &apos;./public/live2dw/css/perTips.css&apos;
    ]).pipe(concat(&apos;all.css&apos;)).pipe(minify()).pipe(gulp.dest(&apos;./public/dist/&apos;));
});" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">//&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;js</span>
gulp.task(<span class="hljs-string">&apos;scripts&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> gulp.src([
        <span class="hljs-string">&apos;./public/lib/fastclick/lib/fastclick.min.js&apos;</span>,
        <span class="hljs-string">&apos;./public/lib/jquery_lazyload/jquery.lazyload.js&apos;</span>,
        <span class="hljs-string">&apos;./public/lib/velocity/velocity.min.js&apos;</span>,
        <span class="hljs-string">&apos;./public/lib/velocity/velocity.ui.min.js&apos;</span>,
        <span class="hljs-string">&apos;./public/lib/fancybox/source/jquery.fancybox.pack.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/utils.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/motion.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/scrollspy.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/post-details.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/bootstrap.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/push.js&apos;</span>,
        <span class="hljs-string">&apos;./public/live2dw/js/perTips.js&apos;</span>,
        <span class="hljs-string">&apos;./public/live2dw/lib/L2Dwidget.min.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/love.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/busuanzi.pure.mini.js&apos;</span>,
        <span class="hljs-string">&apos;./public/js/src/activate-power-mode.js&apos;</span>
    ]).pipe(concat(<span class="hljs-string">&apos;all.js&apos;</span>)).pipe(minify()).pipe(gulp.dest(<span class="hljs-string">&apos;./public/dist/&apos;</span>));
});

<span class="hljs-comment">// &#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76; CSS </span>
gulp.task(<span class="hljs-string">&apos;css&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> gulp.src([
        <span class="hljs-string">&apos;./public/lib/font-awesome/css/font-awesome.min.css&apos;</span>,
        <span class="hljs-string">&apos;./public/lib/fancybox/source/jquery.fancybox.css&apos;</span>,
        <span class="hljs-string">&apos;./public/css/main.css&apos;</span>,
        <span class="hljs-string">&apos;./public/css/lib.css&apos;</span>,
        <span class="hljs-string">&apos;./public/live2dw/css/perTips.css&apos;</span>
    ]).pipe(concat(<span class="hljs-string">&apos;all.css&apos;</span>)).pipe(minify()).pipe(gulp.dest(<span class="hljs-string">&apos;./public/dist/&apos;</span>));
});</code></pre>
<p>&#x7136;&#x540E;&#xFF0C;&#x518D;&#x628A; <strong>&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;</strong> &#x7684; <code>JS&#x3001;CSS</code> &#x653E;&#x5165; <code>CDN</code> , &#x1F440; &#x770B;&#x770B;&#x6548;&#x679C;&#x5982;&#x4F55;</p>
<p>&#x5982;&#x56FE;&#xFF1A;<em> <strong>&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;</strong> &#x4E14;&#x653E;&#x5165; <code>CND</code> &#x4E4B;&#x540E;&#x7684;&#x6548;&#x679C; </em></p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30d9a0e7fcf6?w=2004&amp;h=656&amp;f=png&amp;s=189241" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30d9a0e7fcf6?w=2004&amp;h=656&amp;f=png&amp;s=189241" alt="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;(js)" title="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;(js)" style="cursor: pointer;"></span></p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30d9cc84cc14?w=2076&amp;h=476&amp;f=png&amp;s=113353" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30d9cc84cc14?w=2076&amp;h=476&amp;f=png&amp;s=113353" alt="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;(css)" title="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;(css)" style="cursor: pointer; display: inline;"></span></p>
<p>&#x4EE5;&#x4E0A;&#x662F; <a href="https://lishaoy.net" rel="nofollow noreferrer" target="_blank">lishaoy.net</a> &#x6E05;&#x9664;&#x7F13;&#x5B58;&#x540E;&#x7684; <strong>&#x9996;&#x9875;</strong> &#x8BF7;&#x6C42;&#x901F;&#x5EA6;&#x3002;</p>
<p>&#x53EF;&#x89C1;&#xFF0C;&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x662F; <strong>4.59 s</strong> &#xFF0C;&#x603B;&#x8BF7;&#x6C42;&#x4E2A;&#x6570; <strong>51</strong> &#xFF0C; &#x800C; <code>js</code> &#x7684;&#x8BF7;&#x6C42;&#x4E2A;&#x6570;&#x662F; <strong>8</strong> &#xFF0C;<code>css</code> &#x7684;&#x8BF7;&#x6C42;&#x4E2A;&#x6570;&#x662F; <strong>3</strong> _&#xFF08;&#x5176;&#x5B9E;&#x5C31; all.css &#x4E00;&#x4E2A;&#xFF0C;&#x5176;&#x5B83; 2 &#x4E2A;&#x662F; Google&#x6D4F;&#x89C8;&#x5668;&#x52A0;&#x8F7D;&#x7684;&#xFF09;_&#xFF0C; &#x800C;&#x6CA1;&#x4F7F;&#x7528; <strong>&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;</strong> &#x65F6;&#x5019;&#xFF0C;&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x662F; <strong>10</strong> &#x591A;&#x79D2;&#xFF0C;&#x603B;&#x8BF7;&#x6C42;&#x4E2A;&#x6570;&#x6709; <strong>70</strong> &#x591A;&#x4E2A;&#xFF0C;<code>js</code> &#x7684;&#x8BF7;&#x6C42;&#x4E2A;&#x6570;&#x662F; <strong>20</strong> &#x591A;&#x4E2A; &#xFF0C;&#x5BF9;&#x6BD4;&#x8BF7;&#x6C42;&#x65F6;&#x95F4; <strong>&#x6027;&#x80FD;</strong> &#x63D0;&#x5347; <strong>1&#x500D;</strong> &#x591A;</p>
<p>&#x5982;&#x56FE;&#xFF1A;<em>&#x6709;&#x7F13;&#x5B58;&#x4E0B;&#x7684;&#x9996;&#x9875;&#x6548;&#x679C;</em></p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30d99eb85dd9?w=1980&amp;h=660&amp;f=png&amp;s=191229" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30d99eb85dd9?w=1980&amp;h=660&amp;f=png&amp;s=191229" alt="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;&#xFF08;&#x7F13;&#x5B58;&#xFF09;" title="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;&#xFF08;&#x7F13;&#x5B58;&#xFF09;" style="cursor: pointer; display: inline;"></span></p>
<p>&#x57FA;&#x672C;&#x90FD;&#x662F;&#x79D2;&#x5F00; &#x1F61D;</p>
<blockquote><em>Tips&#xFF1A;&#x5728; <strong>&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;</strong> &#x540E;&#xFF0C;&#x5355;&#x4E2A;&#x6587;&#x4EF6;&#x63A7;&#x5236;&#x5728; 25 ~ 30 KB&#x5DE6;&#x53F3;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x57DF;&#x4E0B;&#xFF0C;&#x6700;&#x597D;&#x4E0D;&#x8981;&#x591A;&#x4E8E;5&#x4E2A;&#x8D44;&#x6E90;</em></blockquote>
<h3 id="articleHeader2">&#x56FE;&#x7247;&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;</h3>
<p>&#x4F8B;&#x5982;&#xFF1A;<code>gulp</code> &#x56FE;&#x7247;&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x5982;&#x4E0B; &#x1F447;</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="//&#x538B;&#x7F29;image
gulp.task(&apos;imagemin&apos;, function () {
    gulp.src(&apos;./public/**/*.{png,jpg,gif,ico,jpeg}&apos;)
        .pipe(imagemin())
        .pipe(gulp.dest(&apos;./public&apos;));
});" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">//&#x538B;&#x7F29;image</span>
gulp.task(<span class="hljs-string">&apos;imagemin&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    gulp.src(<span class="hljs-string">&apos;./public/**/*.{png,jpg,gif,ico,jpeg}&apos;</span>)
        .pipe(imagemin())
        .pipe(gulp.dest(<span class="hljs-string">&apos;./public&apos;</span>));
});</code></pre>
<p>&#x56FE;&#x7247;&#x7684;&#x5408;&#x5E76;&#x53EF;&#x4EE5;&#x91C7;&#x7528; <code>CSS Spirite</code>&#xFF0C;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x628A;&#x4E00;&#x4E9B;&#x5C0F;&#x56FE;&#x7528; <code>PS</code> &#x5408;&#x6210;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528; <code>css</code> &#x5B9A;&#x4F4D;&#x663E;&#x793A;&#x6BCF;&#x5F20;&#x56FE;&#x7247;&#x7684;&#x4F4D;&#x7F6E;</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text=".top_right .phone {
    background: url(../images/top_right.png) no-repeat 7px -17px;
    padding: 0 38px;
}

.top_right .help {
    background: url(../images/top_right.png) no-repeat 0 -47px;
    padding: 0 38px;
}" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="css hljs"><code class="css"><span class="hljs-selector-class">.top_right</span> <span class="hljs-selector-class">.phone</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(../images/top_right.png) no-repeat <span class="hljs-number">7px</span> -<span class="hljs-number">17px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">38px</span>;
}

<span class="hljs-selector-class">.top_right</span> <span class="hljs-selector-class">.help</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(../images/top_right.png) no-repeat <span class="hljs-number">0</span> -<span class="hljs-number">47px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">38px</span>;
}</code></pre>
<p>&#x7136;&#x540E;&#xFF0C;&#x628A; <strong>&#x538B;&#x7F29;</strong> &#x7684;&#x56FE;&#x7247;&#x653E;&#x5165; <code>CDN</code> , &#x1F440; &#x770B;&#x770B;&#xFF0C;&#x6548;&#x679C;&#x5982;&#x4F55;</p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30d9a19a76ab?w=2172&amp;h=930&amp;f=png&amp;s=151863" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30d9a19a76ab?w=2172&amp;h=930&amp;f=png&amp;s=151863" alt="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;&#xFF08;images&#xFF09;" title="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;&#xFF08;images&#xFF09;" style="cursor: pointer;"></span></p>
<p>&#x53EF;&#x89C1;&#xFF0C;&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x662F; <strong>1.70 s</strong> ,&#x603B;&#x8BF7;&#x6C42;&#x4E2A;&#x6570; <strong>50</strong> &#xFF0C; &#x800C; <code>img</code> &#x7684;&#x8BF7;&#x6C42;&#x4E2A;&#x6570;&#x662F; <strong>15</strong> <em>&#xFF08;&#x8FD9;&#x91CC;&#x56E0;&#x4E3A;&#x9996;&#x9875;&#x90FD;&#x662F;&#x5927;&#x56FE;&#xFF0C;&#x5C31;&#x6CA1;&#x6709;&#x5408;&#x5E76;&#xFF0C;&#x53EA;&#x662F;&#x538B;&#x7F29;&#x4E86;&#xFF09;</em> &#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x6548;&#x679C;&#x5F88;&#x597D; &#x1F600; &#xFF0C;&#x4ECE; <strong>4.59 s</strong> &#x7F29;&#x77ED;&#x5230; <strong>1.70 s</strong>, &#x6027;&#x80FD;&#x53C8;&#x63D0;&#x5347;&#x4E00;&#x500D;&#x3002;</p>
<p>&#x518D;&#x770B;&#x770B;&#x6709;&#x7F13;&#x5B58;&#x60C5;&#x51B5;&#x5982;&#x4F55; &#x1F60F;</p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30d99d7601c5?w=2116&amp;h=920&amp;f=png&amp;s=164160" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30d99d7601c5?w=2116&amp;h=920&amp;f=png&amp;s=164160" alt="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;&#xFF08;images &#x7F13;&#x5B58;&#xFF09;" title="&#x9996;&#x9875;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;&#xFF08;images &#x7F13;&#x5B58;&#xFF09;" style="cursor: pointer;"></span></p>
<p>&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x662F; <strong>1.05 s</strong> &#xFF0C;&#x6709;&#x7F13;&#x5B58;&#x548C;&#x65E0;&#x7F13;&#x5B58;&#x57FA;&#x672C;&#x5DEE;&#x4E0D;&#x591A;</p>
<blockquote><em>Tips&#xFF1A;&#x5927;&#x7684;&#x56FE;&#x7247;&#x5728;&#x4E0D;&#x540C;&#x7EC8;&#x7AEF;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x5206;&#x8FA8;&#x7387;&#xFF0C;&#x800C;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x7F29;&#x653E;&#xFF08;&#x767E;&#x5206;&#x6BD4;&#xFF09;</em></blockquote>
<p>&#x6574;&#x4E2A; <strong>&#x538B;&#x7F29;&#x3001;&#x5408;&#x5E76;</strong> <em>&#xFF08;js&#x3001;css&#x3001;img&#xFF09;</em> &#x518D;&#x653E;&#x5165; <code>CDN</code> &#xFF0C;&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x4ECE; <strong>10</strong> &#x591A;&#x79D2; &#xFF0C;&#x5230;&#x6700;&#x540E;&#x7684; <strong>1.70 s</strong> &#xFF0C;&#x6027;&#x80FD;&#x63D0;&#x5347; <strong>5</strong> &#x500D;&#x591A;&#xFF0C;&#x53EF;&#x89C1;&#xFF0C;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x5FC5;&#x8981;&#x6027;&#x3002;</p>
<h2 id="articleHeader3">&#x7F13;&#x5B58;</h2>
<p>&#x7F13;&#x5B58;&#x4F1A;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x4FDD;&#x5B58;&#x8F93;&#x51FA;&#x5185;&#x5BB9;&#x7684;&#x526F;&#x672C;&#xFF0C;&#x4F8B;&#x5982; <strong>&#x9875;&#x9762;&#x3001;&#x56FE;&#x7247;&#x3001;&#x6587;&#x4EF6;</strong>&#xFF0C;&#x5F53;&#x4E0B;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x6765;&#x5230;&#x7684;&#x65F6;&#x5019;:&#x5982;&#x679C;&#x662F;&#x76F8;&#x540C;&#x7684;<code>URL</code>&#xFF0C;&#x7F13;&#x5B58;&#x76F4;&#x63A5;&#x4F7F; &#x7528;&#x672C;&#x5730;&#x7684;&#x526F;&#x672C;&#x54CD;&#x5E94;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5411;&#x6E90;&#x670D;&#x52A1;&#x5668;&#x518D;&#x6B21;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x4EE5;&#x4E0B; <strong>2</strong> &#x4E2A;&#x65B9;&#x9762;&#x63D0;&#x5347;&#x6027;&#x80FD;&#x3002;</p>
<ul>
<li>&#x51CF;&#x5C11;&#x76F8;&#x5E94;&#x5EF6;&#x8FDF;&#xFF0C;&#x63D0;&#x5347;&#x54CD;&#x5E94;&#x65F6;&#x95F4;</li>
<li>&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x5E26;&#x5BBD;&#x6D88;&#x8017;&#xFF0C;&#x8282;&#x7701;&#x6D41;&#x91CF;</li>
</ul>
<p>&#x6211;&#x4EEC;&#x7528;&#x4E24;&#x5E45;&#x56FE;&#x6765;&#x4E86;&#x89E3;&#x4E0B;&#x6D4F;&#x89C8;&#x5668;&#x7684; <strong>&#x7F13;&#x5B58;&#x673A;&#x5236;</strong></p>
<p><strong>&#x6D4F;&#x89C8;&#x5668;&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;</strong></p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30da286b56f5?w=474&amp;h=516&amp;f=png&amp;s=102028" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30da286b56f5?w=474&amp;h=516&amp;f=png&amp;s=102028" alt="&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;" title="&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;" style="cursor: pointer;"></span></p>
<p><strong>&#x6D4F;&#x89C8;&#x5668;&#x518D;&#x6B21;&#x8BF7;&#x6C42;</strong></p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30d9a369b2a6?w=808&amp;h=588&amp;f=png&amp;s=156684" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30d9a369b2a6?w=808&amp;h=588&amp;f=png&amp;s=156684" alt="&#x518D;&#x6B21;&#x8BF7;&#x6C42;" title="&#x518D;&#x6B21;&#x8BF7;&#x6C42;" style="cursor: pointer;"></span></p>
<p>&#x4ECE;&#x4EE5;&#x4E0A;&#x4E24;&#x5E45;&#x56FE;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x6E05;&#x695A;&#x7684;&#x4E86;&#x89E3;&#x6D4F;&#x89C8;&#x5668; <strong>&#x7F13;&#x5B58;</strong> &#x7684;&#x8FC7;&#x7A0B;&#x3002;<br>&#x9996;&#x6B21;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A; <code>URL</code> &#xFF0C;&#x6CA1;&#x6709; <strong>&#x7F13;&#x5B58;</strong> &#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x54CD;&#x5E94;&#x4E00;&#x4E9B; <code>header</code> &#x4FE1;&#x606F;&#xFF0C;&#x5982;&#xFF1A;<code>expires&#x3001;cache-control&#x3001;last-modified&#x3001;etag</code> &#x7B49;&#xFF0C;&#x6765;&#x8BB0;&#x5F55;&#x4E0B;&#x6B21;&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x7F13;&#x5B58;&#x3001;&#x5982;&#x4F55;&#x7F13;&#x5B58;&#x3002;<br>&#x518D;&#x6B21;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A; <code>URL</code> &#x65F6;&#x5019;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x6839;&#x636E;&#x9996;&#x6B21;&#x8BBF;&#x95EE;&#x8FD4;&#x56DE;&#x7684; <code>header</code> &#x4FE1;&#x606F;&#xFF0C;&#x6765;&#x51B3;&#x7B56;&#x662F;&#x5426;&#x7F13;&#x5B58;&#x3001;&#x5982;&#x4F55;&#x7F13;&#x5B58;&#x3002;<br>&#x6211;&#x4EEC;&#x91CD;&#x70B9;&#x6765;&#x5206;&#x6790;&#x4E0B;&#x7B2C;&#x4E8C;&#x5E45;&#x56FE;&#xFF0C;&#x5176;&#x5B9E;&#x662F;&#x5206;&#x4E24;&#x6761;&#x7EBF;&#x8DEF;&#xFF0C;&#x5982;&#x4E0B; &#x1F447;</p>
<ul><li>
<strong>&#x7B2C;&#x4E00;&#x6761;&#x7EBF;&#x8DEF;&#xFF1A;</strong> &#x5F53;&#x6D4F;&#x89C8;&#x5668;&#x518D;&#x6B21;&#x8BBF;&#x95EE;&#x67D0;&#x4E2A; <code>URL</code> &#x65F6;&#xFF0C;&#x4F1A;&#x5148;&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#x7684; <code>header</code> &#x4FE1;&#x606F;&#xFF0C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x547D;&#x4E2D;&#x5F3A;&#x7F13;&#x5B58; <em>&#xFF08;cache-control&#x548C;expires&#xFF09;</em> &#xFF0C;&#x5982;&#x547D;&#x4E2D;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;&#x7F13;&#x5B58;&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#xFF0C;&#x5305;&#x62EC;&#x54CD;&#x5E94;&#x7684; <code>header</code> &#x4FE1;&#x606F; <em>&#xFF08;&#x8BF7;&#x6C42;&#x4E0D;&#x4F1A;&#x548C;&#x670D;&#x52A1;&#x5668;&#x901A;&#x4FE1;&#xFF09;</em> &#xFF0C;&#x4E5F;&#x5C31;&#x662F; <strong>&#x5F3A;&#x7F13;&#x5B58;</strong> &#xFF0C;&#x5982;&#x56FE;</li></ul>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30da288785ac?w=1882&amp;h=1508&amp;f=png&amp;s=260077" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30da288785ac?w=1882&amp;h=1508&amp;f=png&amp;s=260077" alt="&#x5F3A;&#x7F13;&#x5B58;" title="&#x5F3A;&#x7F13;&#x5B58;" style="cursor: pointer;"></span></p>
<ul><li>
<strong>&#x7B2C;&#x4E8C;&#x6761;&#x7EBF;&#x8DEF;&#xFF1A;</strong> &#x5982;&#x6CA1;&#x6709;&#x547D;&#x4E2D; <strong>&#x5F3A;&#x7F13;&#x5B58;</strong> &#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8BF7;&#x6C42;&#x4F1A;&#x643A;&#x5E26;&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#x7684;&#x6709;&#x5173;&#x7F13;&#x5B58;&#x7684; <code>header</code> &#x4FE1;&#x606F; <em>&#xFF08;Last-Modified/If-Modified-Since&#x548C;Etag/If-None-Match&#xFF09;</em> &#xFF0C;&#x7531;&#x670D;&#x52A1;&#x5668;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x4E2D;&#x7684;&#x76F8;&#x5173; <code>header</code> &#x4FE1;&#x606F;&#x6765;&#x6BD4;&#x5BF9;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x534F;&#x5546;&#x7F13;&#x5B58;&#x547D;&#x4E2D;&#xFF1B;&#x82E5;&#x547D;&#x4E2D;&#xFF0C;&#x5219;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x65B0;&#x7684;&#x54CD;&#x5E94; <code>header</code> &#x4FE1;&#x606F;&#x66F4;&#x65B0;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x5BF9;&#x5E94; <code>header</code> &#x4FE1;&#x606F;&#xFF0C;&#x4F46;&#x662F;&#x5E76;&#x4E0D;&#x8FD4;&#x56DE;&#x8D44;&#x6E90;&#x5185;&#x5BB9;&#xFF0C;&#x5B83;&#x4F1A;&#x544A;&#x77E5;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4ECE;&#x7F13;&#x5B58;&#x83B7;&#x53D6;&#xFF1B;&#x5426;&#x5219;&#x8FD4;&#x56DE;&#x6700;&#x65B0;&#x7684;&#x8D44;&#x6E90;&#x5185;&#x5BB9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; <strong>&#x534F;&#x5546;&#x7F13;&#x5B58;</strong>&#x3002;</li></ul>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x4E86;&#x89E3;&#x5230;&#x6D4F;&#x89C8;&#x5668;&#x7F13;&#x5B58;&#x673A;&#x5236;&#x5206;&#x4E3A; <strong>&#x5F3A;&#x7F13;&#x5B58;&#x3001;&#x534F;&#x5546;&#x7F13;&#x5B58;</strong>&#xFF0C;&#x518D;&#x6765;&#x770B;&#x770B;&#x4ED6;&#x4EEC;&#x7684;&#x533A;&#x522B; &#x1F447;</p>
<table>
<thead><tr>
<th align="center">&#x7F13;&#x5B58;&#x7B56;&#x7565;</th>
<th align="center">&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#x5F62;&#x5F0F;</th>
<th align="center">&#x72B6;&#x6001;&#x7801;</th>
<th align="center">&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x5230;&#x670D;&#x52A1;&#x5668;</th>
</tr></thead>
<tbody>
<tr>
<td align="center">&#x5F3A;&#x7F13;&#x5B58;</td>
<td align="center">&#x4ECE;&#x7F13;&#x5B58;&#x53D6;</td>
<td align="center">200&#xFF08;from memory cache&#xFF09;</td>
<td align="center">&#x5426;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;&#x7F13;&#x5B58;&#x53D6;</td>
</tr>
<tr>
<td align="center">&#x534F;&#x5546;&#x7F13;&#x5B58;</td>
<td align="center">&#x4ECE;&#x7F13;&#x5B58;&#x53D6;</td>
<td align="center">304&#xFF08;not modified&#xFF09;</td>
<td align="center">&#x662F;&#xFF0C;&#x901A;&#x8FC7;&#x670D;&#x52A1;&#x5668;&#x6765;&#x544A;&#x77E5;&#x7F13;&#x5B58;&#x662F;&#x5426;&#x53EF;&#x7528;</td>
</tr>
</tbody>
</table>
<h3 id="articleHeader4">&#x5F3A;&#x7F13;&#x5B58;</h3>
<p>&#x4E0E;&#x5F3A;&#x7F13;&#x5B58;&#x76F8;&#x5173;&#x7684; <code>header</code> &#x5B57;&#x6BB5;&#x6709;&#x4E24;&#x4E2A;&#xFF1A;</p>
<h4>expires</h4>
<p><strong>expires&#xFF1A;</strong> &#x8FD9;&#x662F; <code>http1.0</code> &#x65F6;&#x7684;&#x89C4;&#x8303;&#xFF0C;&#x5B83;&#x7684;&#x503C;&#x4E3A;&#x4E00;&#x4E2A;&#x7EDD;&#x5BF9;&#x65F6;&#x95F4;&#x7684; <strong>GMT</strong> &#x683C;&#x5F0F;&#x7684;&#x65F6;&#x95F4;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5982; <code>Mon, 10 Jun 2015 21:31:12 GMT</code> &#xFF0C;&#x5982;&#x679C;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x95F4;&#x5728; <strong>expires</strong> &#x4E4B;&#x524D;&#xFF0C;&#x90A3;&#x4E48;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x59CB;&#x7EC8;&#x6709;&#x6548;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x4F1A;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x5230;&#x670D;&#x52A1;&#x5668;&#x6765;&#x83B7;&#x53D6;&#x8D44;&#x6E90;</p>
<h4>cache-control</h4>
<p><strong>cache-control:</strong> <code>max-age=number</code> &#xFF0C;&#x8FD9;&#x662F; <code>http1.1</code> &#x65F6;&#x51FA;&#x73B0;&#x7684; <code>header</code> &#x4FE1;&#x606F;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x5229;&#x7528;&#x8BE5;&#x5B57;&#x6BB5;&#x7684; <code>max-age</code> &#x503C;&#x6765;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x503C;&#xFF1B;&#x8D44;&#x6E90;&#x7B2C;&#x4E00;&#x6B21;&#x7684;&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x548C; <strong>Cache-Control</strong> &#x8BBE;&#x5B9A;&#x7684;&#x6709;&#x6548;&#x671F;&#xFF0C;&#x8BA1;&#x7B97;&#x51FA;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x518D;&#x62FF;&#x8FD9;&#x4E2A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x8DDF;&#x5F53;&#x524D;&#x7684;&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x5728;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4E4B;&#x524D;&#xFF0C;&#x5C31;&#x80FD;&#x547D;&#x4E2D;&#x7F13;&#x5B58;&#xFF0C;&#x5426;&#x5219;&#x672A;&#x547D;&#x4E2D;&#xFF0C; <strong>cache-control</strong> &#x9664;&#x4E86;&#x8BE5;&#x5B57;&#x6BB5;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x4E0B;&#x9762;&#x51E0;&#x4E2A;&#x6BD4;&#x8F83;&#x5E38;&#x7528;&#x7684;&#x8BBE;&#x7F6E;&#x503C;&#xFF1A;</p>
<ul>
<li>
<strong>no-cache&#xFF1A;</strong> &#x4E0D;&#x4F7F;&#x7528;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x3002;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x534F;&#x5546;&#xFF0C;&#x5148;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x786E;&#x8BA4;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x662F;&#x5426;&#x88AB;&#x66F4;&#x6539;&#xFF0C;&#x5982;&#x679C;&#x4E4B;&#x524D;&#x7684;&#x54CD;&#x5E94;&#x4E2D;&#x5B58;&#x5728; <code>ETag</code> &#xFF0C;&#x90A3;&#x4E48;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;&#xFF0C;&#x5982;&#x679C;&#x8D44;&#x6E90;&#x672A;&#x88AB;&#x66F4;&#x6539;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x91CD;&#x65B0;&#x4E0B;&#x8F7D;&#x3002;</li>
<li>
<strong>no-store&#xFF1A;</strong> &#x76F4;&#x63A5;&#x7981;&#x6B62;&#x6E38;&#x89C8;&#x5668;&#x7F13;&#x5B58;&#x6570;&#x636E;&#xFF0C;&#x6BCF;&#x6B21;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x8BE5;&#x8D44;&#x6E90;&#xFF0C;&#x90FD;&#x4F1A;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;&#x6BCF;&#x6B21;&#x90FD;&#x4F1A;&#x4E0B;&#x8F7D;&#x5B8C;&#x6574;&#x7684;&#x8D44;&#x6E90;&#x3002;</li>
<li>
<strong>public&#xFF1A;</strong> &#x53EF;&#x4EE5;&#x88AB;&#x6240;&#x6709;&#x7684;&#x7528;&#x6237;&#x7F13;&#x5B58;&#xFF0C;&#x5305;&#x62EC;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x548C; <code>CDN</code> &#x7B49;&#x4E2D;&#x95F4;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x3002;</li>
<li>
<strong>private&#xFF1A;</strong> &#x53EA;&#x80FD;&#x88AB;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7F13;&#x5B58;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8; <code>CDN</code> &#x7B49;&#x4E2D;&#x7EE7;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x5BF9;&#x5176;&#x7F13;&#x5B58;&#x3002;</li>
</ul>
<blockquote><em>Tips&#xFF1A;&#x5982;&#x679C; cache-control &#x4E0E; expires &#x540C;&#x65F6;&#x5B58;&#x5728;&#x7684;&#x8BDD;&#xFF0C;cache-control &#x7684;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x4E8E; expires</em></blockquote>
<h3 id="articleHeader5">&#x534F;&#x5546;&#x7F13;&#x5B58;</h3>
<p>&#x534F;&#x5546;&#x7F13;&#x5B58;&#x90FD;&#x662F;&#x7531;&#x6D4F;&#x89C8;&#x5668;&#x548C;&#x670D;&#x52A1;&#x5668;&#x534F;&#x5546;&#xFF0C;&#x6765;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x7F13;&#x5B58;&#xFF0C;&#x534F;&#x5546;&#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x4E24;&#x7EC4; <code>header</code> &#x5B57;&#x6BB5;&#xFF0C;&#x8FD9;&#x4E24;&#x7EC4;&#x5B57;&#x6BB5;&#x90FD;&#x662F;&#x6210;&#x5BF9;&#x51FA;&#x73B0;&#x7684;&#xFF0C;&#x5373;&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;&#x5934;&#x5E26;&#x4E0A;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5; <em>&#xFF08; <strong>Last-Modified</strong> &#x6216;&#x8005; <strong>Etag</strong> &#xFF09;</em> &#xFF0C;&#x5219;&#x540E;&#x7EED;&#x8BF7;&#x6C42;&#x4F1A;&#x5E26;&#x4E0A;&#x5BF9;&#x5E94;&#x7684;&#x8BF7;&#x6C42;&#x5B57;&#x6BB5; <em>&#xFF08;<strong>If-Modified-Since</strong> &#x6216;&#x8005; <strong>If-None-Match</strong> &#xFF09;</em> &#xFF0C;&#x82E5;&#x54CD;&#x5E94;&#x5934;&#x6CA1;&#x6709; <strong>Last-Modified</strong> &#x6216;&#x8005; <strong>Etag</strong> &#x5B57;&#x6BB5;&#xFF0C;&#x5219;&#x8BF7;&#x6C42;&#x5934;&#x4E5F;&#x4E0D;&#x4F1A;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x5B57;&#x6BB5;&#x3002;</p>
<h4>Last-Modified/If-Modified-Since</h4>
<p>&#x4E8C;&#x8005;&#x7684;&#x503C;&#x90FD;&#x662F; <code>GMT</code> &#x683C;&#x5F0F;&#x7684;&#x65F6;&#x95F4;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5177;&#x4F53;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<ul>
<li>&#x6D4F;&#x89C8;&#x5668;&#x7B2C;&#x4E00;&#x6B21;&#x8DDF;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5728;&#x8FD4;&#x56DE;&#x8FD9;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5728; <code>respone</code> &#x7684; <code>header</code> &#x52A0;&#x4E0A; <strong>Last-Modified</strong> &#x5B57;&#x6BB5;&#xFF0C;&#x8FD9;&#x4E2A; <code>header</code> &#x5B57;&#x6BB5;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x8D44;&#x6E90;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;</li>
<li>&#x6D4F;&#x89C8;&#x5668;&#x518D;&#x6B21;&#x8DDF;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x8FD9;&#x4E2A;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x5728; <code>request</code> &#x7684; <code>header</code> &#x4E0A;&#x52A0;&#x4E0A; <strong>If-Modified-Since</strong> &#x5B57;&#x6BB5;&#xFF0C;&#x8FD9;&#x4E2A; <code>header</code> &#x5B57;&#x6BB5;&#x7684;&#x503C;&#x5C31;&#x662F;&#x4E0A;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x65F6;&#x8FD4;&#x56DE;&#x7684; <strong>Last-Modified</strong> &#x7684;&#x503C;</li>
<li>&#x670D;&#x52A1;&#x5668;&#x518D;&#x6B21;&#x6536;&#x5230;&#x8D44;&#x6E90;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x6839;&#x636E;&#x6D4F;&#x89C8;&#x5668;&#x4F20;&#x8FC7;&#x6765; <strong>If-Modified-Since</strong> &#x548C;&#x8D44;&#x6E90;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x5224;&#x65AD;&#x8D44;&#x6E90;&#x662F;&#x5426;&#x6709;&#x53D8;&#x5316;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x53D8;&#x5316;&#x5219;&#x8FD4;&#x56DE; <code>304 Not Modified</code> &#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x8D44;&#x6E90;&#x5185;&#x5BB9;&#xFF1B;&#x5982;&#x679C;&#x6709;&#x53D8;&#x5316;&#xFF0C;&#x5C31;&#x6B63;&#x5E38;&#x8FD4;&#x56DE;&#x8D44;&#x6E90;&#x5185;&#x5BB9;&#x3002;&#x5F53;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE; <code>304 Not Modified</code> &#x7684;&#x54CD;&#x5E94;&#x65F6;&#xFF0C;<code>response header</code> &#x4E2D;&#x4E0D;&#x4F1A;&#x518D;&#x6DFB;&#x52A0; <strong>Last-Modified&#x7684;header</strong> &#xFF0C;&#x56E0;&#x4E3A;&#x65E2;&#x7136;&#x8D44;&#x6E90;&#x6CA1;&#x6709;&#x53D8;&#x5316;&#xFF0C;&#x90A3;&#x4E48; <strong>Last-Modified</strong> &#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#xFF0C;&#x8FD9;&#x662F;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE; <code>304</code> &#x65F6;&#x7684; <code>response header</code>
</li>
<li>&#x6D4F;&#x89C8;&#x5668;&#x6536;&#x5230; <code>304</code> &#x7684;&#x54CD;&#x5E94;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x52A0;&#x8F7D;&#x8D44;&#x6E90;</li>
<li>&#x5982;&#x679C;&#x534F;&#x5546;&#x7F13;&#x5B58;&#x6CA1;&#x6709;&#x547D;&#x4E2D;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x76F4;&#x63A5;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x52A0;&#x8F7D;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;<strong>Last-Modified</strong> &#x7684; <code>Header</code> &#x5728;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x88AB;&#x66F4;&#x65B0;&#xFF0C;&#x4E0B;&#x6B21;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;<strong>If-Modified-Since</strong> &#x4F1A;&#x542F;&#x7528;&#x4E0A;&#x6B21;&#x8FD4;&#x56DE;&#x7684;<strong>Last-Modified</strong> &#x503C;</li>
</ul>
<h4>Etag/If-None-Match</h4>
<p>&#x8FD9;&#x4E24;&#x4E2A;&#x503C;&#x662F;&#x7531;&#x670D;&#x52A1;&#x5668;&#x751F;&#x6210;&#x7684;&#x6BCF;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x53EA;&#x8981;&#x8D44;&#x6E90;&#x6709;&#x53D8;&#x5316;&#x5C31;&#x8FD9;&#x4E2A;&#x503C;&#x5C31;&#x4F1A;&#x6539;&#x53D8;&#xFF1B;&#x5176;&#x5224;&#x65AD;&#x8FC7;&#x7A0B;&#x4E0E; <strong>Last-Modified&#x3001;If-Modified-Since</strong> &#x7C7B;&#x4F3C;&#xFF0C;&#x4E0E; <strong>Last-Modified</strong> &#x4E0D;&#x4E00;&#x6837;&#x7684;&#x662F;&#xFF0C;&#x5F53;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE; <code>304 Not Modified</code> &#x7684;&#x54CD;&#x5E94;&#x65F6;&#xFF0C;&#x7531;&#x4E8E; <strong>ETag</strong> &#x91CD;&#x65B0;&#x751F;&#x6210;&#x8FC7;&#xFF0C;<code>response header</code> &#x4E2D;&#x8FD8;&#x4F1A;&#x628A;&#x8FD9;&#x4E2A; <strong>ETag</strong> &#x8FD4;&#x56DE;&#xFF0C;&#x5373;&#x4F7F;&#x8FD9;&#x4E2A; <strong>ETag</strong> &#x8DDF;&#x4E4B;&#x524D;&#x7684;&#x6CA1;&#x6709;&#x53D8;&#x5316;&#x3002;</p>
<blockquote><em>Tips&#xFF1A;Last-Modified&#x4E0E;ETag&#x662F;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x4F18;&#x5148;&#x9A8C;&#x8BC1;ETag&#xFF0C;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x624D;&#x4F1A;&#x7EE7;&#x7EED;&#x6BD4;&#x5BF9;Last-Modified&#xFF0C;&#x6700;&#x540E;&#x624D;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x8FD4;&#x56DE;304&#x3002;</em></blockquote>
<h3 id="articleHeader6">Service Worker</h3>
<h4>&#x4EC0;&#x4E48;&#x662F; Service Worker</h4>
<blockquote>
<strong>Service Worker</strong> &#x672C;&#x8D28;&#x4E0A;&#x5145;&#x5F53;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E0E;&#x6D4F;&#x89C8;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x7F51;&#x7EDC;&#x53EF;&#x7528;&#x65F6;&#x4F5C;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x548C;&#x7F51;&#x7EDC;&#x95F4;&#x7684;&#x4EE3;&#x7406;&#x3002;&#x5B83;&#x4EEC;&#x65E8;&#x5728;&#xFF08;&#x9664;&#x5176;&#x4ED6;&#x4E4B;&#x5916;&#xFF09;&#x4F7F;&#x5F97;&#x80FD;&#x591F;&#x521B;&#x5EFA;&#x6709;&#x6548;&#x7684;&#x79BB;&#x7EBF;&#x4F53;&#x9A8C;&#xFF0C;&#x62E6;&#x622A;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x5E76;&#x57FA;&#x4E8E;&#x7F51;&#x7EDC;&#x662F;&#x5426;&#x53EF;&#x7528;&#x4EE5;&#x53CA;&#x66F4;&#x65B0;&#x7684;&#x8D44;&#x6E90;&#x662F;&#x5426;&#x9A7B;&#x7559;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6765;&#x91C7;&#x53D6;&#x9002;&#x5F53;&#x7684;&#x52A8;&#x4F5C;&#x3002;&#x4ED6;&#x4EEC;&#x8FD8;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x63A8;&#x9001;&#x901A;&#x77E5;&#x548C;&#x540E;&#x53F0;&#x540C;&#x6B65;API&#x3002;</blockquote>
<p><strong>Service worker</strong> &#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x76EE;&#x524D;&#x79BB;&#x7EBF;&#x5E94;&#x7528;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x505A;&#x66F4;&#x591A;&#x7684;&#x4E8B;&#x3002; <strong>Service Worker</strong> &#x53EF;&#x4EE5;&#x4F7F;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x5148;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x8D44;&#x6E90;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x79BB;&#x7EBF;&#x72B6;&#x6001;&#x65F6;&#xFF0C;&#x5728;&#x6CA1;&#x6709;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x63A5;&#x6536;&#x5230;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x524D;&#xFF0C;&#x4ECD;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x57FA;&#x672C;&#x7684;&#x529F;&#x80FD;&#xFF08;&#x4E00;&#x822C;&#x79F0;&#x4E4B;&#x4E3A; Offline First&#xFF09;&#x3002;&#x8FD9;&#x662F;&#x539F;&#x751F;APP &#x672C;&#x6765;&#x5C31;&#x652F;&#x6301;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x76F8;&#x6BD4;&#x4E8E; <code>web app</code> &#xFF0C;&#x539F;&#x751F; <code>app</code> &#x66F4;&#x53D7;&#x9752;&#x7750;&#x7684;&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x3002;</p>
<p>&#x518D;&#x6765;&#x770B;&#x770B; &#x1F440; <strong>service worker</strong> &#x80FD;&#x505A;&#x4E9B;&#x4EC0;&#x4E48;&#xFF1A;</p>
<ul>
<li>&#x540E;&#x53F0;&#x6D88;&#x606F;&#x4F20;&#x9012;</li>
<li>&#x7F51;&#x7EDC;&#x4EE3;&#x7406;&#xFF0C;&#x8F6C;&#x53D1;&#x8BF7;&#x6C42;&#xFF0C;&#x4F2A;&#x9020;&#x54CD;&#x5E94;</li>
<li>&#x79BB;&#x7EBF;&#x7F13;&#x5B58;</li>
<li>&#x6D88;&#x606F;&#x63A8;&#x9001;</li>
<li>&#x2026; &#x2026;</li>
</ul>
<blockquote><strong><em>&#x672C;&#x6587;&#x4E3B;&#x8981;&#x4EE5;&#xFF08;<a href="https://lishaoy.net" rel="nofollow noreferrer" target="_blank">lishaoy.net</a>&#xFF09;&#x8D44;&#x6E90;&#x7F13;&#x5B58;&#x4E3A;&#x4F8B;,&#x9610;&#x8FF0;&#x4E0B; service worker&#x5982;&#x4F55;&#x5DE5;&#x4F5C;</em></strong></blockquote>
<h4>&#x751F;&#x547D;&#x5468;&#x671F;</h4>
<p><strong>service worker</strong> &#x521D;&#x6B21;&#x5B89;&#x88C5;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x5982;&#x56FE; &#x1F320;</p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30da2842efb5?w=482&amp;h=543&amp;f=png&amp;s=86744" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30da2842efb5?w=482&amp;h=543&amp;f=png&amp;s=86744" alt="no-shadow" title="no-shadow" style="cursor: pointer;"></span></p>
<p>&#x4ECE;&#x4E0A; &#x1F446; &#x56FE;&#x53EF;&#x77E5;&#xFF0C;<strong>service worker</strong> &#x5DE5;&#x4F5C;&#x7684;&#x6D41;&#x7A0B;&#xFF1A;</p>
<ol>
<li>
<strong>&#x5B89;&#x88C5;&#xFF1A;</strong>  <code>service worker URL</code> &#x901A;&#x8FC7; <code>serviceWorkerContainer.register()</code> &#x6765;&#x83B7;&#x53D6;&#x548C;&#x6CE8;&#x518C;&#x3002;</li>
<li>
<strong>&#x6FC0;&#x6D3B;&#xFF1A;</strong> &#x5F53; <code>service worker</code> &#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x4F1A;&#x63A5;&#x6536;&#x5230;&#x4E00;&#x4E2A;&#x6FC0;&#x6D3B;&#x4E8B;&#x4EF6;(activate event)&#x3002; <code>onactivate</code> &#x4E3B;&#x8981;&#x7528;&#x9014;&#x662F;&#x6E05;&#x7406;&#x5148;&#x524D;&#x7248;&#x672C;&#x7684; <code>service worker</code> &#x811A;&#x672C;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x3002;</li>
<li>
<p><strong>&#x76D1;&#x542C;&#xFF1A;</strong> &#x4E24;&#x79CD;&#x72B6;&#x6001;</p>
<ul>
<li>&#x7EC8;&#x6B62;&#x4EE5;&#x8282;&#x7701;&#x5185;&#x5B58;&#xFF1B;</li>
<li>&#x76D1;&#x542C;&#x83B7;&#x53D6; <code>fetch</code> &#x548C;&#x6D88;&#x606F; <code>message</code> &#x4E8B;&#x4EF6;&#x3002;</li>
</ul>
</li>
<li>
<strong>&#x9500;&#x6BC1;&#xFF1A;</strong> &#x662F;&#x5426;&#x9500;&#x6BC1;&#x7531;&#x6D4F;&#x89C8;&#x5668;&#x51B3;&#x5B9A;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A; <code>service worker</code> &#x957F;&#x671F;&#x4E0D;&#x4F7F;&#x7528;&#x6216;&#x8005;&#x673A;&#x5668;&#x5185;&#x5B58;&#x6709;&#x9650;&#xFF0C;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x9500;&#x6BC1;&#x8FD9;&#x4E2A; <code>worker</code> &#x3002;</li>
</ol>
<blockquote><em>Tips&#xFF1A;&#x6FC0;&#x6D3B;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x5728; Chrome &#x6D4F;&#x89C8;&#x5668;&#x91CC;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE; chrome://inspect/#service-workers&#x548C; chrome://serviceworker-internals/ &#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5230;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x7684;service worker &#xFF0C;&#x5982;&#x56FE; &#x1F447;&#x3002;</em></blockquote>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30d9cb53ef09?w=1216&amp;h=650&amp;f=png&amp;s=70796" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30d9cb53ef09?w=1216&amp;h=650&amp;f=png&amp;s=70796" alt="service worker" title="service worker" style="cursor: pointer;"></span></p>
<p><strong>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5199;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50; <span style="font-weight:normal;">&#x1F330;</span> </strong></p>
<h4>&#x6CE8;&#x518C; service worker</h4>
<p>&#x8981;&#x5B89;&#x88C5; <code>service worker</code> &#xFF0C;&#x4F60;&#x9700;&#x8981;&#x5728;&#x4F60;&#x7684;&#x9875;&#x9762;&#x4E0A;&#x6CE8;&#x518C;&#x5B83;&#x3002;&#x8FD9;&#x4E2A;&#x6B65;&#x9AA4;&#x544A;&#x8BC9;&#x6D4F;&#x89C8;&#x5668;&#x4F60;&#x7684; <code>service worker</code> &#x811A;&#x672C;&#x5728;&#x54EA;&#x91CC;&#x3002;</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="if (&apos;serviceWorker&apos; in navigator) {
  navigator.serviceWorker.register(&apos;/sw.js&apos;).then(function(registration) {
    // Registration was successful
    console.log(&apos;ServiceWorker registration successful with scope: &apos;,    registration.scope);
  }).catch(function(err) {
    // registration failed :(
    console.log(&apos;ServiceWorker registration failed: &apos;, err);
  });
}" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-string">&apos;serviceWorker&apos;</span> <span class="hljs-keyword">in</span> navigator) {
  navigator.serviceWorker.register(<span class="hljs-string">&apos;/sw.js&apos;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">registration</span>) </span>{
    <span class="hljs-comment">// Registration was successful</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;ServiceWorker registration successful with scope: &apos;</span>,    registration.scope);
  }).catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
    <span class="hljs-comment">// registration failed :(</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;ServiceWorker registration failed: &apos;</span>, err);
  });
}</code></pre>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x68C0;&#x67E5; <code>service worker API</code> &#x662F;&#x5426;&#x53EF;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x7528;&#xFF0C;<code>service worker /sw.js</code> &#x88AB;&#x6CE8;&#x518C;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E2A; <code>service worker</code> &#x5DF2;&#x7ECF;&#x88AB;&#x6CE8;&#x518C;&#x8FC7;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x81EA;&#x52A8;&#x5FFD;&#x7565;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<h4>&#x6FC0;&#x6D3B; service worker</h4>
<p>&#x5728;&#x4F60;&#x7684; <code>service worker</code> &#x6CE8;&#x518C;&#x4E4B;&#x540E;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x5C1D;&#x8BD5;&#x4E3A;&#x4F60;&#x7684;&#x9875;&#x9762;&#x6216;&#x7AD9;&#x70B9;&#x5B89;&#x88C5;&#x5E76;&#x6FC0;&#x6D3B;&#x5B83;&#x3002; <br><code>install</code> &#x4E8B;&#x4EF6;&#x4F1A;&#x5728;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x89E6;&#x53D1;&#x3002;<code>install</code> &#x4E8B;&#x4EF6;&#x4E00;&#x822C;&#x662F;&#x88AB;&#x7528;&#x6765;&#x586B;&#x5145;&#x4F60;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x79BB;&#x7EBF;&#x7F13;&#x5B58;&#x80FD;&#x529B;&#x3002;&#x4F60;&#x9700;&#x8981;&#x4E3A; <code>install</code> &#x4E8B;&#x4EF6;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A; <code>callback</code> &#xFF0C;&#x5E76;&#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x6587;&#x4EF6;&#x4F60;&#x60F3;&#x8981;&#x7F13;&#x5B58;.</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="// The files we want to cache
var CACHE_NAME = &apos;my-site-cache-v1&apos;;
var urlsToCache = [
  &apos;/&apos;,
  &apos;/css/main.css&apos;,
  &apos;/js/main.js&apos;
];

self.addEventListener(&apos;install&apos;, function(event) {
  // Perform install steps
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(function(cache) {
        console.log(&apos;Opened cache&apos;);
        return cache.addAll(urlsToCache);
      })
  );
});" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">// The files we want to cache</span>
<span class="hljs-keyword">var</span> CACHE_NAME = <span class="hljs-string">&apos;my-site-cache-v1&apos;</span>;
<span class="hljs-keyword">var</span> urlsToCache = [
  <span class="hljs-string">&apos;/&apos;</span>,
  <span class="hljs-string">&apos;/css/main.css&apos;</span>,
  <span class="hljs-string">&apos;/js/main.js&apos;</span>
];

self.addEventListener(<span class="hljs-string">&apos;install&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
  <span class="hljs-comment">// Perform install steps</span>
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cache</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Opened cache&apos;</span>);
        <span class="hljs-keyword">return</span> cache.addAll(urlsToCache);
      })
  );
});</code></pre>
<p>&#x5728;&#x6211;&#x4EEC;&#x7684; <code>install callback</code> &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ul>
<li>&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;</li>
<li>&#x7F13;&#x5B58;&#x6211;&#x4EEC;&#x7684;&#x6587;&#x4EF6;</li>
<li>&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x6240;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x662F;&#x5426;&#x8981;&#x88AB;&#x7F13;&#x5B58;</li>
</ul>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7; <code>caches.open</code> &#x6253;&#x5F00;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x7684; <code>cache</code> &#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x8C03;&#x7528; <code>cache.addAll</code> &#x5E76;&#x4F20;&#x5165;&#x6211;&#x4EEC;&#x7684;&#x6587;&#x4EF6;&#x6570;&#x7EC4;&#x3002;&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x8FDE;&#x4E32; <code>promise</code> <em>&#xFF08;caches.open &#x548C; cache.addAll&#xFF09;</em> &#x5B8C;&#x6210;&#x7684;&#x3002;<code>event.waitUntil</code> &#x62FF;&#x5230;&#x4E00;&#x4E2A; <code>promise</code> &#x5E76;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x83B7;&#x5F97;&#x5B89;&#x88C5;&#x8017;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x4EE5;&#x53CA;&#x662F;&#x5426;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x3002;</p>
<h4>&#x76D1;&#x542C; service worker</h4>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5C06;&#x4F60;&#x7684;&#x7AD9;&#x70B9;&#x8D44;&#x6E90;&#x7F13;&#x5B58;&#x4E86;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x544A;&#x8BC9; <code>service worker</code> &#x8BA9;&#x5B83;&#x7528;&#x8FD9;&#x4E9B;&#x7F13;&#x5B58;&#x5185;&#x5BB9;&#x6765;&#x505A;&#x70B9;&#x4EC0;&#x4E48;&#x3002;&#x6709;&#x4E86; <code>fetch</code> &#x4E8B;&#x4EF6;&#xFF0C;&#x8FD9;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x505A;&#x5230;&#x7684;&#x3002;</p>
<p>&#x6BCF;&#x6B21;&#x4EFB;&#x4F55;&#x88AB; <code>service worker</code> &#x63A7;&#x5236;&#x7684;&#x8D44;&#x6E90;&#x88AB;&#x8BF7;&#x6C42;&#x5230;&#x65F6;&#xFF0C;&#x90FD;&#x4F1A;&#x89E6;&#x53D1; <code>fetch</code> &#x4E8B;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED9; <code>service worker</code> &#x6DFB;&#x52A0;&#x4E00;&#x4E2A; <code>fetch</code> &#x7684;&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5668;&#xFF0C;&#x63A5;&#x7740;&#x8C03;&#x7528; <code>event</code> &#x4E0A;&#x7684; <code>respondWith()</code> &#x65B9;&#x6CD5;&#x6765;&#x52AB;&#x6301;&#x6211;&#x4EEC;&#x7684; <strong>HTTP</strong> &#x54CD;&#x5E94;&#xFF0C;&#x7136;&#x540E;&#x4F60;&#x7528;&#x53EF;&#x4EE5;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x66F4;&#x65B0;&#x4ED6;&#x4EEC;&#x3002;</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="self.addEventListener(&apos;fetch&apos;, function(event) {
  event.respondWith(
    caches.match(event.request);
  );
});" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">self.addEventListener(<span class="hljs-string">&apos;fetch&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
  event.respondWith(
    caches.match(event.request);
  );
});</code></pre>
<p><code>caches.match(event.request)</code> &#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5BF9;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#x548C; <code>cache</code> &#x91CC;&#x53EF;&#x83B7;&#x53D6;&#x7684;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x5339;&#x914D;&#xFF0C;&#x67E5;&#x770B;&#x662F;&#x5426;&#x7F13;&#x5B58;&#x4E2D;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x8FD9;&#x4E2A;&#x5339;&#x914D;&#x901A;&#x8FC7; <code>url</code> &#x548C; <code>vary header</code> &#x8FDB;&#x884C;&#xFF0C;&#x5C31;&#x50CF;&#x6B63;&#x5E38;&#x7684; <strong>HTTP</strong> &#x8BF7;&#x6C42;&#x4E00;&#x6837;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#xFF0C;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x8FD4;&#x56DE; <code>request</code> &#x5462;&#xFF0C;&#x4E0B;&#x9762; &#x1F447; &#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50; &#x1F330;</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="self.addEventListener(&apos;fetch&apos;, function(event) {
  event.respondWith(
    caches.match(event.request)
      .then(function(response) {
        // Cache hit - return response
        if (response) {
          return response;
        }

        return fetch(event.request);
      }
    )
  );
});" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">self.addEventListener(<span class="hljs-string">&apos;fetch&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
  event.respondWith(
    caches.match(event.request)
      .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
        <span class="hljs-comment">// Cache hit - return response</span>
        <span class="hljs-keyword">if</span> (response) {
          <span class="hljs-keyword">return</span> response;
        }

        <span class="hljs-keyword">return</span> fetch(event.request);
      }
    )
  );
});</code></pre>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x91CC;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x4E86; <code>fetch</code> &#x4E8B;&#x4EF6;&#xFF0C;&#x5728; <code>event.respondWith</code> &#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F20;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x7531; <code>caches.match</code> &#x4EA7;&#x751F;&#x7684; <code>promise.caches.match</code> &#x67E5;&#x627E; <code>request</code> &#x4E2D;&#x88AB; <code>service worker</code> &#x7F13;&#x5B58;&#x547D;&#x4E2D;&#x7684; <code>response</code> &#x3002;<br>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4E2A;&#x547D;&#x4E2D;&#x7684; <code>response</code> &#xFF0C;&#x6211;&#x4EEC;&#x8FD4;&#x56DE;&#x88AB;&#x7F13;&#x5B58;&#x7684;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x6211;&#x4EEC;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5B9E;&#x65F6;&#x4ECE;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42; <code>fetch</code> &#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<h4>sw-toolbox</h4>
<blockquote><em>&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;<a href="https://lishaoy.net" rel="nofollow noreferrer" target="_blank">lishaoy.net</a> &#x4F7F;&#x7528;&#x4E86; <strong>sw-toolbox</strong>&#x3002;</em></blockquote>
<p><strong>sw-toolbox</strong> &#x4F7F;&#x7528;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4E0B;&#x9762; &#x1F447; &#x5C31;&#x662F; <a href="https://lishaoy.net" rel="nofollow noreferrer" target="_blank">lishaoy.net</a> &#x7684;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50; &#x1F330;</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="  &quot;serviceWorker&quot; in navigator ? navigator.serviceWorker.register(&apos;/sw.js&apos;).then(function () {
    navigator.serviceWorker.controller ? console.log(&quot;Assets cached by the controlling service worker.&quot;) : console.log(&quot;Please reload this page to allow the service worker to handle network operations.&quot;)
  }).catch(function (e) {
    console.log(&quot;ERROR: &quot; + e)
  }) : console.log(&quot;Service workers are not supported in the current browser.&quot;)" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">  <span class="hljs-string">&quot;serviceWorker&quot;</span> <span class="hljs-keyword">in</span> navigator ? navigator.serviceWorker.register(<span class="hljs-string">&apos;/sw.js&apos;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    navigator.serviceWorker.controller ? <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Assets cached by the controlling service worker.&quot;</span>) : <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Please reload this page to allow the service worker to handle network operations.&quot;</span>)
  }).catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;ERROR: &quot;</span> + e)
  }) : <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Service workers are not supported in the current browser.&quot;</span>)</code></pre>
<p>&#x4EE5;&#x4E0A;&#x662F; <strong>&#x6CE8;&#x518C;</strong> &#x4E00;&#x4E2A; <code>service woker</code></p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="&quot;use strict&quot;;
(function () {
    var cacheVersion = &quot;20180527&quot;;
    var staticImageCacheName = &quot;image&quot; + cacheVersion;
    var staticAssetsCacheName = &quot;assets&quot; + cacheVersion;
    var contentCacheName = &quot;content&quot; + cacheVersion;
    var vendorCacheName = &quot;vendor&quot; + cacheVersion;
    var maxEntries = 100;
    self.importScripts(&quot;/lib/sw-toolbox/sw-toolbox.js&quot;);
    self.toolbox.options.debug = false;
    self.toolbox.options.networkTimeoutSeconds = 3;

    self.toolbox.router.get(&quot;/images/(.*)&quot;, self.toolbox.cacheFirst, {
        cache: {
            name: staticImageCacheName,
            maxEntries: maxEntries
        }
    });

    self.toolbox.router.get(&apos;/js/(.*)&apos;, self.toolbox.cacheFirst, {
        cache: {
            name: staticAssetsCacheName,
            maxEntries: maxEntries
        }
    });
    self.toolbox.router.get(&apos;/css/(.*)&apos;, self.toolbox.cacheFirst, {
        cache: {
            name: staticAssetsCacheName,
            maxEntries: maxEntries
        }
    
    ......

    self.addEventListener(&quot;install&quot;, function (event) {
        return event.waitUntil(self.skipWaiting())
    });
    self.addEventListener(&quot;activate&quot;, function (event) {
        return event.waitUntil(self.clients.claim())
    })
})();" title="" data-original-title="&#x590D;&#x5236;"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-meta">&quot;use strict&quot;</span>;
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> cacheVersion = <span class="hljs-string">&quot;20180527&quot;</span>;
    <span class="hljs-keyword">var</span> staticImageCacheName = <span class="hljs-string">&quot;image&quot;</span> + cacheVersion;
    <span class="hljs-keyword">var</span> staticAssetsCacheName = <span class="hljs-string">&quot;assets&quot;</span> + cacheVersion;
    <span class="hljs-keyword">var</span> contentCacheName = <span class="hljs-string">&quot;content&quot;</span> + cacheVersion;
    <span class="hljs-keyword">var</span> vendorCacheName = <span class="hljs-string">&quot;vendor&quot;</span> + cacheVersion;
    <span class="hljs-keyword">var</span> maxEntries = <span class="hljs-number">100</span>;
    self.importScripts(<span class="hljs-string">&quot;/lib/sw-toolbox/sw-toolbox.js&quot;</span>);
    self.toolbox.options.debug = <span class="hljs-literal">false</span>;
    self.toolbox.options.networkTimeoutSeconds = <span class="hljs-number">3</span>;

    self.toolbox.router.get(<span class="hljs-string">&quot;/images/(.*)&quot;</span>, self.toolbox.cacheFirst, {
        <span class="hljs-attr">cache</span>: {
            <span class="hljs-attr">name</span>: staticImageCacheName,
            <span class="hljs-attr">maxEntries</span>: maxEntries
        }
    });

    self.toolbox.router.get(<span class="hljs-string">&apos;/js/(.*)&apos;</span>, self.toolbox.cacheFirst, {
        <span class="hljs-attr">cache</span>: {
            <span class="hljs-attr">name</span>: staticAssetsCacheName,
            <span class="hljs-attr">maxEntries</span>: maxEntries
        }
    });
    self.toolbox.router.get(<span class="hljs-string">&apos;/css/(.*)&apos;</span>, self.toolbox.cacheFirst, {
        <span class="hljs-attr">cache</span>: {
            <span class="hljs-attr">name</span>: staticAssetsCacheName,
            <span class="hljs-attr">maxEntries</span>: maxEntries
        }
    
    ......

    self.addEventListener(<span class="hljs-string">&quot;install&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
        <span class="hljs-keyword">return</span> event.waitUntil(self.skipWaiting())
    });
    self.addEventListener(<span class="hljs-string">&quot;activate&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
        <span class="hljs-keyword">return</span> event.waitUntil(self.clients.claim())
    })
})();</code></pre>
<p>&#x5C31;&#x8FD9;&#x6837;&#x641E;&#x5B9A;&#x4E86; &#x1F349; <em>(&#x5177;&#x4F53;&#x7684;&#x7528;&#x6CD5;&#x53EF;&#x4EE5;&#x53BB; <a href="https://googlechromelabs.github.io/sw-toolbox/api.html#main" rel="nofollow noreferrer" target="_blank">sw-toolbox</a> &#x67E5;&#x770B;)</em></p>
<p>&#x6709;&#x7684;&#x540C;&#x5B66;&#x5C31;&#x95EE;&#xFF0C;<code>service worker</code> &#x8FD9;&#x4E48;&#x597D;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#x5230;&#x5E95;&#x662F;&#x591A;&#x5927;&#xFF1F;&#x5176;&#x5B9E;&#xFF0C;&#x5728;  <strong>Chrome</strong> &#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5982;&#x56FE;</p>
<p><span class="img-wrap"><img data-src="https://cdn.lishaoy.net/webOptimize/storageQuota.png" src="https://static.alili.techhttps://cdn.lishaoy.net/webOptimize/storageQuota.png" alt="storage quota" title="storage quota" style="cursor: pointer;"></span></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5927;&#x6982;&#x6709; <strong>30G</strong> &#xFF0C;&#x6211;&#x7684;&#x7AD9;&#x70B9;&#x53EA;&#x7528;&#x4E86; <strong>183MB</strong> &#xFF0C;&#x5B8C;&#x5168;&#x591F;&#x7528;&#x4E86; &#x1F353;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x6765;&#x4E24;&#x5F20;&#x56FE; </p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30da28505a23?w=2350&amp;h=660&amp;f=png&amp;s=119502" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30da28505a23?w=2350&amp;h=660&amp;f=png&amp;s=119502" alt="from ServiceWorker" title="from ServiceWorker" style="cursor: pointer;"></span></p>
<p><span class="img-wrap"><img data-src="https://user-gold-cdn.xitu.io/2018/5/28/163a30d9a5f875d9?w=2156&amp;h=1076&amp;f=png&amp;s=222057" src="https://static.alili.techhttps://user-gold-cdn.xitu.io/2018/5/28/163a30d9a5f875d9?w=2156&amp;h=1076&amp;f=png&amp;s=222057" alt="Cache Storage" title="Cache Storage" style="cursor: pointer;"></span></p>
<p>&#x7531;&#x4E8E;&#xFF0C;&#x6587;&#x7AE0;&#x7BC7;&#x5E45;&#x8FC7;&#x957F;&#xFF0C;&#x540E;&#x7EED;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x603B;&#x7ED3; <strong>&#x67B6;&#x6784;</strong> &#x65B9;&#x9762;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x4F8B;&#x5982;</p>
<ul>
<li>bigpipe&#x5206;&#x5757;&#x8F93;&#x51FA;</li>
<li>bigrender&#x5206;&#x5757;&#x6E32;&#x67D3;</li>
<li>...</li>
</ul>
<p>&#x4EE5;&#x53CA;&#xFF0C;<strong>&#x6E32;&#x67D3;</strong> &#x65B9;&#x9762;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x4F8B;&#x5982;</p>
<ul>
<li>requestAnimationFrame</li>
<li>well-change</li>
<li>&#x786C;&#x4EF6;&#x52A0;&#x901F; GPU</li>
<li>...</li>
</ul>
<p>&#x4EE5;&#x53CA;&#xFF0C;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#xFF0C;&#x4F8B;&#x5982;</p>
<ul>
<li>PageSpeed</li>
<li>audits</li>
<li>...</li>
</ul>

                
{{< /raw >}}

# 版权声明
本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，

本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。

原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！

## 原文标题
前端性能优化 -- 从 10 多秒到 1.05 秒

## 原文链接
[https://segmentfault.com/a/1190000015052545](https://segmentfault.com/a/1190000015052545)


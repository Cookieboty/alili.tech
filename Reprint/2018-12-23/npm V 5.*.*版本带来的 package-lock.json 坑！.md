---
title: 'npm V 5.*.*版本带来的 package-lock.json 坑！' 
date: 2018-12-23 2:30:07
hidden: true
slug: f2nq77jpptq
categories: [reprint]
---

{{< raw >}}

                    
<p><strong>webpack  V3.9.1</strong></p>
<p>1、Node.js升级到 v8.9.1 后，自带的 npm 也升级到了5.5.1，阐述下 npm 5 的一些大的变化：</p>
<ul>
<li>安装模块时（即改变 node_modules文件夹内容）会生成 或 更新 package-lock.json 文件。</li>
<li>发布的模块不会包含 package-lock.json 文件，如果手动修改了 package.json 文件中已有模块的版本，直接执行npm install不会安装新指定的版本，只能通过npm install xxx@yy更新。</li>
</ul>
<blockquote>注意：重新安装模块之所以快，是因为 package-lock.json 文件中已经记录了整个 node_modules 文件夹的树状结构，甚至连模块的下载地址都记录了，再重新安装的时候只需要直接下载文件即可（貌似和 facebook 的 yarn 好像没啥区别）。</blockquote>
<p>2、npm挖的大坑 ！！！</p>
<p>（1）、npm升级后带来了一个很大的坑：以后直接改 package.json 文件相应模块的版本号，再执行npm install不会更新了，你只能手动用npm install xxx@yy指定版本号来安装，然后它会自动更新 package-lock.json 文件。</p>
<p>（2）、直接执行npm install时，如果不存在 package-lock.json 文件，它会根据安装模块后的 node_modules 目录结构来创建；如果已经存在 package-lock.json 文件，则它只会根据 package-lock.json 文件指定的结构来下载模块，并不会理会 package.json 文件。</p>

                
{{< /raw >}}

# 版权声明
本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，

本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。

原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！

## 原文标题
npm V 5.*.*版本带来的 package-lock.json 坑！

## 原文链接
[https://segmentfault.com/a/1190000012282215](https://segmentfault.com/a/1190000012282215)


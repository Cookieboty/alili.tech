---
title: '分享前端开发常用代码片段-值得收藏' 
date: 2018-12-02 2:30:15
hidden: true
slug: 7wtbzc6vwm4
categories: [reprint]
---

{{< raw >}}

                    
<h2 id="articleHeader0">一、预加载图像</h2>
<p>如果你的网页中需要使用大量初始不可见的（例如，悬停的）图像，那么可以预加载这些图像。</p>
<p><span class="img-wrap"><img data-src="/img/bV9GOl?w=630&amp;h=179" src="https://static.alili.tech/img/bV9GOl?w=630&amp;h=179" alt="预加载图像" title="预加载图像" style="cursor: pointer; display: inline;"></span></p>
<h2 id="articleHeader1">二、检查图像是否加载</h2>
<p>有时为了继续脚本，你可能需要检查图像是否全部加载完毕。</p>
<p><span class="img-wrap"><img data-src="/img/bV9GOp?w=461&amp;h=77" src="https://static.alili.tech/img/bV9GOp?w=461&amp;h=77" alt="检查图像是否加载" title="检查图像是否加载" style="cursor: pointer; display: inline;"></span></p>
<p>你也可以使用 ID 或 CLASS 替换 &lt;img&gt;标签来检查某个特定的图像是否被加载。</p>
<h2 id="articleHeader2">三、自动修复破坏的图像</h2>
<p>逐个替换已经破坏的图像链接是非常痛苦的。不过，下面这段简单的代码可以帮助你。</p>
<p><span class="img-wrap"><img data-src="/img/bV9GOJ?w=787&amp;h=127" src="https://static.alili.tech/img/bV9GOJ?w=787&amp;h=127" alt="自动修复破坏的图像" title="自动修复破坏的图像" style="cursor: pointer; display: inline;"></span></p>
<h2 id="articleHeader3">四、悬停切换</h2>
<p>当用户鼠标悬停在可点击的元素上时，可添加类到元素中，反之则移除类。</p>
<p><span class="img-wrap"><img data-src="/img/bV9LXp?w=370&amp;h=129" src="https://static.alili.tech/img/bV9LXp?w=370&amp;h=129" alt="悬停切换" title="悬停切换" style="cursor: pointer; display: inline;"></span></p>
<p>只需要添加必要的 CSS 即可。更简单的方法是使用 <strong>toggleClass()</strong> 方法。</p>
<p><span class="img-wrap"><img data-src="/img/bV9MaN?w=367&amp;h=78" src="https://static.alili.tech/img/bV9MaN?w=367&amp;h=78" alt="悬停切换" title="悬停切换" style="cursor: pointer;"></span></p>
<h2 id="articleHeader4">五、淡入淡出/显示隐藏</h2>
<p><span class="img-wrap"><img data-src="/img/bV9M2B?w=380&amp;h=201" src="https://static.alili.tech/img/bV9M2B?w=380&amp;h=201" alt="淡入淡出/显示隐藏" title="淡入淡出/显示隐藏" style="cursor: pointer;"></span></p>
<h2 id="articleHeader5">六、鼠标滚轮</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="$('#content').on(&quot;mousewheel DOMMouseScroll&quot;, function (event) { 
    // chrome &amp; ie || // firefox
    var delta = (event.originalEvent.wheelDelta &amp;&amp; (event.originalEvent.wheelDelta > 0 ? 1 : -1)) || 
        (event.originalEvent.detail &amp;&amp; (event.originalEvent.detail > 0 ? -1 : 1));  
    
    if (delta > 0) { 
        console.log('mousewheel top');
    } else if (delta < 0) {
        console.log('mousewheel bottom');
    } 
});" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">$(<span class="hljs-string">'#content'</span>).on(<span class="hljs-string">"mousewheel DOMMouseScroll"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{ 
    <span class="hljs-comment">// chrome &amp; ie || // firefox</span>
    <span class="hljs-keyword">var</span> delta = (event.originalEvent.wheelDelta &amp;&amp; (event.originalEvent.wheelDelta &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>)) || 
        (event.originalEvent.detail &amp;&amp; (event.originalEvent.detail &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>));  
    
    <span class="hljs-keyword">if</span> (delta &gt; <span class="hljs-number">0</span>) { 
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'mousewheel top'</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (delta &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'mousewheel bottom'</span>);
    } 
});</code></pre>
<h2 id="articleHeader6">七、鼠标坐标</h2>
<h3 id="articleHeader7">1、JavaScript实现</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="X:<input id=&quot;xxx&quot; type=&quot;text&quot; /> Y:<input id=&quot;yyy&quot; type=&quot;text&quot; />" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;">X:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"xxx"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span> Y:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"yyy"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function mousePosition(ev){
    if(ev.pageX || ev.pageY){
        return {x:ev.pageX, y:ev.pageY};
    }
    return {
        x:ev.clientX + document.body.scrollLeft - document.body.clientLeft,
        y:ev.clientY + document.body.scrollTop - document.body.clientTop
    };
}

function mouseMove(ev){
    ev = ev || window.event;
    
    var mousePos = mousePosition(ev);
    
    document.getElementById('xxx').value = mousePos.x;
    document.getElementById('yyy').value = mousePos.y;
}
document.onmousemove = mouseMove;" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mousePosition</span>(<span class="hljs-params">ev</span>)</span>{
    <span class="hljs-keyword">if</span>(ev.pageX || ev.pageY){
        <span class="hljs-keyword">return</span> {<span class="hljs-attr">x</span>:ev.pageX, <span class="hljs-attr">y</span>:ev.pageY};
    }
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">x</span>:ev.clientX + <span class="hljs-built_in">document</span>.body.scrollLeft - <span class="hljs-built_in">document</span>.body.clientLeft,
        <span class="hljs-attr">y</span>:ev.clientY + <span class="hljs-built_in">document</span>.body.scrollTop - <span class="hljs-built_in">document</span>.body.clientTop
    };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mouseMove</span>(<span class="hljs-params">ev</span>)</span>{
    ev = ev || <span class="hljs-built_in">window</span>.event;
    
    <span class="hljs-keyword">var</span> mousePos = mousePosition(ev);
    
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'xxx'</span>).value = mousePos.x;
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'yyy'</span>).value = mousePos.y;
}
<span class="hljs-built_in">document</span>.onmousemove = mouseMove;</code></pre>
<h3 id="articleHeader8">2、jQuery实现</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="$('#ele').click(function(event){
    //获取鼠标在图片上的坐标 
    console.log('X：' + event.offsetX+'\n Y:' + event.offsetY); 
    
    //获取元素相对于页面的坐标 
    console.log('X：'+$(this).offset().left+'\n Y:'+$(this).offset().top);
});" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">$(<span class="hljs-string">'#ele'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
    <span class="hljs-comment">//获取鼠标在图片上的坐标 </span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'X：'</span> + event.offsetX+<span class="hljs-string">'\n Y:'</span> + event.offsetY); 
    
    <span class="hljs-comment">//获取元素相对于页面的坐标 </span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'X：'</span>+$(<span class="hljs-keyword">this</span>).offset().left+<span class="hljs-string">'\n Y:'</span>+$(<span class="hljs-keyword">this</span>).offset().top);
});</code></pre>
<h2 id="articleHeader9">八、禁止移动端浏览器页面滚动</h2>
<h3 id="articleHeader10">1、HTML实现</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<body ontouchmove=&quot;event.preventDefault()&quot; >" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">ontouchmove</span>=<span class="hljs-string">"event.preventDefault()"</span> &gt;</span></code></pre>
<h3 id="articleHeader11">2、JavaScript实现</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="document.addEventListener('touchmove', function(event) {
    event.preventDefault();
});" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'touchmove'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
    event.preventDefault();
});</code></pre>
<h2 id="articleHeader12">九、阻止默认行为</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="// JavaScript
document.getElementById('btn').addEventListener('click', function (event) {
    event = event || window.event；

    if (event.preventDefault){
        // W3C
        event.preventDefault();
    } else{
        // IE
        event.returnValue = false;
    }
}, false);

// jQuery
$('#btn').on('click', function (event) {
    event.preventDefault();
});" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'btn'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
    event = event || <span class="hljs-built_in">window</span>.event；

    <span class="hljs-keyword">if</span> (event.preventDefault){
        <span class="hljs-comment">// W3C</span>
        event.preventDefault();
    } <span class="hljs-keyword">else</span>{
        <span class="hljs-comment">// IE</span>
        event.returnValue = <span class="hljs-literal">false</span>;
    }
}, <span class="hljs-literal">false</span>);

<span class="hljs-comment">// jQuery</span>
$(<span class="hljs-string">'#btn'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
    event.preventDefault();
});</code></pre>
<h2 id="articleHeader13">十、阻止冒泡</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="// JavaScript
document.getElementById('btn').addEventListener('click', function (event) {
    event = event || window.event；

    if (event.stopPropagation){
        // W3C
        event.stopPropagation();
    } else{
        // IE
        event.cancelBubble = true;
    }
}, false);

// jQuery
$('#btn').on('click', function (event) {
    event.stopPropagation();
});" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'btn'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
    event = event || <span class="hljs-built_in">window</span>.event；

    <span class="hljs-keyword">if</span> (event.stopPropagation){
        <span class="hljs-comment">// W3C</span>
        event.stopPropagation();
    } <span class="hljs-keyword">else</span>{
        <span class="hljs-comment">// IE</span>
        event.cancelBubble = <span class="hljs-literal">true</span>;
    }
}, <span class="hljs-literal">false</span>);

<span class="hljs-comment">// jQuery</span>
$(<span class="hljs-string">'#btn'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
    event.stopPropagation();
});</code></pre>
<h2 id="articleHeader14">十一、检测浏览器是否支持svg</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function isSupportSVG() { 
    var SVG_NS = 'http://www.w3.org/2000/svg';
    return !!document.createElementNS &amp;&amp;!!document.createElementNS(SVG_NS, 'svg').createSVGRect; 
} 

console.log(isSupportSVG());" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSupportSVG</span>(<span class="hljs-params"></span>) </span>{ 
    <span class="hljs-keyword">var</span> SVG_NS = <span class="hljs-string">'http://www.w3.org/2000/svg'</span>;
    <span class="hljs-keyword">return</span> !!<span class="hljs-built_in">document</span>.createElementNS &amp;&amp;!!<span class="hljs-built_in">document</span>.createElementNS(SVG_NS, <span class="hljs-string">'svg'</span>).createSVGRect; 
} 

<span class="hljs-built_in">console</span>.log(isSupportSVG());</code></pre>
<h2 id="articleHeader15">十二、检测浏览器是否支持canvas</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function isSupportCanvas() {
    if(document.createElement('canvas').getContext){
        return true;
    }else{
        return false;
    }
}

console.log(isSupportCanvas());" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSupportCanvas</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'canvas'</span>).getContext){
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}

<span class="hljs-built_in">console</span>.log(isSupportCanvas());</code></pre>
<h2 id="articleHeader16">十三、检测是否是微信浏览器</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function isWeiXinClient() {
    var ua = navigator.userAgent.toLowerCase(); 
    if (ua.match(/MicroMessenger/i)==&quot;micromessenger&quot;) { 
        return true; 
    } else { 
        return false; 
    }
}

alert(isWeiXinClient());" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isWeiXinClient</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> ua = navigator.userAgent.toLowerCase(); 
    <span class="hljs-keyword">if</span> (ua.match(<span class="hljs-regexp">/MicroMessenger/i</span>)==<span class="hljs-string">"micromessenger"</span>) { 
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; 
    } <span class="hljs-keyword">else</span> { 
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; 
    }
}

alert(isWeiXinClient());</code></pre>
<h2 id="articleHeader17">十四、检测是否移动端及浏览器内核</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="var browser = { 
    versions: function() { 
        var u = navigator.userAgent; 
        return { 
            trident: u.indexOf('Trident') > -1, //IE内核 
            presto: u.indexOf('Presto') > -1, //opera内核 
            webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核 
            gecko: u.indexOf('Firefox') > -1, //火狐内核Gecko 
            mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否移动终端 
            ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios 
            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android 
            iPhone: u.indexOf('iPhone') > -1 , //iPhone 
            iPad: u.indexOf('iPad') > -1, //iPad 
            webApp: u.indexOf('Safari') > -1 //Safari 
        }; 
    }
} 

if (browser.versions.mobile() || browser.versions.ios() || browser.versions.android() || browser.versions.iPhone() || browser.versions.iPad()) { 
    alert('移动端'); 
}" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-keyword">var</span> browser = { 
    <span class="hljs-attr">versions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ 
        <span class="hljs-keyword">var</span> u = navigator.userAgent; 
        <span class="hljs-keyword">return</span> { 
            <span class="hljs-attr">trident</span>: u.indexOf(<span class="hljs-string">'Trident'</span>) &gt; <span class="hljs-number">-1</span>, <span class="hljs-comment">//IE内核 </span>
            presto: u.indexOf(<span class="hljs-string">'Presto'</span>) &gt; <span class="hljs-number">-1</span>, <span class="hljs-comment">//opera内核 </span>
            webKit: u.indexOf(<span class="hljs-string">'AppleWebKit'</span>) &gt; <span class="hljs-number">-1</span>, <span class="hljs-comment">//苹果、谷歌内核 </span>
            gecko: u.indexOf(<span class="hljs-string">'Firefox'</span>) &gt; <span class="hljs-number">-1</span>, <span class="hljs-comment">//火狐内核Gecko </span>
            mobile: !!u.match(<span class="hljs-regexp">/AppleWebKit.*Mobile.*/</span>), <span class="hljs-comment">//是否移动终端 </span>
            ios: !!u.match(<span class="hljs-regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>), <span class="hljs-comment">//ios </span>
            android: u.indexOf(<span class="hljs-string">'Android'</span>) &gt; <span class="hljs-number">-1</span> || u.indexOf(<span class="hljs-string">'Linux'</span>) &gt; <span class="hljs-number">-1</span>, <span class="hljs-comment">//android </span>
            iPhone: u.indexOf(<span class="hljs-string">'iPhone'</span>) &gt; <span class="hljs-number">-1</span> , <span class="hljs-comment">//iPhone </span>
            iPad: u.indexOf(<span class="hljs-string">'iPad'</span>) &gt; <span class="hljs-number">-1</span>, <span class="hljs-comment">//iPad </span>
            webApp: u.indexOf(<span class="hljs-string">'Safari'</span>) &gt; <span class="hljs-number">-1</span> <span class="hljs-comment">//Safari </span>
        }; 
    }
} 

<span class="hljs-keyword">if</span> (browser.versions.mobile() || browser.versions.ios() || browser.versions.android() || browser.versions.iPhone() || browser.versions.iPad()) { 
    alert(<span class="hljs-string">'移动端'</span>); 
}</code></pre>
<h2 id="articleHeader18">十五、检测是否电脑端/移动端</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="var browser={ 
    versions:function(){
        var u = navigator.userAgent, app = navigator.appVersion;
        var sUserAgent = navigator.userAgent;
        return {
        trident: u.indexOf('Trident') > -1,
        presto: u.indexOf('Presto') > -1, 
        isChrome: u.indexOf(&quot;chrome&quot;) > -1, 
        isSafari: !u.indexOf(&quot;chrome&quot;) > -1 &amp;&amp; (/webkit|khtml/).test(u),
        isSafari3: !u.indexOf(&quot;chrome&quot;) > -1 &amp;&amp; (/webkit|khtml/).test(u) &amp;&amp; u.indexOf('webkit/5') != -1,
        webKit: u.indexOf('AppleWebKit') > -1, 
        gecko: u.indexOf('Gecko') > -1 &amp;&amp; u.indexOf('KHTML') == -1,
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), 
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), 
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1,
        iPhone: u.indexOf('iPhone') > -1, 
        iPad: u.indexOf('iPad') > -1,
        iWinPhone: u.indexOf('Windows Phone') > -1
        };
    }()
}
if(browser.versions.mobile || browser.versions.iWinPhone){
    window.location = &quot;http:/www.baidu.com/m/&quot;;
} " title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-keyword">var</span> browser={ 
    <span class="hljs-attr">versions</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">var</span> u = navigator.userAgent, app = navigator.appVersion;
        <span class="hljs-keyword">var</span> sUserAgent = navigator.userAgent;
        <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">trident</span>: u.indexOf(<span class="hljs-string">'Trident'</span>) &gt; <span class="hljs-number">-1</span>,
        <span class="hljs-attr">presto</span>: u.indexOf(<span class="hljs-string">'Presto'</span>) &gt; <span class="hljs-number">-1</span>, 
        <span class="hljs-attr">isChrome</span>: u.indexOf(<span class="hljs-string">"chrome"</span>) &gt; <span class="hljs-number">-1</span>, 
        <span class="hljs-attr">isSafari</span>: !u.indexOf(<span class="hljs-string">"chrome"</span>) &gt; <span class="hljs-number">-1</span> &amp;&amp; (<span class="hljs-regexp">/webkit|khtml/</span>).test(u),
        <span class="hljs-attr">isSafari3</span>: !u.indexOf(<span class="hljs-string">"chrome"</span>) &gt; <span class="hljs-number">-1</span> &amp;&amp; (<span class="hljs-regexp">/webkit|khtml/</span>).test(u) &amp;&amp; u.indexOf(<span class="hljs-string">'webkit/5'</span>) != <span class="hljs-number">-1</span>,
        <span class="hljs-attr">webKit</span>: u.indexOf(<span class="hljs-string">'AppleWebKit'</span>) &gt; <span class="hljs-number">-1</span>, 
        <span class="hljs-attr">gecko</span>: u.indexOf(<span class="hljs-string">'Gecko'</span>) &gt; <span class="hljs-number">-1</span> &amp;&amp; u.indexOf(<span class="hljs-string">'KHTML'</span>) == <span class="hljs-number">-1</span>,
        <span class="hljs-attr">mobile</span>: !!u.match(<span class="hljs-regexp">/AppleWebKit.*Mobile.*/</span>), 
        <span class="hljs-attr">ios</span>: !!u.match(<span class="hljs-regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>), 
        <span class="hljs-attr">android</span>: u.indexOf(<span class="hljs-string">'Android'</span>) &gt; <span class="hljs-number">-1</span> || u.indexOf(<span class="hljs-string">'Linux'</span>) &gt; <span class="hljs-number">-1</span>,
        <span class="hljs-attr">iPhone</span>: u.indexOf(<span class="hljs-string">'iPhone'</span>) &gt; <span class="hljs-number">-1</span>, 
        <span class="hljs-attr">iPad</span>: u.indexOf(<span class="hljs-string">'iPad'</span>) &gt; <span class="hljs-number">-1</span>,
        <span class="hljs-attr">iWinPhone</span>: u.indexOf(<span class="hljs-string">'Windows Phone'</span>) &gt; <span class="hljs-number">-1</span>
        };
    }()
}
<span class="hljs-keyword">if</span>(browser.versions.mobile || browser.versions.iWinPhone){
    <span class="hljs-built_in">window</span>.location = <span class="hljs-string">"http:/www.baidu.com/m/"</span>;
} </code></pre>
<h2 id="articleHeader19">十六、检测浏览器内核</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function getInternet(){    
    if(navigator.userAgent.indexOf(&quot;MSIE&quot;)>0) {    
      return &quot;MSIE&quot;;       //IE浏览器  
    }  

    if(isFirefox=navigator.userAgent.indexOf(&quot;Firefox&quot;)>0){    
      return &quot;Firefox&quot;;     //Firefox浏览器  
    }  

    if(isSafari=navigator.userAgent.indexOf(&quot;Safari&quot;)>0) {    
      return &quot;Safari&quot;;      //Safan浏览器  
    }  

    if(isCamino=navigator.userAgent.indexOf(&quot;Camino&quot;)>0){    
      return &quot;Camino&quot;;   //Camino浏览器  
    }  
    if(isMozilla=navigator.userAgent.indexOf(&quot;Gecko/&quot;)>0){    
      return &quot;Gecko&quot;;    //Gecko浏览器  
    }    
} " title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getInternet</span>(<span class="hljs-params"></span>)</span>{    
    <span class="hljs-keyword">if</span>(navigator.userAgent.indexOf(<span class="hljs-string">"MSIE"</span>)&gt;<span class="hljs-number">0</span>) {    
      <span class="hljs-keyword">return</span> <span class="hljs-string">"MSIE"</span>;       <span class="hljs-comment">//IE浏览器  </span>
    }  

    <span class="hljs-keyword">if</span>(isFirefox=navigator.userAgent.indexOf(<span class="hljs-string">"Firefox"</span>)&gt;<span class="hljs-number">0</span>){    
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Firefox"</span>;     <span class="hljs-comment">//Firefox浏览器  </span>
    }  

    <span class="hljs-keyword">if</span>(isSafari=navigator.userAgent.indexOf(<span class="hljs-string">"Safari"</span>)&gt;<span class="hljs-number">0</span>) {    
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Safari"</span>;      <span class="hljs-comment">//Safan浏览器  </span>
    }  

    <span class="hljs-keyword">if</span>(isCamino=navigator.userAgent.indexOf(<span class="hljs-string">"Camino"</span>)&gt;<span class="hljs-number">0</span>){    
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Camino"</span>;   <span class="hljs-comment">//Camino浏览器  </span>
    }  
    <span class="hljs-keyword">if</span>(isMozilla=navigator.userAgent.indexOf(<span class="hljs-string">"Gecko/"</span>)&gt;<span class="hljs-number">0</span>){    
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Gecko"</span>;    <span class="hljs-comment">//Gecko浏览器  </span>
    }    
} </code></pre>
<h2 id="articleHeader20">十七、强制移动端页面横屏显示</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="$( window ).on( &quot;orientationchange&quot;, function( event ) {
    if (event.orientation=='portrait') {
        $('body').css('transform', 'rotate(90deg)');
    } else {
        $('body').css('transform', 'rotate(0deg)');
    }
});
$( window ).orientationchange();" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">$( <span class="hljs-built_in">window</span> ).on( <span class="hljs-string">"orientationchange"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
    <span class="hljs-keyword">if</span> (event.orientation==<span class="hljs-string">'portrait'</span>) {
        $(<span class="hljs-string">'body'</span>).css(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'rotate(90deg)'</span>);
    } <span class="hljs-keyword">else</span> {
        $(<span class="hljs-string">'body'</span>).css(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'rotate(0deg)'</span>);
    }
});
$( <span class="hljs-built_in">window</span> ).orientationchange();</code></pre>
<h2 id="articleHeader21">十八、电脑端页面全屏显示</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function fullscreen(element) {
    if (element.requestFullscreen) {
        element.requestFullscreen();
    } else if (element.mozRequestFullScreen) {
        element.mozRequestFullScreen();
    } else if (element.webkitRequestFullscreen) {
        element.webkitRequestFullscreen();
    } else if (element.msRequestFullscreen) {
        element.msRequestFullscreen();
    }
}

fullscreen(document.documentElement);" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fullscreen</span>(<span class="hljs-params">element</span>) </span>{
    <span class="hljs-keyword">if</span> (element.requestFullscreen) {
        element.requestFullscreen();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (element.mozRequestFullScreen) {
        element.mozRequestFullScreen();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (element.webkitRequestFullscreen) {
        element.webkitRequestFullscreen();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (element.msRequestFullscreen) {
        element.msRequestFullscreen();
    }
}

fullscreen(<span class="hljs-built_in">document</span>.documentElement);</code></pre>
<h2 id="articleHeader22">十九、获得/失去焦点</h2>
<h3 id="articleHeader23">1、JavaScript实现</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<input id=&quot;i_input&quot; type=&quot;text&quot; value='会员卡号/手机号'/>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"i_input"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">'会员卡号/手机号'</span>/&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="// JavaScript
window.onload = function(){
    var oIpt = document.getElementById(&quot;i_input&quot;);

    if(oIpt.value == &quot;会员卡号/手机号&quot;){
        oIpt.style.color = &quot;#888&quot;;
    }else{
        oIpt.style.color = &quot;#000&quot;;
    };

    oIpt.onfocus = function(){
        if(this.value == &quot;会员卡号/手机号&quot;){
            this.value=&quot;&quot;;
            this.style.color = &quot;#000&quot;;
            this.type = &quot;password&quot;;
        }else{
            this.style.color = &quot;#000&quot;;
        }
    };
    
    oIpt.onblur = function(){
        if(this.value == &quot;&quot;){
            this.value=&quot;会员卡号/手机号&quot;;
            this.style.color = &quot;#888&quot;;
            this.type = &quot;text&quot;;
        }
    };
}" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> oIpt = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"i_input"</span>);

    <span class="hljs-keyword">if</span>(oIpt.value == <span class="hljs-string">"会员卡号/手机号"</span>){
        oIpt.style.color = <span class="hljs-string">"#888"</span>;
    }<span class="hljs-keyword">else</span>{
        oIpt.style.color = <span class="hljs-string">"#000"</span>;
    };

    oIpt.onfocus = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.value == <span class="hljs-string">"会员卡号/手机号"</span>){
            <span class="hljs-keyword">this</span>.value=<span class="hljs-string">""</span>;
            <span class="hljs-keyword">this</span>.style.color = <span class="hljs-string">"#000"</span>;
            <span class="hljs-keyword">this</span>.type = <span class="hljs-string">"password"</span>;
        }<span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">this</span>.style.color = <span class="hljs-string">"#000"</span>;
        }
    };
    
    oIpt.onblur = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.value == <span class="hljs-string">""</span>){
            <span class="hljs-keyword">this</span>.value=<span class="hljs-string">"会员卡号/手机号"</span>;
            <span class="hljs-keyword">this</span>.style.color = <span class="hljs-string">"#888"</span>;
            <span class="hljs-keyword">this</span>.type = <span class="hljs-string">"text"</span>;
        }
    };
}</code></pre>
<hr>
<h3 id="articleHeader24">2、jQuery实现</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<input type=&quot;text&quot;  class=&quot;oldpsw&quot; id=&quot;showPwd&quot; value=&quot;请输入您的注册密码&quot;/>
<input type=&quot;password&quot; name=&quot;psw&quot; class=&quot;oldpsw&quot; id=&quot;password&quot; value=&quot;&quot; style=&quot;display:none;&quot;/>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">"oldpsw"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"showPwd"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"请输入您的注册密码"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"psw"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"oldpsw"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:none;"</span>/&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="// jQuery
$(&quot;#showPwd&quot;).focus(function() {
    var text_value=$(this).val();
    if (text_value =='请输入您的注册密码') {
        $(&quot;#showPwd&quot;).hide();
        $(&quot;#password&quot;).show().focus();
    }
});
$(&quot;#password&quot;).blur(function() {
    var text_value = $(this).val();
    if (text_value == &quot;&quot;) {
        $(&quot;#showPwd&quot;).show();
        $(&quot;#password&quot;).hide();
    }
}); " title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">// jQuery</span>
$(<span class="hljs-string">"#showPwd"</span>).focus(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> text_value=$(<span class="hljs-keyword">this</span>).val();
    <span class="hljs-keyword">if</span> (text_value ==<span class="hljs-string">'请输入您的注册密码'</span>) {
        $(<span class="hljs-string">"#showPwd"</span>).hide();
        $(<span class="hljs-string">"#password"</span>).show().focus();
    }
});
$(<span class="hljs-string">"#password"</span>).blur(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> text_value = $(<span class="hljs-keyword">this</span>).val();
    <span class="hljs-keyword">if</span> (text_value == <span class="hljs-string">""</span>) {
        $(<span class="hljs-string">"#showPwd"</span>).show();
        $(<span class="hljs-string">"#password"</span>).hide();
    }
}); </code></pre>
<h2 id="articleHeader25">二十、获取上传文件大小</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<input type=&quot;file&quot; id=&quot;filePath&quot; onchange=&quot;getFileSize(this)&quot;/>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"filePath"</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">"getFileSize(this)"</span>/&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="// 兼容IE9低版本
function getFileSize(obj){
    var filesize;
    
    if(obj.files){
        filesize = obj.files[0].size;
    }else{
        try{
            var path,fso; 
            path = document.getElementById('filePath').value;
            fso = new ActiveXObject(&quot;Scripting.FileSystemObject&quot;); 
            filesize = fso.GetFile(path).size; 
        }
        catch(e){
            // 在IE9及低版本浏览器，如果不容许ActiveX控件与页面交互，点击了否，就无法获取size
            console.log(e.message); // Automation 服务器不能创建对象
            filesize = 'error'; // 无法获取
        }
    }
    return filesize;
}" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">// 兼容IE9低版本</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFileSize</span>(<span class="hljs-params">obj</span>)</span>{
    <span class="hljs-keyword">var</span> filesize;
    
    <span class="hljs-keyword">if</span>(obj.files){
        filesize = obj.files[<span class="hljs-number">0</span>].size;
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-keyword">try</span>{
            <span class="hljs-keyword">var</span> path,fso; 
            path = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'filePath'</span>).value;
            fso = <span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">"Scripting.FileSystemObject"</span>); 
            filesize = fso.GetFile(path).size; 
        }
        <span class="hljs-keyword">catch</span>(e){
            <span class="hljs-comment">// 在IE9及低版本浏览器，如果不容许ActiveX控件与页面交互，点击了否，就无法获取size</span>
            <span class="hljs-built_in">console</span>.log(e.message); <span class="hljs-comment">// Automation 服务器不能创建对象</span>
            filesize = <span class="hljs-string">'error'</span>; <span class="hljs-comment">// 无法获取</span>
        }
    }
    <span class="hljs-keyword">return</span> filesize;
}</code></pre>
<h2 id="articleHeader26">二十一、限制上传文件类型</h2>
<h3 id="articleHeader27">1、高版本浏览器</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<input type=&quot;file&quot; name=&quot;filePath&quot; accept=&quot;.jpg,.jpeg,.doc,.docxs,.pdf&quot;>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"filePath"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">".jpg,.jpeg,.doc,.docxs,.pdf"</span>&gt;</span></code></pre>
<h3 id="articleHeader28">2、限制图片</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<input type=&quot;file&quot; class=&quot;file&quot; value=&quot;上传&quot; accept=&quot;image/*&quot;/>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"上传"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*"</span>/&gt;</span></code></pre>
<h3 id="articleHeader29">3、低版本浏览器</h3>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<input type=&quot;file&quot; id=&quot;filePath&quot; onchange=&quot;limitTypes()&quot;/>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"filePath"</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">"limitTypes()"</span>/&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="/* 通过扩展名，检验文件格式。
 * @parma filePath{string} 文件路径
 * @parma acceptFormat{Array} 允许的文件类型
 * @result 返回值{Boolen}：true or false
 */

function checkFormat(filePath,acceptFormat){
    var resultBool= false,
        ex = filePath.substring(filePath.lastIndexOf('.') + 1);
        ex = ex.toLowerCase();
        
    for(var i = 0; i < acceptFormat.length; i++){
    　　if(acceptFormat[i] == ex){
            resultBool = true;
            break;
    　　}
    }
    return resultBool;
};
        
function limitTypes(){
    var obj = document.getElementById('filePath');
    var path = obj.value;
    var result = checkFormat(path,['bmp','jpg','jpeg','png']);
    
    if(!result){
        alert('上传类型错误，请重新上传');
        obj.value = '';
    }
}" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">/* 通过扩展名，检验文件格式。
 * @parma filePath{string} 文件路径
 * @parma acceptFormat{Array} 允许的文件类型
 * @result 返回值{Boolen}：true or false
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkFormat</span>(<span class="hljs-params">filePath,acceptFormat</span>)</span>{
    <span class="hljs-keyword">var</span> resultBool= <span class="hljs-literal">false</span>,
        ex = filePath.substring(filePath.lastIndexOf(<span class="hljs-string">'.'</span>) + <span class="hljs-number">1</span>);
        ex = ex.toLowerCase();
        
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; acceptFormat.length; i++){
    　　<span class="hljs-keyword">if</span>(acceptFormat[i] == ex){
            resultBool = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">break</span>;
    　　}
    }
    <span class="hljs-keyword">return</span> resultBool;
};
        
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">limitTypes</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> obj = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'filePath'</span>);
    <span class="hljs-keyword">var</span> path = obj.value;
    <span class="hljs-keyword">var</span> result = checkFormat(path,[<span class="hljs-string">'bmp'</span>,<span class="hljs-string">'jpg'</span>,<span class="hljs-string">'jpeg'</span>,<span class="hljs-string">'png'</span>]);
    
    <span class="hljs-keyword">if</span>(!result){
        alert(<span class="hljs-string">'上传类型错误，请重新上传'</span>);
        obj.value = <span class="hljs-string">''</span>;
    }
}</code></pre>
<h2 id="articleHeader30">二十二、正则表达式</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="//验证邮箱 
/^\w+@([0-9a-zA-Z]+[.])+[a-z]{2,4}$/ 

//验证手机号 
/^1[3|5|8|7]\d{9}$/ 

//验证URL 
/^http:\/\/.+\./

//验证身份证号码 
/(^\d{15}$)|(^\d{17}([0-9]|X|x)$)/ 

//匹配字母、数字、中文字符 
/^([A-Za-z0-9]|[\u4e00-\u9fa5])*$/ 

//匹配中文字符
/[\u4e00-\u9fa5]/ 

//匹配双字节字符(包括汉字) 
/[^\x00-\xff]/" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">//验证邮箱 </span>
/^\w+@([<span class="hljs-number">0</span><span class="hljs-number">-9</span>a-zA-Z]+[.])+[a-z]{<span class="hljs-number">2</span>,<span class="hljs-number">4</span>}$/ 

<span class="hljs-comment">//验证手机号 </span>
/^<span class="hljs-number">1</span>[<span class="hljs-number">3</span>|<span class="hljs-number">5</span>|<span class="hljs-number">8</span>|<span class="hljs-number">7</span>]\d{<span class="hljs-number">9</span>}$/ 

<span class="hljs-comment">//验证URL </span>
/^http:\/\/.+\./

<span class="hljs-comment">//验证身份证号码 </span>
/(^\d{<span class="hljs-number">15</span>}$)|(^\d{<span class="hljs-number">17</span>}([<span class="hljs-number">0</span><span class="hljs-number">-9</span>]|X|x)$)/ 

<span class="hljs-comment">//匹配字母、数字、中文字符 </span>
/^([A-Za-z0<span class="hljs-number">-9</span>]|[\u4e00-\u9fa5])*$/ 

<span class="hljs-comment">//匹配中文字符</span>
/[\u4e00-\u9fa5]/ 

<span class="hljs-comment">//匹配双字节字符(包括汉字) </span>
/[^\x00-\xff]/</code></pre>
<h2 id="articleHeader31">二十三、限制字符数</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<input id=&quot;txt&quot; type=&quot;text&quot;>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"txt"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="//字符串截取
function getByteVal(val, max) {
    var returnValue = '';
    var byteValLen = 0;
    for (var i = 0; i < val.length; i++) { if (val[i].match(/[^\x00-\xff]/ig) != null) byteValLen += 2; else byteValLen += 1; if (byteValLen > max) break;
        returnValue += val[i];
    }
    return returnValue;
}

$('#txt').on('keyup', function () {
    var val = this.value;
    if (val.replace(/[^\x00-\xff]/g, &quot;**&quot;).length > 14) {
        this.value = getByteVal(val, 14);
    }
});" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">//字符串截取</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getByteVal</span>(<span class="hljs-params">val, max</span>) </span>{
    <span class="hljs-keyword">var</span> returnValue = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> byteValLen = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; val.length; i++) { <span class="hljs-keyword">if</span> (val[i].match(<span class="hljs-regexp">/[^\x00-\xff]/ig</span>) != <span class="hljs-literal">null</span>) byteValLen += <span class="hljs-number">2</span>; <span class="hljs-keyword">else</span> byteValLen += <span class="hljs-number">1</span>; <span class="hljs-keyword">if</span> (byteValLen &gt; max) <span class="hljs-keyword">break</span>;
        returnValue += val[i];
    }
    <span class="hljs-keyword">return</span> returnValue;
}

$(<span class="hljs-string">'#txt'</span>).on(<span class="hljs-string">'keyup'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>.value;
    <span class="hljs-keyword">if</span> (val.replace(<span class="hljs-regexp">/[^\x00-\xff]/g</span>, <span class="hljs-string">"**"</span>).length &gt; <span class="hljs-number">14</span>) {
        <span class="hljs-keyword">this</span>.value = getByteVal(val, <span class="hljs-number">14</span>);
    }
});</code></pre>
<h2 id="articleHeader32">二十四、验证码倒计时</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<input id=&quot;send&quot; type=&quot;button&quot; value=&quot;发送验证码&quot;>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"send"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"发送验证码"</span>&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="// JavaScript
var times = 60, // 时间设置60秒
    timer = null;
            
document.getElementById('send').onclick = function () {
    // 计时开始
    timer = setInterval(function () {
        times--;
        
        if (times <= 0) {
            send.value = '发送验证码';
            clearInterval(timer);
            send.disabled = false;
            times = 60;
        } else {
            send.value = times + '秒后重试';
            send.disabled = true;
        }
    }, 1000);
}" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-keyword">var</span> times = <span class="hljs-number">60</span>, <span class="hljs-comment">// 时间设置60秒</span>
    timer = <span class="hljs-literal">null</span>;
            
<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'send'</span>).onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// 计时开始</span>
    timer = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        times--;
        
        <span class="hljs-keyword">if</span> (times &lt;= <span class="hljs-number">0</span>) {
            send.value = <span class="hljs-string">'发送验证码'</span>;
            clearInterval(timer);
            send.disabled = <span class="hljs-literal">false</span>;
            times = <span class="hljs-number">60</span>;
        } <span class="hljs-keyword">else</span> {
            send.value = times + <span class="hljs-string">'秒后重试'</span>;
            send.disabled = <span class="hljs-literal">true</span>;
        }
    }, <span class="hljs-number">1000</span>);
}</code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="var times = 60,
    timer = null;

$('#send').on('click', function () {
    var $this = $(this);
    
    // 计时开始
    timer = setInterval(function () {
        times--;
        
        if (times <= 0) {
            $this.val('发送验证码');
            clearInterval(timer);
            $this.attr('disabled', false);
            times = 60;
        } else {
            $this.val(times + '秒后重试');
            $this.attr('disabled', true);
        }
    }, 1000);
});" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="hljs javascript"><code class="jquery"><span class="hljs-keyword">var</span> times = <span class="hljs-number">60</span>,
    timer = <span class="hljs-literal">null</span>;

$(<span class="hljs-string">'#send'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
    
    <span class="hljs-comment">// 计时开始</span>
    timer = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        times--;
        
        <span class="hljs-keyword">if</span> (times &lt;= <span class="hljs-number">0</span>) {
            $<span class="hljs-keyword">this</span>.val(<span class="hljs-string">'发送验证码'</span>);
            clearInterval(timer);
            $<span class="hljs-keyword">this</span>.attr(<span class="hljs-string">'disabled'</span>, <span class="hljs-literal">false</span>);
            times = <span class="hljs-number">60</span>;
        } <span class="hljs-keyword">else</span> {
            $<span class="hljs-keyword">this</span>.val(times + <span class="hljs-string">'秒后重试'</span>);
            $<span class="hljs-keyword">this</span>.attr(<span class="hljs-string">'disabled'</span>, <span class="hljs-literal">true</span>);
        }
    }, <span class="hljs-number">1000</span>);
});</code></pre>
<h2 id="articleHeader33">二十五、时间倒计时</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<p id=&quot;_lefttime&quot;></p>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"_lefttime"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function countdown() {

    var endtime = new Date(&quot;May 2, 2018 21:31:09&quot;);
    var nowtime = new Date();

    if (nowtime >= endtime) {
        document.getElementById(&quot;_lefttime&quot;).innerHTML = &quot;倒计时间结束&quot;;
        return;
    }

    var leftsecond = parseInt((endtime.getTime() - nowtime.getTime()) / 1000);
    if (leftsecond < 0) {
        leftsecond = 0;
    }

    __d = parseInt(leftsecond / 3600 / 24);
    __h = parseInt((leftsecond / 3600) % 24);
    __m = parseInt((leftsecond / 60) % 60); 
    __s = parseInt(leftsecond % 60);

    document.getElementById(&quot;_lefttime&quot;).innerHTML = __d + &quot;天&quot; + __h + &quot;小时&quot; + __m + &quot;分&quot; + __s + &quot;秒&quot;;
}

countdown();

setInterval(countdown, 1000);" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">countdown</span>(<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">var</span> endtime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">"May 2, 2018 21:31:09"</span>);
    <span class="hljs-keyword">var</span> nowtime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();

    <span class="hljs-keyword">if</span> (nowtime &gt;= endtime) {
        <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"_lefttime"</span>).innerHTML = <span class="hljs-string">"倒计时间结束"</span>;
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> leftsecond = <span class="hljs-built_in">parseInt</span>((endtime.getTime() - nowtime.getTime()) / <span class="hljs-number">1000</span>);
    <span class="hljs-keyword">if</span> (leftsecond &lt; <span class="hljs-number">0</span>) {
        leftsecond = <span class="hljs-number">0</span>;
    }

    __d = <span class="hljs-built_in">parseInt</span>(leftsecond / <span class="hljs-number">3600</span> / <span class="hljs-number">24</span>);
    __h = <span class="hljs-built_in">parseInt</span>((leftsecond / <span class="hljs-number">3600</span>) % <span class="hljs-number">24</span>);
    __m = <span class="hljs-built_in">parseInt</span>((leftsecond / <span class="hljs-number">60</span>) % <span class="hljs-number">60</span>); 
    __s = <span class="hljs-built_in">parseInt</span>(leftsecond % <span class="hljs-number">60</span>);

    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"_lefttime"</span>).innerHTML = __d + <span class="hljs-string">"天"</span> + __h + <span class="hljs-string">"小时"</span> + __m + <span class="hljs-string">"分"</span> + __s + <span class="hljs-string">"秒"</span>;
}

countdown();

setInterval(countdown, <span class="hljs-number">1000</span>);</code></pre>
<h2 id="articleHeader34">二十六、倒计时跳转</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<div id=&quot;showtimes&quot;></div>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"showtimes"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="// 设置倒计时秒数  
var t = 10;  

// 显示倒计时秒数  
function showTime(){  
    t -= 1;  
    document.getElementById('showtimes').innerHTML= t;  

    if(t==0){  
        location.href='error404.asp';  
    }  

    //每秒执行一次 showTime()  
    setTimeout(&quot;showTime()&quot;,1000);  
}  

showTime();" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">// 设置倒计时秒数  </span>
<span class="hljs-keyword">var</span> t = <span class="hljs-number">10</span>;  

<span class="hljs-comment">// 显示倒计时秒数  </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showTime</span>(<span class="hljs-params"></span>)</span>{  
    t -= <span class="hljs-number">1</span>;  
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'showtimes'</span>).innerHTML= t;  

    <span class="hljs-keyword">if</span>(t==<span class="hljs-number">0</span>){  
        location.href=<span class="hljs-string">'error404.asp'</span>;  
    }  

    <span class="hljs-comment">//每秒执行一次 showTime()  </span>
    setTimeout(<span class="hljs-string">"showTime()"</span>,<span class="hljs-number">1000</span>);  
}  

showTime();</code></pre>
<h2 id="articleHeader35">二十七、时间戳、毫秒格式化</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function formatDate(now) { 
    var y = now.getFullYear();
    var m = now.getMonth() + 1; // 注意 JavaScript 月份+1 
    var d = now.getDate();
    var h = now.getHours(); 
    var m = now.getMinutes(); 
    var s = now.getSeconds();
    
    return y + &quot;-&quot; + m + &quot;-&quot; + d + &quot; &quot; + h + &quot;:&quot; + m + &quot;:&quot; + s; 
} 

var nowDate = new Date(1442978789184);

alert(formatDate(nowDate));" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatDate</span>(<span class="hljs-params">now</span>) </span>{ 
    <span class="hljs-keyword">var</span> y = now.getFullYear();
    <span class="hljs-keyword">var</span> m = now.getMonth() + <span class="hljs-number">1</span>; <span class="hljs-comment">// 注意 JavaScript 月份+1 </span>
    <span class="hljs-keyword">var</span> d = now.getDate();
    <span class="hljs-keyword">var</span> h = now.getHours(); 
    <span class="hljs-keyword">var</span> m = now.getMinutes(); 
    <span class="hljs-keyword">var</span> s = now.getSeconds();
    
    <span class="hljs-keyword">return</span> y + <span class="hljs-string">"-"</span> + m + <span class="hljs-string">"-"</span> + d + <span class="hljs-string">" "</span> + h + <span class="hljs-string">":"</span> + m + <span class="hljs-string">":"</span> + s; 
} 

<span class="hljs-keyword">var</span> nowDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">1442978789184</span>);

alert(formatDate(nowDate));</code></pre>
<h2 id="articleHeader36">二十八、当前日期</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="var calculateDate = function(){

    var date = new Date();
    var weeks = [&quot;日&quot;,&quot;一&quot;,&quot;二&quot;,&quot;三&quot;,&quot;四&quot;,&quot;五&quot;,&quot;六&quot;];

    return date.getFullYear()+&quot;年&quot;+(date.getMonth()+1)+&quot;月&quot;+
    date.getDate()+&quot;日 星期&quot;+weeks[date.getDay()];
}

$(function(){
    $(&quot;#dateSpan&quot;).html(calculateDate());
});" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-keyword">var</span> calculateDate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

    <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    <span class="hljs-keyword">var</span> weeks = [<span class="hljs-string">"日"</span>,<span class="hljs-string">"一"</span>,<span class="hljs-string">"二"</span>,<span class="hljs-string">"三"</span>,<span class="hljs-string">"四"</span>,<span class="hljs-string">"五"</span>,<span class="hljs-string">"六"</span>];

    <span class="hljs-keyword">return</span> date.getFullYear()+<span class="hljs-string">"年"</span>+(date.getMonth()+<span class="hljs-number">1</span>)+<span class="hljs-string">"月"</span>+
    date.getDate()+<span class="hljs-string">"日 星期"</span>+weeks[date.getDay()];
}

$(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    $(<span class="hljs-string">"#dateSpan"</span>).html(calculateDate());
});</code></pre>
<h2 id="articleHeader37">二十九、判断周六/周日</h2>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<p id=&quot;text&quot;></p>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html" style="word-break: break-word; white-space: initial;"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"text"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="function time(y,m){
    var tempTime = new Date(y,m,0);
    var time = new Date();
    var saturday = new Array();
    var sunday = new Array();
    
    for(var i=1;i<=tempTime.getDate();i++){
        time.setFullYear(y,m-1,i);
        
        var day = time.getDay();
        
        if(day == 6){
            saturday.push(i);
        }else if(day == 0){
            sunday.push(i);
        }
    }
    
    var text = y+&quot;年&quot;+m+&quot;月份&quot;+&quot;<br />&quot;
                +&quot;周六：&quot;+saturday.toString()+&quot;<br />&quot;
                +&quot;周日：&quot;+sunday.toString();
                
    document.getElementById(&quot;text&quot;).innerHTML = text;
}
 
time(2018,5);" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">time</span>(<span class="hljs-params">y,m</span>)</span>{
    <span class="hljs-keyword">var</span> tempTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(y,m,<span class="hljs-number">0</span>);
    <span class="hljs-keyword">var</span> time = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    <span class="hljs-keyword">var</span> saturday = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    <span class="hljs-keyword">var</span> sunday = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">1</span>;i&lt;=tempTime.getDate();i++){
        time.setFullYear(y,m<span class="hljs-number">-1</span>,i);
        
        <span class="hljs-keyword">var</span> day = time.getDay();
        
        <span class="hljs-keyword">if</span>(day == <span class="hljs-number">6</span>){
            saturday.push(i);
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(day == <span class="hljs-number">0</span>){
            sunday.push(i);
        }
    }
    
    <span class="hljs-keyword">var</span> text = y+<span class="hljs-string">"年"</span>+m+<span class="hljs-string">"月份"</span>+<span class="hljs-string">"&lt;br /&gt;"</span>
                +<span class="hljs-string">"周六："</span>+saturday.toString()+<span class="hljs-string">"&lt;br /&gt;"</span>
                +<span class="hljs-string">"周日："</span>+sunday.toString();
                
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"text"</span>).innerHTML = text;
}
 
time(<span class="hljs-number">2018</span>,<span class="hljs-number">5</span>);</code></pre>
<h2 id="articleHeader38">三十、AJAX调用错误处理</h2>
<p>当 Ajax 调用返回 404 或 500 错误时，就执行错误处理程序。如果没有定义处理程序，其他的 jQuery 代码或会就此罢工。定义一个全局的 Ajax 错误处理程序</p>
<p><span class="img-wrap"><img data-src="/img/bV9M44?w=643&amp;h=78" src="https://static.alili.tech/img/bV9M44?w=643&amp;h=78" alt="AJAX调用错误处理" title="AJAX调用错误处理" style="cursor: pointer;"></span></p>
<h2 id="articleHeader39">三十一、链式插件调用</h2>
<p>jQuery 允许“链式”插件的方法调用，以减轻反复查询 DOM 并创建多个 jQuery 对象的过程。</p>
<p><span class="img-wrap"><img data-src="/img/bV9M5r?w=271&amp;h=77" src="https://static.alili.tech/img/bV9M5r?w=271&amp;h=77" alt="链式插件调用" title="链式插件调用" style="cursor: pointer;"></span></p>
<p>通过使用链式，可以改善</p>
<p><span class="img-wrap"><img data-src="/img/bV9M5E?w=159&amp;h=102" src="https://static.alili.tech/img/bV9M5E?w=159&amp;h=102" alt="链式插件调用" title="链式插件调用" style="cursor: pointer;"></span></p>
<p>还有一种方法是在（<strong>前缀$</strong>）变量中高速缓存元素</p>
<p><span class="img-wrap"><img data-src="/img/bV9M50?w=259&amp;h=98" src="https://static.alili.tech/img/bV9M50?w=259&amp;h=98" alt="链式插件调用" title="链式插件调用" style="cursor: pointer;"></span></p>
<p>链式和高速缓存的方法都是 jQuery 中可以让代码变得更短和更快的最佳做法。</p>
<p>本文在GitHub的地址 <a href="https://github.com/WEBING123/Common-code" rel="nofollow noreferrer" target="_blank">Common-code</a></p>
<p><a href="https://segmentfault.com/u/webing123">阅读更多</a></p>
<p>参考文章 <a href="https://segmentfault.com/a/1190000011087315#articleHeader21" target="_blank">『总结』web前端开发常用代码整理</a></p>

                
{{< /raw >}}

# 版权声明
本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，

本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。

原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！

## 原文标题
分享前端开发常用代码片段-值得收藏

## 原文链接
[https://segmentfault.com/a/1190000014700549](https://segmentfault.com/a/1190000014700549)


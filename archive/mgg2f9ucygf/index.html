<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端图片预览，上传前预览【兼容IE7、8、9、10、11，Firefox，Chrome】"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端图片预览，上传前预览【兼容IE7、8、9、10、11，Firefox，Chrome】 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/mgg2f9ucygf/",
				"appid": "1613049289050283", 
				"title": "前端图片预览，上传前预览【兼容IE7、8、9、10、11，Firefox，Chrome】 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-03-02T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/caq64lxh2em/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/k4xqwcnq7g/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f&text=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f&text=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f&title=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f&is_video=false&description=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f&title=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f&title=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f&title=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmgg2f9ucygf%2f&title=%e5%89%8d%e7%ab%af%e5%9b%be%e7%89%87%e9%a2%84%e8%a7%88%ef%bc%8c%e4%b8%8a%e4%bc%a0%e5%89%8d%e9%a2%84%e8%a7%88%e3%80%90%e5%85%bc%e5%ae%b9IE7%e3%80%818%e3%80%819%e3%80%8110%e3%80%8111%ef%bc%8cFirefox%ef%bc%8cChrome%e3%80%91"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端图片预览，上传前预览【兼容IE7、8、9、10、11，Firefox，Chrome】</h1><div class="meta"><div class="postdate"><time datetime="2019-03-02" itemprop="datePublished">2019-03-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在现在的Web开发中不可避免的会做一个图片预览的功能，比如在上传图片的情况下，一个很简单的办法就是讲图片上传至服务器之后，再将文件的URL返回回来，然后异步通过这个URL加载刚刚上传的图片，实现图片的预览，很明显的在这个过程中两次Web请求，一次发送文件，一次下载文件，到最后这个文件如果在客户端被删除（取消上传，弃用这次的上传），这整个过程都白费了。我们希望能够在图片上传之前就能进行图片的预览，这样就避免了不必要的网络请求和时间等待。下面的内容就围绕这个话题展开。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e本地图片预览\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3eIE中的本地图片预览（以本地文件的形式访问）\x3c\/blockquote\x3e\n\x3cp\x3e在IE中能够很方便的实现本地网页的图片预览，IE中的\x26lt;input type=\x22file\x22 id=\x22file_upload\x22\x26gt;中的File对象中的value属性，存储的是要上传的文件的完整路径，在IE中只需要将这个完整路径作为一个Image对象的src属性，就能实现在这个Image对象中对这个上传的图片进行预览。\x3c\/p\x3e\n\x3cp\x3e在IE中有如下方式:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var url;\nvar fileobj = document.getElementById(sourceId);\nfileobj.select();\nurl = document.selection.createRange().text;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e fileobj = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(sourceId);\nfileobj.select();\n\x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.selection.createRange().text;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e或者\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var url = document.getElementById(sourceId).value;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(sourceId).value;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e两种方式获取到的路径直接给img src 可以进行本地图片的预览（可以加上file:\/\/\/协议，效果一样），这两种方式对IE7、8、9、10、11下有效。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eFirefox和Chrome的本地图片预览\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e在Firefox和Chrome中使用如下方式:\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3evar url = window.URL.createObjectURL(document.getElementById(sourceId).files[0])\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e将得到的值给img src 进行图片预览。可能还会看到如下的方式：var url = obj.files.item(0).getAsDataURL();\x3c\/p\x3e\n\x3cp\x3e这种使用Firefox File对象的getAsDataURL的方式，已经在Firefox 7.0以后弃用，Firefox DOM File，可能原因是在HTML5标准中有相关的定义。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e服务端图片预览\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3eIE中的本地图片预览（以服务端URL的形式访问）\x3c\/blockquote\x3e\n\x3cp\x3e上面提到的本地预览的方式，在以服务端URL的形式方式下没有预览的效果，需要使用如下滤镜的形式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function PreviewImg(imgFile){\n     var newPreview = document.getElementById(\x26quot;newPreview\x26quot;);\n     var imgDiv = document.createElement(\x26quot;div\x26quot;);\n     document.body.appendChild(imgDiv);\n     imgDiv.style.width = \x26quot;118px\x26quot;;     imgDiv.style.height = \x26quot;127px\x26quot;;\n     imgDiv.style.filter=\x26quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod = scale)\x26quot;;\n     imgDiv.filters.item(\x26quot;DXImageTransform.Microsoft.AlphaImageLoader\x26quot;).src = imgFile.value;\n     newPreview.appendChild(imgDiv);\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePreviewImg\x3c\/span\x3e\x3c\/span\x3e(imgFile){\n     \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3ePreview\x3c\/span\x3e = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22newPreview\x22\x3c\/span\x3e);\n     \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e imgDiv = document.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e);\n     document.body.appendChild(imgDiv);\n     imgDiv.style.width = \x3cspan class=\x22hljs-string\x22\x3e\x22118px\x22\x3c\/span\x3e;     imgDiv.style.height = \x3cspan class=\x22hljs-string\x22\x3e\x22127px\x22\x3c\/span\x3e;\n     imgDiv.style.filter=\x3cspan class=\x22hljs-string\x22\x3e\x22progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod = scale)\x22\x3c\/span\x3e;\n     imgDiv.filters.item(\x3cspan class=\x22hljs-string\x22\x3e\x22DXImageTransform.Microsoft.AlphaImageLoader\x22\x3c\/span\x3e).src = imgFile.value;\n     \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3ePreview\x3c\/span\x3e.appendChild(imgDiv);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的实现可以在IE7、8、9下运行，在IE10、11下无效。h2. Firefox和Chrome的本地图片预览在Firefox和Chrome中使用如下方式:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var url = window.URL.createObjectURL(document.getElementById(sourceId).files[0])\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e url = window\x3cspan class=\x22hljs-selector-class\x22\x3e.URL\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.createObjectURL\x3c\/span\x3e(document.getElementById(sourceId)\x3cspan class=\x22hljs-selector-class\x22\x3e.files\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e])\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e将得到的值给img src 进行图片预览。可能还会看到如下的方式：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var url = obj.files.item(0).getAsDataURL();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ebnf\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-attribute\x22\x3evar url\x3c\/span\x3e = obj.files.item(0).getAsDataURL();\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种使用Firefox File对象的getAsDataURL的方式，已经在Firefox 7.0以后弃用，Firefox DOM File，可能原因是在HTML5标准中有相关的定义。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e基础\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e在Chrome中，window.URL和window.webkitURL都存在\x3cbr\x3e在Firefox中，仅Window.URL存在\x3cbr\x3e在IE11（Edge），10中仅window.URL存在\x3cbr\x3e在IE7、8、9中不存在window.URL\x3cbr\x3e在IE中能通过FileObject 的value 属性获取文件全路径\x3cbr\x3e在Chrome中无法获取FileObject的全路径，得到的是一个假路径\x3cbr\x3e在Firefox中根本获取不到路径，得到的是一个文件名\x3cbr\x3e在IE7、8、9中无法获取到FileObject的files属性\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e实现\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e以前我们总是按照userAgent，通过判断IE，还是Chrome，还是Firefox，或者Safari、Opera等来对应支持代码，现在这种方式可能需要有所调整，File API是HTML5的规范特性，因此可以将浏览器大致先分为两个大类，一个是支持HTML5的一类，另一个是不支持的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3chtml xmlns=\x26quot;http:\/\/www.w3.org\/1999\/xhtml\x26quot;\x3e\n \n\x3chead id=\x26quot;Head1\x26quot;\x3e\n    \x3cmeta http-equiv=\x26quot;Content-Type\x26quot; content=\x26quot;text\/html; charset=utf-8\x26quot; \/\x3e\n    \x3cstyle type=\x26quot;text\/css\x26quot;\x3e\n    .image_container {\n        width: 48px;\n        height: 48px;\n        position: relative;\n    }\n    \x3c\/style\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;jquery.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript language=\x26quot;javascript\x26quot;\x3e\n    $(function() {\n        $(\x26quot;#file_upload\x26quot;).change(function() {\n            var $file = $(this);\n            var fileObj = $file[0];\n            var windowURL = window.URL || window.webkitURL;\n            var dataURL;\n            var $img = $(\x26quot;#preview\x26quot;);\n \n            if(fileObj \x26amp;\x26amp; fileObj.files \x26amp;\x26amp; fileObj.files[0]){\n                dataURL = windowURL.createObjectURL(fileObj.files[0]);\n                $img.attr(\x27src\x27,dataURL);\n            }else{\n                dataURL = $file.val();\n \n                \/\/ $img.css(\x26quot;filter\x26quot;,\x27progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod = scale,src=\x26quot;\x27 \x2b dataURL \x2b \x27\x26quot;)\x27);\n \n                \/\/ var imgObj = document.getElementById(\x26quot;preview\x26quot;);\n                \/\/ imgObj.style.filter = \x26quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src=\\\x26quot;\x26quot; \x2b dataURL \x2b \x26quot;\\\x26quot;)\x26quot;;\n                \/\/ imgObj.style.width = \x26quot;48px\x26quot;;\n                \/\/ imgObj.style.height = \x26quot;48px\x26quot;;\n \n                var imgObj = document.getElementById(\x26quot;preview\x26quot;);\n                \/\/ 两个坑:\n                \/\/ 1、在设置filter属性时，元素必须已经存在在DOM树中，动态创建的Node，也需要在设置属性前加入到DOM中，先设置属性在加入，无效；\n                \/\/ 2、src属性需要像下面的方式添加，上面的两种方式添加，无效；\n                imgObj.style.filter = \x26quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)\x26quot;;\n                imgObj.filters.item(\x26quot;DXImageTransform.Microsoft.AlphaImageLoader\x26quot;).src = dataURL;\n \n            }\n        });\n    });\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n    \x3cdiv id=\x26quot;demo\x26quot;\x3e\n        \x3cinput id=\x26quot;file_upload\x26quot; type=\x26quot;file\x26quot; \/\x3e\n        \x3cdiv class=\x26quot;image_container\x26quot;\x3e\n            \x3cimg id=\x26quot;preview\x26quot; width=\x26quot;60\x26quot; height=\x26quot;60\x26quot;\x3e\n        \x3c\/div\x3e\n    \x3c\/div\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3exmlns\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/www.w3.org\/1999\/xhtml\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Head1\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehttp-equiv\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Content-Type\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/html; charset=utf-8\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/css\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.image_container\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e48px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e48px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: relative;\n    }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22jquery.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elanguage\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    $(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        $(\x3cspan class=\x22hljs-string\x22\x3e\x22#file_upload\x22\x3c\/span\x3e).change(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e $file = $(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fileObj = $file[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e windowURL = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.URL || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.webkitURL;\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dataURL;\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e $img = $(\x3cspan class=\x22hljs-string\x22\x3e\x22#preview\x22\x3c\/span\x3e);\n \n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(fileObj \x26amp;\x26amp; fileObj.files \x26amp;\x26amp; fileObj.files[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]){\n                dataURL = windowURL.createObjectURL(fileObj.files[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]);\n                $img.attr(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e,dataURL);\n            }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                dataURL = $file.val();\n \n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ $img.css(\x22filter\x22,\x27progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod = scale,src=\x22\x27 \x2b dataURL \x2b \x27\x22)\x27);\x3c\/span\x3e\n \n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ var imgObj = document.getElementById(\x22preview\x22);\x3c\/span\x3e\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ imgObj.style.filter = \x22progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src=\\\x22\x22 \x2b dataURL \x2b \x22\\\x22)\x22;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ imgObj.style.width = \x2248px\x22;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ imgObj.style.height = \x2248px\x22;\x3c\/span\x3e\n \n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e imgObj = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22preview\x22\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 两个坑:\x3c\/span\x3e\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1、在设置filter属性时，元素必须已经存在在DOM树中，动态创建的Node，也需要在设置属性前加入到DOM中，先设置属性在加入，无效；\x3c\/span\x3e\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 2、src属性需要像下面的方式添加，上面的两种方式添加，无效；\x3c\/span\x3e\n                imgObj.style.filter = \x3cspan class=\x22hljs-string\x22\x3e\x22progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)\x22\x3c\/span\x3e;\n                imgObj.filters.item(\x3cspan class=\x22hljs-string\x22\x3e\x22DXImageTransform.Microsoft.AlphaImageLoader\x22\x3c\/span\x3e).src = dataURL;\n \n            }\n        });\n    });\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22demo\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22file_upload\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22image_container\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22preview\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x2260\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x2260\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端图片预览，上传前预览【兼容IE7、8、9、10、11，Firefox，Chrome】</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016897039">https://segmentfault.com/a/1190000016897039</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/mgg2f9ucygf/" target="_blank">https://alili.tech/archive/mgg2f9ucygf/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/7815p445rtf/">MongoDB - 备份与恢复<aside class="dates">2019-03-27</aside></a></li><li><a href="/archive/a5ficy1jp7n/">2019年03月Github Javascript开源项目精选<aside class="dates">2019-03-08</aside></a></li><li><a href="/archive/nyhmtbanv2e/">Alili Weekly 前端周刊 第二十一期<aside class="dates">2019-03-08</aside></a></li><li><a href="/archive/304a32r2py8/">30分钟精通React今年最劲爆的新特性——React Hooks<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/sj4oqgzx0rk/">CSS6：flex布局<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/wedm7eypuhb/">ES6 系列之 Babel 将 Async 编译成了什么样子<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/cazifdrck0u/">ES6 系列之我们来聊聊 Async<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/0dlsi4qmvsvf/">Express的基本使用<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/183cav6qpdb/">JavaScript常用八种继承方案<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/5tpnsqmgslq/">React 手稿 - Component state<aside class="dates">2019-03-02</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>
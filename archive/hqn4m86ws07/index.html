<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.每天碰到那么多问题,终归还是需要一个记录的地方. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="炫酷粒子表白，双十一脱单靠它了！"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.每天碰到那么多问题,终归还是需要一个记录的地方. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js"><meta property="og:site_name" content="Alili"><title>炫酷粒子表白，双十一脱单靠它了！ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/hqn4m86ws07/",
				"appid": "1613049289050283", 
				"title": "炫酷粒子表白，双十一脱单靠它了！ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-03-02T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/61sjm32irkj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/agc809stg9a/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&text=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&text=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&is_video=false&description=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">炫酷粒子表白，双十一脱单靠它了！</h1><div class="meta"><div class="postdate"><time datetime="2019-03-02" itemprop="datePublished">2019-03-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.每天碰到那么多问题,终归还是需要一个记录的地方. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908379?w=1100\x26amp;h=564\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908379?w=1100\x26amp;h=564\x22 alt=\x22我老婆\x22 title=\x22我老婆\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e​    双十一光棍节又要来临了，每年这个时候都是本人最苦闷的时刻。日渐消瘦的钱包，愈发干涸的双手，虽然变强了，头却变凉了。今年一定要搞点事情！\x3c\/p\x3e\n\x3cp\x3e\x26lt;img src=\x22\x3ca href=\x22https:\/\/img.alicdn.com\/tfs\/TB1vmSanhTpK1RjSZR0XXbEwXXa-400-400.gif\x26amp;quot\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/img.alicdn.com\/tfs\/TB...\x3c\/a\x3e; alt=\x22fxxking things\x22 width=\x22160\x22\x26gt;\x3c\/p\x3e\n\x3cp\x3e​    最近听女神说想谈恋爱了，✧(≖ ◡ ≖) 嘿嘿，一定不能放过这个机会，给她来个不一样的表白。\x3c\/p\x3e\n\x3cp\x3e\x26lt;img src=\x22\x3ca href=\x22https:\/\/img.alicdn.com\/tfs\/TB10VGcnbPpK1RjSZFFXXa5PpXa-1342-752.png\x26amp;quot\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/img.alicdn.com\/tfs\/TB...\x3c\/a\x3e; alt=\x22我老婆\x22 width=\x22360\x22\x26gt;\x3c\/p\x3e\n\x3cp\x3e作为整天搞可视化的前端攻城狮，最先想到的就是常玩的各种粒子。那么咱们就一起来把这个粒子系统玩出花来吧。\x3cbr\x3e\x3ca href=\x22https:\/\/es2049.studio\/work-show\/textPraticle\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e演示地址\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e用粒子组成文字\x3c\/h2\x3e\n\x3cp\x3e首先，咱们想下要如何将一系列的粒子组成一句表白呢？\x3c\/p\x3e\n\x3cp\x3e实现原理其实很简单，Canvas 中有个 getImageData 的方法，可以得到一个矩形范围所有像素点数据。那么我们就试试来获取一个文字的形状吧。\x3c\/p\x3e\n\x3cp\x3e第一步，用 measureText 的方法来计算出文字适当的尺寸和位置。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 创建一个跟画布等比例的 canvas\nconst width = 100;\nconst height = ~~(width * this.height \/ this.width); \/\/ this.width , this.height 说整个画布的尺寸\nconst offscreenCanvas = document.createElement(\x27canvas\x27);\nconst offscreenCanvasCtx = offscreenCanvas.getContext(\x272d\x27);\noffscreenCanvas.setAttribute(\x27width\x27, width);\noffscreenCanvas.setAttribute(\x27height\x27, height);\n\n\/\/ 在这离屏 canvas 中将我们想要的文字 textAll 绘制出来后，再计算它合适的尺寸\noffscreenCanvasCtx.fillStyle = \x27#000\x27;\noffscreenCanvasCtx.font = \x27bold 10px Arial\x27;\nconst measure = offscreenCanvasCtx.measureText(textAll); \/\/ 测量文字，用来获取宽度\nconst size = 0.8;\n\/\/ 宽高分别达到屏幕0.8时的size\nconst fSize = Math.min(height * size * 10 \/ lineHeight, width * size * 10 \/ measure.width);  \/\/ 10像素字体行高 lineHeight=7 magic\noffscreenCanvasCtx.font = `bold ${fSize}px Arial`;\n\n\/\/ 根据计算后的字体大小，在将文字摆放到适合的位置，文字的坐标起始位置在左下方\nconst measureResize = offscreenCanvasCtx.measureText(textAll);\n\/\/ 文字起始位置在左下方\nlet left = (width - measureResize.width) \/ 2;\nconst bottom = (height \x2b fSize \/ 10 * lineHeight) \/ 2;\noffscreenCanvasCtx.fillText(textAll, left, bottom);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建一个跟画布等比例的 canvas\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e width = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e height = ~~(width * \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height \/ \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.width); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this.width , this.height 说整个画布的尺寸\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreenCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreenCanvasCtx = offscreenCanvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\noffscreenCanvas.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27width\x27\x3c\/span\x3e, width);\noffscreenCanvas.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27height\x27\x3c\/span\x3e, height);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在这离屏 canvas 中将我们想要的文字 textAll 绘制出来后，再计算它合适的尺寸\x3c\/span\x3e\noffscreenCanvasCtx.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27#000\x27\x3c\/span\x3e;\noffscreenCanvasCtx.font = \x3cspan class=\x22hljs-string\x22\x3e\x27bold 10px Arial\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e measure = offscreenCanvasCtx.measureText(textAll); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 测量文字，用来获取宽度\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e size = \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 宽高分别达到屏幕0.8时的size\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e fSize = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(height * size * \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e \/ lineHeight, width * size * \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e \/ measure.width);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 10像素字体行高 lineHeight=7 magic\x3c\/span\x3e\noffscreenCanvasCtx.font = \x3cspan class=\x22hljs-string\x22\x3e`bold \x3cspan class=\x22hljs-subst\x22\x3e${fSize}\x3c\/span\x3epx Arial`\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据计算后的字体大小，在将文字摆放到适合的位置，文字的坐标起始位置在左下方\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e measureResize = offscreenCanvasCtx.measureText(textAll);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文字起始位置在左下方\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e left = (width - measureResize.width) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bottom = (height \x2b fSize \/ \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e * lineHeight) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\noffscreenCanvasCtx.fillText(textAll, left, bottom);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e咱们可以 appendChild 到 body 里看眼\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908380\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908380\x22 alt=\x22textAll\x22 title=\x22textAll\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e好的。同学们注意，我要开始变形了 [推眼镜] 。\x3c\/p\x3e\n\x3cp\x3egetImageData 获取的像素数据是一个 Uint8ClampedArray （值是 0 - 255 的数组），4 个数一组分别对应一个像素点的 R G B A 值。我们只需要判断 i * 4 \x2b 3 不为 0 就可以得到需要的字体形状数据了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ texts 所有的单词分别获取 data ，上文的 textAll 是 texts 加一起\nObject.values(texts).forEach(item =\x3e {\n    offscreenCanvasCtx.clearRect(0, 0, width, height);\n    offscreenCanvasCtx.fillText(item.text, left, bottom);\n    left \x2b= offscreenCanvasCtx.measureText(item.text).width;\n    const data = offscreenCanvasCtx.getImageData(0, 0, width, height);\n    const points = [];\n    \/\/ 判断第 i * 4 \x2b 3 位是否为0，获得相对的 x,y 坐标(使用时需乘画布的实际长宽, y 坐标也需要取反向)\n    for (let i = 0, max = data.width * data.height; i \x3c max; i\x2b\x2b) {\n        if (data.data[i * 4 \x2b 3]) {\n            points.push({\n                x: (i % data.width) \/ data.width,\n                y: (i \/ data.width) \/ data.height\n            });\n        }\n    }\n    \/\/ 保存到一个对象，用于后面的绘制\n    geometry.push({\n        color: item.hsla,\n        points\n    });\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ texts 所有的单词分别获取 data ，上文的 textAll 是 texts 加一起\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.values(texts).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    offscreenCanvasCtx.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, width, height);\n    offscreenCanvasCtx.fillText(item.text, left, bottom);\n    left \x2b= offscreenCanvasCtx.measureText(item.text).width;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e data = offscreenCanvasCtx.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, width, height);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e points = [];\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断第 i * 4 \x2b 3 位是否为0，获得相对的 x,y 坐标(使用时需乘画布的实际长宽, y 坐标也需要取反向)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, max = data.width * data.height; i \x26lt; max; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (data.data[i * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e]) {\n            points.push({\n                \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: (i % data.width) \/ data.width,\n                \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: (i \/ data.width) \/ data.height\n            });\n        }\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 保存到一个对象，用于后面的绘制\x3c\/span\x3e\n    geometry.push({\n        \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: item.hsla,\n        points\n    });\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e制定场景，绘制图形\x3c\/h2\x3e\n\x3cp\x3e文字图形的获取方式以及搞定了，那么咱们就可以把内容整体输出了。咱们定义一个简单的脚本格式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ hsla 格式方便以后做色彩变化的扩展\nconst color1 = {h:197,s:\x27100%\x27,l:\x2750%\x27,a:\x2780%\x27};\nconst color2 = {h:197,s:\x27100%\x27,l:\x2750%\x27,a:\x2780%\x27};\n\/\/ lifeTime 祯数\nconst Actions = [\n    {lifeTime:60,text:[{text:3,hsla:color1}]},\n    {lifeTime:60,text:[{text:2,hsla:color1}]},\n    {lifeTime:60,text:[{text:1,hsla:color1}]},\n    {lifeTime:120,text:[\n        {text:\x27I\x27,hsla:color1},\n        {text:\x27❤️\x27,hsla:color2},\n        {text:\x27Y\x27,hsla:color1},\n        {text:\x27O\x27,hsla:color1},\n        {text:\x27U\x27,hsla:color1}\n    ]},\n];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ hsla 格式方便以后做色彩变化的扩展\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e color1 = {\x3cspan class=\x22hljs-attr\x22\x3eh\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e197\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3es\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27100%\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3el\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x2750%\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x2780%\x27\x3c\/span\x3e};\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e color2 = {\x3cspan class=\x22hljs-attr\x22\x3eh\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e197\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3es\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27100%\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3el\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x2750%\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x2780%\x27\x3c\/span\x3e};\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ lifeTime 祯数\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Actions = [\n    {\x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:[{\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1}]},\n    {\x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:[{\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1}]},\n    {\x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:[{\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1}]},\n    {\x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e120\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:[\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27I\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1},\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27❤️\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color2},\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27Y\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1},\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27O\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1},\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27U\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1}\n    ]},\n];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e根据预设的脚本解析出每个场景的图形，加一个 tick 判断是否到了 lifeTime 切换到下一个图形重新绘制图形。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function draw() {\n    this.tick\x2b\x2b;\n    if (this.tick \x3e= this.actions[this.actionIndex].lifeTime) {\n        this.nextAction();\n    }\n    this.clear();\n    this.renderParticles(); \/\/ 绘制点\n    this.raf = requestAnimationFrame(this.draw);\n}\n\nfunction nextAction() {\n    ....\/\/切换场景 balabala..\n    this.setParticle(); \/\/ 随机将点设置到之前得到的 action.geometry.points 上\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tick\x2b\x2b;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tick \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.actions[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.actionIndex].lifeTime) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextAction();\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.clear();\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.renderParticles(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绘制点\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.raf = requestAnimationFrame(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.draw);\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enextAction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    ....\x3cspan class=\x22hljs-comment\x22\x3e\/\/切换场景 balabala..\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setParticle(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 随机将点设置到之前得到的 action.geometry.points 上\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908381\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908381\x22 alt=\x221\x22 title=\x221\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这样咱们基本的功能已经完成了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e能不能再给力一点\x3c\/h2\x3e\n\x3cp\x3e说好的粒子系统，现在只是 context.arc 简单的画了一点。那咱们就来加个粒子系统吧。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class PARTICLE {\n    \/\/ x,y,z 为当前的坐标，vx,vy,vz 则是3个方向的速度\n    constructor(center) {\n        this.center = center;\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        this.vx = 0;\n        this.vy = 0;\n        this.vz = 0;\n    }\n    \/\/ 设置这些粒子需要运动到的终点(下一个位置)\n    setAxis(axis) {\n        this.nextX = axis.x;\n        this.nextY = axis.y;\n        this.nextZ = axis.z;\n        this.color = axis.color;\n    }\n    step() {\n        \/\/ 弹力模型 距离目标越远速度越快\n        this.vx \x2b= (this.nextX - this.x) * SPRING;\n        this.vy \x2b= (this.nextY - this.y) * SPRING;\n        this.vz \x2b= (this.nextZ - this.z) * SPRING;\n        \/\/ 摩擦系数 让粒子可以趋向稳定\n        this.vx *= FRICTION;\n        this.vy *= FRICTION;\n        this.vz *= FRICTION;\n        \n        this.x \x2b= this.vx;\n        this.y \x2b= this.vy;\n        this.z \x2b= this.vz;\n    }\n    getAxis2D() {\n        this.step();\n        \/\/ 3D 坐标下的 2D 偏移，暂且只考虑位置，不考虑大小变化\n        const scale = FOCUS_POSITION \/ (FOCUS_POSITION \x2b this.z);\n        return {\n            x: this.center.x \x2b (this.x * scale),\n            y: this.center.y - (this.y * scale),\n        };\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePARTICLE\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ x,y,z 为当前的坐标，vx,vy,vz 则是3个方向的速度\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(center) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.center = center;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.z = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vx = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vy = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vz = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置这些粒子需要运动到的终点(下一个位置)\x3c\/span\x3e\n    setAxis(axis) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextX = axis.x;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextY = axis.y;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextZ = axis.z;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.color = axis.color;\n    }\n    step() {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 弹力模型 距离目标越远速度越快\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vx \x2b= (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextX - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x) * SPRING;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vy \x2b= (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextY - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y) * SPRING;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vz \x2b= (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextZ - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.z) * SPRING;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 摩擦系数 让粒子可以趋向稳定\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vx *= FRICTION;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vy *= FRICTION;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vz *= FRICTION;\n        \n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x \x2b= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vx;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y \x2b= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vy;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.z \x2b= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vz;\n    }\n    getAxis2D() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.step();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 3D 坐标下的 2D 偏移，暂且只考虑位置，不考虑大小变化\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e scale = FOCUS_POSITION \/ (FOCUS_POSITION \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.z);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.center.x \x2b (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x * scale),\n            \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.center.y - (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y * scale),\n        };\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908382?w=426\x26amp;h=170\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908382?w=426\x26amp;h=170\x22 alt=\x222\x22 title=\x222\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e大功告成！\x3c\/p\x3e\n\x3cp\x3e既然是 3D 的粒子，其实这上面还有不是文章可做，同学们可以发挥想象力来点更酷炫的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e还有什么好玩的\x3c\/h2\x3e\n\x3cp\x3e上面是将粒子摆成文字。那咱们当然也可以直接写公式摆出个造型。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Actions 中用 func 代替 texts\n{\n    lifeTime: 100,\n    func: (radius) =\x3e {\n        const i = Math.random() * 1200;\n        let x = (i - 1200 \/ 2) \/ 300;\n        let y = Math.sqrt(Math.abs(x)) - Math.sqrt(Math.cos(x)) * Math.cos(30 * x);\n        return {\n            x: x * radius \/ 2,\n            y: y * radius \/ 2,\n            z: ~~(Math.random() * 30),\n            color: color3\n        };\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Actions 中用 func 代替 texts\x3c\/span\x3e\n{\n    \x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efunc\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eradius\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e i = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * \x3cspan class=\x22hljs-number\x22\x3e1200\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e x = (i - \x3cspan class=\x22hljs-number\x22\x3e1200\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) \/ \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e y = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sqrt(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs(x)) - \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sqrt(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(x)) * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(\x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e * x);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: x * radius \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: y * radius \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3ez\x3c\/span\x3e: ~~(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: color3\n        };\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再把刚才文字转换形状的方法用一下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    lifeTime: Infinity,\n        func: (width, height) =\x3e {\n            if(!points.length){\n                const img = document.getElementById(\x26quot;tulip\x26quot;);\n                const offscreenCanvas = document.createElement(\x27canvas\x27);\n                const offscreenCanvasCtx = offscreenCanvas.getContext(\x272d\x27);\n                const imgWidth = 200;\n                const imgHeight = 200;\n                offscreenCanvas.setAttribute(\x27width\x27, imgWidth);\n                offscreenCanvas.setAttribute(\x27height\x27, imgHeight);\n                offscreenCanvasCtx.drawImage(img, 0, 0, imgWidth, imgHeight);\n                let imgData = offscreenCanvasCtx.getImageData(0, 0, imgWidth, imgHeight);\n                for (let i = 0, max = imgData.width * imgData.height; i \x3c max; i\x2b\x2b) {\n                    if (imgData.data[i * 4 \x2b 3]) {\n                        points.push({\n                            x: (i % imgData.width) \/ imgData.width,\n                            y: (i \/ imgData.width) \/ imgData.height\n                        });\n                    }\n                }\n            }\n\n            const p = points[~~(Math.random() * points.length)]\n            const radius = Math.min(width * 0.8, height * 0.8);\n            return {\n                x: p.x * radius - radius \/ 2,\n                y: (1 - p.y) * radius - radius \/ 2,\n                z: ~~(Math.random() * 30),\n                color: color3\n            };\n        }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3eInfinity\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3efunc\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ewidth, height\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!points.length){\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e img = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22tulip\x22\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreenCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreenCanvasCtx = offscreenCanvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e imgWidth = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e imgHeight = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n                offscreenCanvas.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27width\x27\x3c\/span\x3e, imgWidth);\n                offscreenCanvas.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27height\x27\x3c\/span\x3e, imgHeight);\n                offscreenCanvasCtx.drawImage(img, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, imgWidth, imgHeight);\n                \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e imgData = offscreenCanvasCtx.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, imgWidth, imgHeight);\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, max = imgData.width * imgData.height; i \x26lt; max; i\x2b\x2b) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (imgData.data[i * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e]) {\n                        points.push({\n                            \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: (i % imgData.width) \/ imgData.width,\n                            \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: (i \/ imgData.width) \/ imgData.height\n                        });\n                    }\n                }\n            }\n\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e p = points[~~(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * points.length)]\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e radius = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(width * \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e, height * \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: p.x * radius - radius \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: (\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e - p.y) * radius - radius \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3ez\x3c\/span\x3e: ~~(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: color3\n            };\n        }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908383\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908383\x22 alt=\x223\x22 title=\x223\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e​完美 😝。\x3c\/p\x3e\n\x3cp\x3e然后咱也可以用 drawImage 绘制图片来代替 arc 画点。\x3c\/p\x3e\n\x3cp\x3e\x26lt;img src=\x22\x3ca href=\x22https:\/\/img.alicdn.com\/tfs\/TB1_JffnirpK1RjSZFhXXXSdXXa-916-750.png\x26amp;quot\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/img.alicdn.com\/tfs\/TB...\x3c\/a\x3e; width=\x22160\x22\x26gt;\x3c\/p\x3e\n\x3cp\x3e等等！！前面的效果总觉得哪里不对劲，好像有些卡 。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908384?w=440\x26amp;h=339\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908384?w=440\x26amp;h=339\x22 alt=\x22稳得一笔\x22 title=\x22稳得一笔\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e优化小提示\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e分层。如果还需要增加一些其他的内容到 Canvas 中的话，可以考虑拆出多个 Canvas 来做。\x3c\/li\x3e\n\x3cli\x3e减少属性设置。包括 lineWidth、fillStyle 等等。Canvas 上下文是很复杂的一个对象，当你调它的一些属性设置时消耗的性能还是不少的。arc 之类的画图方法也要减少。\x3c\/li\x3e\n\x3cli\x3e离屏绘制。不用 arc 画点，要怎么办。上面的延迟其实就是每次画点时都调用了一遍 fillStyle、arc。但是当我们绘制图片 drawImage 时，性能明显会好上很多。drawImage 除了直接绘图片外，还能绘制另一个 Canvas，所以我们提前将这些点画到一个不在屏幕上的 Canvas 里就可以了。\x3c\/li\x3e\n\x3cli\x3e减少 js 计算，避免堵塞进程，可以使用 web worker。当然咱们目前的计算完全用不上这个。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e我这使用了 3000 个粒子，对比下使用离屏绘制前后的帧率。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908385?w=382\x26amp;h=256\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908385?w=382\x26amp;h=256\x22 alt=\x22方不方\x22 title=\x22方不方\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908386\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908386\x22 alt=\x22圆了\x22 title=\x22圆了\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e现在唯一限制你的就是想象力了。大家一起去征服老板，征服女神！\x3c\/p\x3e\n\x3cp\x3e这个双十一脱贫脱单不脱发！\x3c\/p\x3e\n\x3cp\x3e好了不说了，女神喊我修电脑去了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e参考\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/codepen.io\/airen\/pen\/owRMoY\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edeformable particles\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22airen\/pen\/owRMoY\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/pixabay.com\/zh\/%E5%BF%83%E8%84%8F-%E7%88%B1-%E7%BA%A2%E8%89%B2%E7%9A%84%E5%BF%83-%E6%83%85%E4%BA%BA%E8%8A%82%E9%82%A3%E5%A4%A9-%E8%AE%A2%E5%A9%9A-%E6%BF%80%E6%83%85-%E7%BA%A2%E8%89%B2-%E6%84%9F%E8%A7%89-%E7%9C%9F%E7%88%B1-2402086\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eheart.png\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/www.w3school.com.cn\/tags\/html_ref_canvas.asp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCanvas 参考手册\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3ey=sqrt(abs(x))-sqrt(cos(x))*cos(40x)\x3cp\x3e​\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e文章可随意转载，但请保留此 \x3ca href=\x22https:\/\/www.yuque.com\/es2049\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e原文链接\x3c\/a\x3e。\x3cbr\x3e非常欢迎有激情的你加入 \x3ca href=\x22https:\/\/es2049.studio\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eES2049 Studio\x3c\/a\x3e，简历请发送至 caijun.hcj(at)alibaba-inc.com 。\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>炫酷粒子表白，双十一脱单靠它了！</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016908376">https://segmentfault.com/a/1190000016908376</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/hqn4m86ws07/" target="_blank">https://alili.tech/archive/hqn4m86ws07/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/9xuojm75d2a/">前端微服务化进阶1 - 基于umi的子模块方案<aside class="dates">2019-04-13</aside></a></li><li><a href="/archive/ol9qis0n8xe/">2019年04月Github Javascript开源项目精选<aside class="dates">2019-04-08</aside></a></li><li><a href="/archive/7815p445rtf/">记一次MongoDB迁移 - 备份与恢复<aside class="dates">2019-03-27</aside></a></li><li><a href="/archive/a5ficy1jp7n/">2019年03月Github Javascript开源项目精选<aside class="dates">2019-03-08</aside></a></li><li><a href="/archive/nyhmtbanv2e/">Alili Weekly 前端周刊 第二十一期<aside class="dates">2019-03-08</aside></a></li><li><a href="/archive/304a32r2py8/">30分钟精通React今年最劲爆的新特性——React Hooks<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/sj4oqgzx0rk/">CSS6：flex布局<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/wedm7eypuhb/">ES6 系列之 Babel 将 Async 编译成了什么样子<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/cazifdrck0u/">ES6 系列之我们来聊聊 Async<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/0dlsi4qmvsvf/">Express的基本使用<aside class="dates">2019-03-02</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>
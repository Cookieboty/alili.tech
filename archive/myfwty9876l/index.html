<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.每天碰到那么多问题,终归还是需要一个记录的地方. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="了解可执行的NPM包"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.每天碰到那么多问题,终归还是需要一个记录的地方. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js"><meta property="og:site_name" content="Alili"><title>了解可执行的NPM包 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/myfwty9876l/",
				"appid": "1613049289050283", 
				"title": "了解可执行的NPM包 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-03-02T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/l9blfkkvlj9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/zot2azlm08/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f&text=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f&text=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f&title=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f&is_video=false&description=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f&title=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f&title=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f&title=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmyfwty9876l%2f&title=%e4%ba%86%e8%a7%a3%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84NPM%e5%8c%85"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">了解可执行的NPM包</h1><div class="meta"><div class="postdate"><time datetime="2019-03-02" itemprop="datePublished">2019-03-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.每天碰到那么多问题,终归还是需要一个记录的地方. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3ccode\x3eNPM\x3c\/code\x3e是\x3ccode\x3eNode.js\x3c\/code\x3e的包管理工具，随着\x3ccode\x3eNode.js\x3c\/code\x3e的出现，以及前端开发开始使用\x3ccode\x3egulp\x3c\/code\x3e、\x3ccode\x3ewebpack\x3c\/code\x3e、\x3ccode\x3erollup\x3c\/code\x3e以及其他各种优秀的编译打包工具（大多数采用\x3ccode\x3eNode.js\x3c\/code\x3e来实现），大家都开始接触到一些\x3ccode\x3eNode.js\x3c\/code\x3e，发现了使用\x3ccode\x3eNPM\x3c\/code\x3e来管理一些第三方模块会很方便。  \x3cbr\x3e大家搬砖的模式也是从之前的去插件官网下载\x3ccode\x3eXXX.min.js\x3c\/code\x3e改为了\x3ccode\x3enpm install XXX\x3c\/code\x3e，然后在项目中\x3ccode\x3erequire\x3c\/code\x3e或者\x3ccode\x3eimport\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e当然，\x3ccode\x3eNPM\x3c\/code\x3e上边不仅仅存在一些用来打包、引用的第三方模块，还有很多优秀的工具（包括部分打包工具），他们与上边提到的模块的区别在于，使用\x3ccode\x3enpm install XXX\x3c\/code\x3e以后，是可以直接运行的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e常见的那些包\x3c\/h2\x3e\n\x3cp\x3e可以回想一下，\x3ccode\x3ewebpack\x3c\/code\x3e官网中是否有过这样的字样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e npm install webpack -g\n\n\x3e webpack\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x26gt; npm install webpack -g\n\n\x26gt; webpack\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e当然，现在是不推荐使用全局安装模式的，具体原因会在下边提到\x3c\/blockquote\x3e\n\x3cp\x3e以及非全局的安装使用步骤：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e npm install webpack\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x26gt; npm install webpack\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后编辑你的\x3ccode\x3epackage.json\x3c\/code\x3e文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;scripts\x26quot;: {\n\x2b    \x26quot;webpack\x26quot;: \x26quot;webpack\x26quot;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e{\n  \x22scripts\x22: {\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b    \x22webpack\x22: \x22webpack\x22\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再使用\x3ccode\x3enpm run\x3c\/code\x3e就可以调用了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e npm run webpack\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x26gt; npm run webpack\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e以上非全局的方案是比较推荐的做法\x3c\/blockquote\x3e\n\x3cp\x3e不过还可以顺带一提的是在\x3ccode\x3eNPM 5.x\x3c\/code\x3e更新的一个新的工具，叫做\x3ccode\x3enpx\x3c\/code\x3e，_并不打算细说它，但它确实是一个很方便的小工具，在\x3ccode\x3ewebpack\x3c\/code\x3e官网中也提到了简单的使用方法_  \x3c\/p\x3e\n\x3cp\x3e就像上边所提到的修改\x3ccode\x3epackage.json\x3c\/code\x3e，添加\x3ccode\x3escripts\x3c\/code\x3e然后再执行的方式，可以很简单的使用\x3ccode\x3enpx webpack\x3c\/code\x3e来完成相同的效果，不必再去修改额外的文件。_（当然，\x3ccode\x3enpx\x3c\/code\x3e可以做更多的事情，在这里先认为它是\x3ccode\x3e.\/node_modules\/webpack\/bin\/webpack.js\x3c\/code\x3e的简写就好了）_  \x3c\/p\x3e\n\x3cp\x3e包括其他常用的一些，像\x3ccode\x3en\x3c\/code\x3e、\x3ccode\x3ecreate-react-app\x3c\/code\x3e、\x3ccode\x3evue-cli\x3c\/code\x3e这些工具，都会直接提供一个命令让你可以进行操作。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e自己造一个简易的工具\x3c\/h2\x3e\n\x3cp\x3e最近面试的时候，有同学的回答让人哭笑不得：  \x3c\/p\x3e\n\x3cp\x3eQ：你们前端开发完成后是怎样打包的呢？  \x3cbr\x3eA：\x3ccode\x3enpm run build\x3c\/code\x3e。  \x3c\/p\x3e\n\x3cp\x3e[黑人问号脸.png]。经过再三确认后，该同学表示并没有研究过具体是什么，只知道执行完这个命令以后就可以了。  \x3cbr\x3e我本以为这仅仅是网上的一个段子，但没想到真的被我碰到了。_也不知道是好事儿还是坏事儿。。_  \x3c\/p\x3e\n\x3cp\x3e从我个人的角度考虑，还是建议了解下你所使用的工具。_至少看下\x3ccode\x3escripts\x3c\/code\x3e里边究竟写的是什么咯 :)_  \x3cbr\x3e\x3cem\x3eP.S. \x3ccode\x3enpm scripts\x3c\/code\x3e中不仅仅可以执行\x3ccode\x3eNPM\x3c\/code\x3e模块，普通的\x3ccode\x3eshell\x3c\/code\x3e命令都是支持的\x3c\/em\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e创建工程\x3c\/h3\x3e\n\x3cp\x3e首先的第一步，就是你需要有一个文件夹来存放你的\x3ccode\x3eNPM\x3c\/code\x3e包，因为是一个简单的示例，所以不会真实的进行上传，会使用\x3ccode\x3enpm ln\x3c\/code\x3e来代替\x3ccode\x3enpm publish\x3c\/code\x3e \x2b \x3ccode\x3enpm install\x3c\/code\x3e。  \x3c\/p\x3e\n\x3cp\x3e随便创建一个文件夹即可，文件夹的名字也并不会产生太大的影响。  \x3cbr\x3e然后需要创建一个\x3ccode\x3epackage.json\x3c\/code\x3e文件，可以通过\x3ccode\x3enpm init\x3c\/code\x3e来快速的生成，我个人更喜欢添加\x3ccode\x3e-y\x3c\/code\x3e标识来跳过一些非必填的字段。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e mkdir test-util\n\x3e cd test-util\n\x3e npm init -y\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x26gt; mkdir \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util\n\x26gt; \x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util\n\x26gt; npm init -y\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e创建执行文件\x3c\/h3\x3e\n\x3cp\x3e因为我们这个模块就是用来执行使用的，所以有没有入口文件实际上是没有必要的，我们仅仅需要创建对应的执行文件即可，需要注意的一点是：__与普通的\x3ccode\x3eJS\x3c\/code\x3e文件区别在于头部一定要写上\x3ccode\x3e#!\/usr\/bin\/env node\x3c\/code\x3e__\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22#!\/usr\/bin\/env node\n\n\/\/ index.js\nconsole.log(\x27first util\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e#!\/usr\/bin\/env node\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27first util\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e注册执行命令\x3c\/h3\x3e\n\x3cp\x3e然后就是修改\x3ccode\x3epackage.json\x3c\/code\x3e来告诉\x3ccode\x3eNPM\x3c\/code\x3e我们的执行文件在哪：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n\x2b  \x26quot;bin\x26quot;: \x26quot;.\/index.js\x26quot;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e{\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b  \x22bin\x22: \x22.\/index.js\x22\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在只有一个\x3ccode\x3ebin\x3c\/code\x3e，且要注册的命令与\x3ccode\x3epackage.json\x3c\/code\x3e中的\x3ccode\x3ename\x3c\/code\x3e字段相同时，则可以写成上边那种形式，如果要注册多个可执行命令，那么就可以写成一个\x3ccode\x3ek\/v\x3c\/code\x3e结构的参数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;bin\x26quot;: {\n    \x26quot;command1\x26quot;: \x26quot;.\/command1.js\x26quot;,\n    \x26quot;command2\x26quot;: \x26quot;.\/command2.js\x26quot;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22bin\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22command1\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22.\/command1.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22command2\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22.\/command2.js\x22\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e调用时就是 command1 | command2\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e模拟执行\x3c\/h3\x3e\n\x3cp\x3e接下来我们去找另一个文件夹模拟安装\x3ccode\x3eNPM\x3c\/code\x3e模块，再执行\x3ccode\x3enpm ln\x3c\/code\x3e就可以了，再执行对应的命令以后你应该会看到上边的\x3ccode\x3elog\x3c\/code\x3e输出了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e cd .. \x26amp;\x26amp; mkdir fake-repo \x26amp;\x26amp; cd fake-repo\n\x3e npm ln ..\/test-util\n\n\x3e test-util       # global\nfirst util\n\x3e npx test-util   # local\nfirst util\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x26gt; \x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e .. \x26amp;\x26amp; mkdir fake-repo \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e fake-repo\n\x26gt; npm ln ..\/\x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util\n\n\x26gt; \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util       \x3cspan class=\x22hljs-comment\x22\x3e# global\x3c\/span\x3e\nfirst util\n\x26gt; npx \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util   \x3cspan class=\x22hljs-comment\x22\x3e# local\x3c\/span\x3e\nfirst util\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样一个最简易的可执行包就创建完成了。\x3c\/p\x3e\n\x3cblockquote\x3enpm ln 为 npm link 的简写  \x3cbr\x3enpm ln \x26lt;模块路径\x26gt; 相当于 cd \x26lt;模块路径\x26gt; \x26amp;\x26amp; npm ln \x2b npm ln \x26lt;模块名\x26gt;  \x3cbr\x3e要注意是 \x3cstrong\x3e模块名__，而非文件夹名， __模块名\x3c\/strong\x3e 为\x3ccode\x3epackage.json\x3c\/code\x3e中所填写的\x3ccode\x3ename\x3c\/code\x3e字段\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eglobal 与 local 的区别\x3c\/h3\x3e\n\x3cp\x3e因为\x3ccode\x3enpm link\x3c\/code\x3e执行的\x3ca href=\x22https:\/\/docs.npmjs.com\/cli\/link#description\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e特性\x3c\/a\x3e，会将\x3ccode\x3eglobal\x3c\/code\x3e\x2b\x3ccode\x3elocal\x3c\/code\x3e的依赖都进行安装，所以在使用上不太好体现出两者的差异，所以我们决定将代码直接拷贝到\x3ccode\x3enode_modules\x3c\/code\x3e下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e npm unlink --no-save test-util      # 仅移除 local 的依赖\n\x3e cp -R ..\/test-util .\/node_modules\/\n\x3e npm rebuild\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x26gt; npm unlink --no-save \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util      \x3cspan class=\x22hljs-comment\x22\x3e# 仅移除 local 的依赖\x3c\/span\x3e\n\x26gt; cp -R ..\/\x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util .\/node_modules\/\n\x26gt; npm rebuild\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e因为绕过了\x3ccode\x3eNPM\x3c\/code\x3e的安装步骤，一定要记得\x3ccode\x3enpm rebuild\x3c\/code\x3e来让\x3ccode\x3eNPM\x3c\/code\x3e知道我们的包注册了\x3ccode\x3ebin\x3c\/code\x3e\x3c\/strong\x3e  \x3c\/p\x3e\n\x3cp\x3e这时候我们修改脚本文件，在脚本中添加当前执行目录的输出\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22#!\/usr\/bin\/env node\n\n- console.log(\x27first util\x27)\n\x2b console.log(process.execPath) \/\/ 返回JS文件上层文件夹的完整路径\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e#!\/usr\/bin\/env node\n\n\x3cspan class=\x22hljs-deletion\x22\x3e- console.log(\x27first util\x27)\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b console.log(process.execPath) \/\/ 返回JS文件上层文件夹的完整路径\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这时再次执行两种命令，就可以看到区别了。  \x3c\/p\x3e\n\x3cp\x3e之所以要提到\x3ccode\x3eglobal\x3c\/code\x3e与\x3ccode\x3elocal\x3c\/code\x3e，是因为在开发的过程中可能会不经意的在这里踩坑。  \x3cbr\x3e比如说我们在开发\x3ccode\x3eNode\x3c\/code\x3e项目时，经常会用到\x3ccode\x3enodemon\x3c\/code\x3e来帮助在开发期间监听文件变化并自动重启。  \x3cbr\x3e为了使用方便，很可能会将预定的一个启动命令放到\x3ccode\x3enpm scripts\x3c\/code\x3e中去，类似这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;script\x26quot;: {\n    \x26quot;start\x26quot;: \x26quot;nodemon .\/server.js\x26quot;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22script\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22start\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22nodemon .\/server.js\x22\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e两者混用会带来的问题\x3c\/h4\x3e\n\x3cp\x3e这样的项目在你本地使用是完全没有问题的，但是如果有其他的同事需要运行你的这个项目，在第一步执行\x3ccode\x3enpm start\x3c\/code\x3e时就会出异常，因为他本地可能并没有安装\x3ccode\x3enodemon\x3c\/code\x3e。  \x3c\/p\x3e\n\x3cp\x3e以及这样的做法很可能会导致一些其它包引用的问题。  \x3cbr\x3e比如说，\x3ccode\x3ewebpack\x3c\/code\x3e实际上是支持多种语言编写\x3ccode\x3econfig\x3c\/code\x3e配置文件的，就拿\x3ccode\x3eTypeScript\x3c\/code\x3e举例吧，最近也一直在用这个。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e webpack --config webpack.config.ts\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x26gt; webpack --config webpack.config.ts\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e这样的命令是完全有效的，webpack 会使用 ts 的解释器去执行对应的配置文件\x3c\/blockquote\x3e\n\x3cp\x3e因为\x3ccode\x3ewebpack\x3c\/code\x3e不仅仅支持这一种解释器，有很多种，类似\x3ccode\x3eCoffeeScript\x3c\/code\x3e也是支持的。  \x3cbr\x3e所以\x3ccode\x3ewebpack\x3c\/code\x3e肯定不能够将各种语言的解释器依赖都放到自身的依赖模块中去，而是会根据传入\x3ccode\x3econfig\x3c\/code\x3e的文件后缀名来动态的判断应该添加哪些解释器，这些在\x3ccode\x3ewebpack\x3c\/code\x3e的源码中很容易找到：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/webpack\/webpack-cli\/blob\/master\/bin\/convert-argv.js#L88\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e获取配置文件后缀\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/webpack\/webpack-cli\/blob\/master\/bin\/convert-argv.js#L140\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e获取对应的解释器并引入模块注册\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e根据\x3ccode\x3ewebpack\x3c\/code\x3e动态获取解释器的模块\x3ca href=\x22https:\/\/www.npmjs.com\/package\/interpret\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3einterpret\x3c\/a\x3e来看，\x3ccode\x3e.ts\x3c\/code\x3e类型的文件会引入这些模块：\x3ccode\x3e[\x27ts-node\/register\x27, \x27typescript-node\/register\x27, \x27typescript-register\x27, \x27typescript-require\x27]\x3c\/code\x3e，但是在\x3ccode\x3ewebpack\x3c\/code\x3e的依赖中你是找不到这些的。  \x3c\/p\x3e\n\x3cp\x3e在源码中也可以看到，\x3ccode\x3ewebpack\x3c\/code\x3e在执行\x3ccode\x3econfig\x3c\/code\x3e之前动态的引入了这些解释器模块。  \x3c\/p\x3e\n\x3cp\x3e这里也可以稍微提一下\x3ccode\x3eNode\x3c\/code\x3e中引入全局模块的一些事儿，我们都知道，通过\x3ccode\x3enpm install\x3c\/code\x3e安装的模块，都可以通过\x3ccode\x3erequire(\x27XXX\x27)\x3c\/code\x3e来直接引用，如果一些第三方模块需要引入某些其他的模块，那么这个模块也需要存在于它所处目录下的\x3ccode\x3enode_modules\x3c\/code\x3e文件夹中才能够正确的引入。  \x3c\/p\x3e\n\x3cp\x3e首先有一点大家应该都知道的，目前版本的\x3ccode\x3eNPM\x3c\/code\x3e，不会再有黑洞那样深的\x3ccode\x3enode_modules\x3c\/code\x3e了，而是会将依赖平铺放在\x3ccode\x3enode_modules\x3c\/code\x3e文件夹下。比如说你引入的模块\x3ccode\x3eA\x3c\/code\x3e，\x3ccode\x3eA\x3c\/code\x3e的内部引用了模块\x3ccode\x3eB\x3c\/code\x3e，那么你也可以直接引用模块\x3ccode\x3eB\x3c\/code\x3e，因为\x3ccode\x3eA\x3c\/code\x3e和\x3ccode\x3eB\x3c\/code\x3e都存在于\x3ccode\x3enode_modules\x3c\/code\x3e下。  \x3c\/p\x3e\n\x3cp\x3e还是拿我们刚才做的那个小工具来实验，我们在\x3ccode\x3efake-repo\x3c\/code\x3e中添加\x3ccode\x3eexpress\x3c\/code\x3e的依赖，然后在\x3ccode\x3etest-util\x3c\/code\x3e中添加\x3ccode\x3ekoa\x3c\/code\x3e的依赖，并在\x3ccode\x3etest-util\/index.js\x3c\/code\x3e中\x3ccode\x3erequire\x3c\/code\x3e上述的两个模块。  \x3c\/p\x3e\n\x3cp\x3e你会发现，\x3ccode\x3enpx test-util\x3c\/code\x3e运行正确，而\x3ccode\x3etest-util\x3c\/code\x3e却直接报错了，提示\x3ccode\x3eexpress\x3c\/code\x3e不存在。\x3c\/p\x3e\n\x3cp\x3e我们可以通过\x3ccode\x3eNPM\x3c\/code\x3e的一个命令来解释这个原因：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e npm root\n\x3ccurrent\x3e\/node_modules\n\x3e npm root -g\n\x3cglobal\x3e\/node_modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x26gt; npm root\n\x26lt;current\x26gt;\/node_modules\n\x26gt; npm root -g\n\x26lt;global\x26gt;\/node_modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样输出两个路径应该就能看的比较明白了，\x3ccode\x3ekoa\x3c\/code\x3e模块是没有问题的，因为都是存在于这些路径下的\x3ccode\x3enode_modules\x3c\/code\x3e，而\x3ccode\x3eexpress\x3c\/code\x3e则只存在于\x3ccode\x3e\x26lt;current\x26gt;\/node_modules\/test-util\/node_modules\x3c\/code\x3e下，全局调用下，\x3ccode\x3erequire\x3c\/code\x3e是找不到\x3ccode\x3eexpress\x3c\/code\x3e的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22# global 下的结构\n.\n├── \/usr\/local\/lib\/node_modules   # npm root 的位置\n│\x26nbsp;  ├── koa\n│\x26nbsp;\x26nbsp; └── test-util                 # 执行脚本所处的位置\n└── \x3cworkspace\x3e                   # 本地的项目\n \x26nbsp;\x26nbsp; ├── node_modules\n \x26nbsp;\x26nbsp; │\x26nbsp;  └── express\n \x26nbsp;\x26nbsp; └── .\n\n# local 下的结构\n└── \x3cworkspace\x3e                   # 本地的项目\n    ├── node_modules              # npm root 的位置\n    │\x26nbsp;  ├── koa\n    │\x26nbsp;  ├── test-util             # 执行脚本所处的位置\n    │\x26nbsp;  └── express\n    └── .\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e# global 下的结构\x3c\/span\x3e\n.\n├── \/usr\/\x3cspan class=\x22hljs-built_in\x22\x3elocal\x3c\/span\x3e\/lib\/node_modules   \x3cspan class=\x22hljs-comment\x22\x3e# npm root 的位置\x3c\/span\x3e\n│\x26nbsp;  ├── koa\n│\x26nbsp;\x26nbsp; └── \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util                 \x3cspan class=\x22hljs-comment\x22\x3e# 执行脚本所处的位置\x3c\/span\x3e\n└── \x26lt;workspace\x26gt;                   \x3cspan class=\x22hljs-comment\x22\x3e# 本地的项目\x3c\/span\x3e\n \x26nbsp;\x26nbsp; ├── node_modules\n \x26nbsp;\x26nbsp; │\x26nbsp;  └── express\n \x26nbsp;\x26nbsp; └── .\n\n\x3cspan class=\x22hljs-comment\x22\x3e# local 下的结构\x3c\/span\x3e\n└── \x26lt;workspace\x26gt;                   \x3cspan class=\x22hljs-comment\x22\x3e# 本地的项目\x3c\/span\x3e\n    ├── node_modules              \x3cspan class=\x22hljs-comment\x22\x3e# npm root 的位置\x3c\/span\x3e\n    │\x26nbsp;  ├── koa\n    │\x26nbsp;  ├── \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-util             \x3cspan class=\x22hljs-comment\x22\x3e# 执行脚本所处的位置\x3c\/span\x3e\n    │\x26nbsp;  └── express\n    └── .\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以这也从侧面说明了为什么\x3ccode\x3ewebpack\x3c\/code\x3e可以直接在自己的文件中引用并不存在于自己模块下的依赖。  \x3c\/p\x3e\n\x3cp\x3e因为\x3ccode\x3ewebpack\x3c\/code\x3e认为如果你要使用\x3ccode\x3eTypeScript\x3c\/code\x3e，那么一定会有对应的依赖，这个模块就是与\x3ccode\x3ewebpack\x3c\/code\x3e同级的依赖，也就是说\x3ccode\x3ewebpack\x3c\/code\x3e可以放心的进行\x3ccode\x3erequire\x3c\/code\x3e，大致这样的结构：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├── node_modules    # npm root 的位置\n│\x26nbsp;\x26nbsp; ├── webpack\n│\x26nbsp;\x26nbsp; └── typescript\n└── .               # 在这里执行脚本\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e├── node_modules    \x3cspan class=\x22hljs-comment\x22\x3e# npm root 的位置\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; ├── webpack\n│\x26nbsp;\x26nbsp; └── typescript\n└── .               \x3cspan class=\x22hljs-comment\x22\x3e# 在这里执行脚本\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以及一个相反的栗子🌰，如果有些依赖在\x3ccode\x3eglobal\x3c\/code\x3e下安装了，但是没有在\x3ccode\x3elocal\x3c\/code\x3e下进行安装，也许会出现这样的情况，命令直接调用的话，完全没有问题，但是放到\x3ccode\x3enpm scripts\x3c\/code\x3e中，或者使用\x3ccode\x3enpx\x3c\/code\x3e来进行调用，则发现提示模块不存在各种balabala的异常。  \x3cbr\x3e\x3cem\x3eP.S. 在\x3ccode\x3ewebpack\x3c\/code\x3e中，如果模块不存在，并不会给你报错，而是默认按照\x3ccode\x3eJS\x3c\/code\x3e的方式进行解析，所以可能会遇到提示语法错误，这时候不用想了，一定是缺少依赖\x3c\/em\x3e  \x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e也可以说\x3ccode\x3enpx\x3c\/code\x3e是个好东西，尽量使用\x3ccode\x3enpx\x3c\/code\x3e的方式来调用，能少踩一些\x3ccode\x3eglobal\x3c\/code\x3e、\x3ccode\x3elocal\x3c\/code\x3e的坑\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e最终的上线\x3c\/h2\x3e\n\x3cp\x3e当然了，真实的开发完一个工具以后，就需要进行提交到\x3ccode\x3eNPM\x3c\/code\x3e上了，这个也是一个很简单的步骤，\x3ccode\x3enpm publish\x3c\/code\x3e即可，会自动获取\x3ccode\x3epackage.json\x3c\/code\x3e中的\x3ccode\x3ename\x3c\/code\x3e作为包名（重复了会报错）。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e小结\x3c\/h2\x3e\n\x3cp\x3e总结了一下关于\x3ccode\x3eNPM\x3c\/code\x3e可执行的包相关的一些东东，希望能够帮大家简单的理解这是个什么，以及\x3ccode\x3eglobal\x3c\/code\x3e和\x3ccode\x3elocal\x3c\/code\x3e下一些可能会遇到的问题，希望能够让大家绕过这些坑。  \x3cbr\x3e如文中有误还请指出，\x3ccode\x3eNPM\x3c\/code\x3e工具相关的问题也欢迎来讨论。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e参考资料\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/docs.npmjs.com\/cli\/bin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enpm-bin\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/webpack\/webpack-cli\/blob\/master\/bin\/cli.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack-cli\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>了解可执行的NPM包</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016818122">https://segmentfault.com/a/1190000016818122</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/myfwty9876l/" target="_blank">https://alili.tech/archive/myfwty9876l/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/3xwbcv1w21i/">前端微服务化进阶2 - 本地开发指南<aside class="dates">2019-04-22</aside></a></li><li><a href="/archive/9xuojm75d2a/">前端微服务化进阶1 - 基于umi的子模块方案<aside class="dates">2019-04-13</aside></a></li><li><a href="/archive/ol9qis0n8xe/">2019年04月Github Javascript开源项目精选<aside class="dates">2019-04-08</aside></a></li><li><a href="/archive/7815p445rtf/">记一次MongoDB迁移 - 备份与恢复<aside class="dates">2019-03-27</aside></a></li><li><a href="/archive/a5ficy1jp7n/">2019年03月Github Javascript开源项目精选<aside class="dates">2019-03-08</aside></a></li><li><a href="/archive/nyhmtbanv2e/">Alili Weekly 前端周刊 第二十一期<aside class="dates">2019-03-08</aside></a></li><li><a href="/archive/304a32r2py8/">30分钟精通React今年最劲爆的新特性——React Hooks<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/sj4oqgzx0rk/">CSS6：flex布局<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/wedm7eypuhb/">ES6 系列之 Babel 将 Async 编译成了什么样子<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/cazifdrck0u/">ES6 系列之我们来聊聊 Async<aside class="dates">2019-03-02</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>
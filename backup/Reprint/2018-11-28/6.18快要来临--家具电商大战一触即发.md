---
title: '6.18快要来临--家具电商大战一触即发' 
date: 2018-11-28 2:30:11
hidden: true
slug: fe500xfel6t
categories: [reprint]
---

{{< raw >}}
<p>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;---&#x7535;&#x5546;&#x5BB6;&#x5177;&#x5165;&#x95E8;&#x7BC7;</p><h1 id="articleHeader0">&#x524D;&#x8A00;</h1><p>&#x4ECA;&#x5E74;&#x662F;&#x5C0F;&#x7A0B;&#x5E8F;&#x5F88;&#x706B;&#x7684;&#x4E00;&#x5E74;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x8FD1;&#x5728;&#x81EA;&#x5B66;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF0C;&#x6240;&#x4EE5;&#x6253;&#x7B97;&#x81EA;&#x5DF1;&#x64B8;&#x4E00;&#x4E2A;&#x5C0F;&#x7A0B;&#x5E8F;&#x51FA;&#x6765;&#xFF0C;&#x7531;&#x4E8E;&#x81EA;&#x5DF1;&#x624D;&#x521A;&#x521A;&#x81EA;&#x5B66;&#x4E0D;&#x4E45;&#x3002;&#x5C31;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#x7684;&#x5BB6;&#x5177;&#x5C0F;&#x7A0B;&#x5E8F;&#x3002;&#x5F53;&#x7136;&#x5728;&#x8FD9;&#x5176;&#x4E2D;&#x4E5F;&#x9047;&#x5230;&#x4E86;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x548C;bug,&#x5728;&#x8FD9;&#x5C31;&#x548C;&#x5927;&#x5BB6;&#x5206;&#x4EAB;&#x4E00;&#x4E0B;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x5E2E;&#x52A9;&#x66F4;&#x591A;&#x7684;&#x670B;&#x53CB;&#x3002;&#x5982;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#xFF0C;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x63D0;&#x51FA;&#x5B9D;&#x8D35;&#x7684;&#x5EFA;&#x8BAE;&#x54C8;&#x3002;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x4E00;&#x8D77;&#x6210;&#x957F;&#xFF0C;&#x4E00;&#x8D77;&#x8FDB;&#x6B65;&#x3002;<br><span class="img-wrap"><img data-src="/img/bVbcbzD?w=366&amp;h=220" src="https://static.alili.tech/img/bVbcbzD?w=366&amp;h=220" alt="u=289489651,2285252710&amp;fm=27&amp;gp=0.jpg" title="u=289489651,2285252710&amp;fm=27&amp;gp=0.jpg" style="cursor:pointer;display:inline"></span></p><h2 id="articleHeader1">&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;</h2><p>&#x4F17;&#x6240;&#x5468;&#x77E5;&#xFF0C;&#x968F;&#x7740;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;app&#x51FA;&#x73B0;&#x5728;&#x4E86;App&#x5546;&#x57CE;&#xFF0C;&#x5BFC;&#x81F4;&#x624B;&#x673A;&#x4E0B;&#x8F7D;&#x591A;&#x4E86;app&#x4F1A;&#x5BFC;&#x81F4;&#x624B;&#x673A;&#x5361;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x65F6;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x817E;&#x7A7A;&#x800C;&#x51FA;&#x3002;&#x53EA;&#x8981;&#x7528;&#x6237;&#x626B;&#x4E00;&#x626B;&#x6216;&#x8005;&#x641C;&#x7D22;&#x4E00;&#x4E0B;&#x5C31;&#x80FD;&#x6253;&#x5F00;&#x5E94;&#x7528;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x6211;&#x4EEC;&#x4E0B;&#x8F7D;app&#x7684;&#x6B21;&#x6570;&#x3002;<br><span class="img-wrap"><img data-src="/img/bVbcauX?w=500&amp;h=500" src="https://static.alili.tech/img/bVbcauX?w=500&amp;h=500" alt="u=296068801,2558057152&amp;fm=27&amp;gp=0.jpg" title="u=296068801,2558057152&amp;fm=27&amp;gp=0.jpg" style="cursor:pointer;display:inline"></span></p><ul><li>&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF1A;WXML(HTML),WXSS(CSS),Javascript</li><li>&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF1A;vscode&#xFF0C;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</li><li>&#x5F00;&#x53D1;&#x6D41;&#x7A0B;&#xFF1A;&#x4E0B;&#x8F7D;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;&#x4E4B;&#x540E;&#x6CE8;&#x518C;&#x4E00;&#x4E0B;&#x5C31;&#x4F1A;&#x6709;&#x81EA;&#x5DF1;&#x7684;AppID&#xFF0C;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x6709;&#x5B98;&#x65B9;&#x7684;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x6587;&#x6863; &#x5F00;&#x53D1;&#x6587;&#x6863;</li></ul><p>&#x63A5;&#x4E0B;&#x6765;&#x8BF4;&#x8BF4;&#x6211;&#x505A;&#x7684;&#x5C0F;&#x7A0B;&#x5E8F;&#x5427;<br>&#x4E07;&#x4E8B;&#x5F00;&#x5934;&#x96BE;&#xFF0C;&#x5173;&#x952E;&#x662F;&#x8E0F;&#x51FA;&#x7B2C;&#x4E00;&#x6B65;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x5C06;&#x5206;&#x4EAB;&#x4E00;&#x4E0B;&#x6211;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x4EE5;&#x53CA;&#x5728;&#x5B9E;&#x9645;&#x8FC7;&#x7A0B;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x5751;&#x3002; &#x9996;&#x5148;&#x5148;&#x770B;&#x770B;&#x9996;&#x9875;&#x6548;&#x679C;&#x5427;<br><span class="img-wrap"><img data-src="/img/bVbcboP?w=324&amp;h=551" src="https://static.alili.tech/img/bVbcboP?w=324&amp;h=551" alt="&#x56FE;&#x7247;&#x63CF;&#x8FF0;" title="&#x56FE;&#x7247;&#x63CF;&#x8FF0;" style="cursor:pointer"></span></p><p>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#xFF0C;&#x4E3B;&#x9875;&#x4E1C;&#x897F;&#x4E5F;&#x4E0D;&#x591A;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x5E03;&#x5C40;&#x95EE;&#x9898;&#x3002; wxss&#x4EE3;&#x7801;&#xFF1A;</p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text=".img-box image{
  width: 100%;
  height: 100%;
}
.img-box image:after{
  content: &quot;&quot;;
  position: absolute;
  bottom: 0;
  width: 100%;
  color: #fff;
  padding: 50px 20px;
}" title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs css"><code><span class="hljs-selector-class">.img-box</span> <span class="hljs-selector-tag">image</span>{
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}
<span class="hljs-selector-class">.img-box</span> <span class="hljs-selector-tag">image</span><span class="hljs-selector-pseudo">:after</span>{
  <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;&quot;</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">50px</span> <span class="hljs-number">20px</span>;
}</code></pre><h2 id="articleHeader2">1&#xFF1A;&#x5BB6;&#x5177;&#x7684;&#x8F6E;&#x64AD;&#x6548;&#x679C;&#x5B9E;&#x73B0;</h2><p>&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x8F6E;&#x64AD;&#x5B9E;&#x73B0;&#x662F;&#x7528;&#x4E86;swiper&#x7EC4;&#x4EF6;&#xFF0C;&#x6ED1;&#x5757;&#x89C6;&#x56FE;&#x5BB9;&#x5668;&#x91CC;&#x9762;&#x6709;indicator-dots,autoplay,setinterval&#x7B49;&#x5C5E;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x81EA;&#x52A8;&#x64AD;&#x653E;&#xFF0C;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x3002; &#x63D2;&#x5165;&#x7684;&#x56FE;&#x7247;&#x53EF;&#x4EE5;&#x7528;wx:for&#x6765;&#x5FAA;&#x73AF;&#x3002;</p><p>wxml&#x4EE3;&#x7801;&#xFF1A;</p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="&lt;swiper class=&quot;section &quot;indicator-dots=&quot;"{{"true"}}"&quot; autoplay=&quot;autoplay&quot; setInterval=&quot;3000&quot; duration=&quot;500&quot;&gt;
  &lt;view class=&quot;img-box&quot;&gt;
    &lt;block wx:for=&quot;"{{"slides"}}"&quot; wx:key=&quot;id&quot;&gt;
      &lt;swiper-item&gt;
        &lt;image src=&quot;"{{"item.image"}}"&quot; mode=&quot;aspectFill&quot; /&gt;
      &lt;/swiper-item&gt;
    &lt;/block&gt;
  &lt;/view&gt;
&lt;/swiper&gt;" title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs django"><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">swiper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;section &quot;</span><span class="hljs-attr">indicator-dots</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">"{{"true"}}"</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">autoplay</span>=<span class="hljs-string">&quot;autoplay&quot;</span> <span class="hljs-attr">setInterval</span>=<span class="hljs-string">&quot;3000&quot;</span> <span class="hljs-attr">duration</span>=<span class="hljs-string">&quot;500&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;img-box&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">block</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">"{{"slides"}}"</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">wx:key</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">swiper-item</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">"{{"item.image"}}"</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;aspectFill&quot;</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">swiper-item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">swiper</span>&gt;</span></span></code></pre><p>&#x6211;&#x8FD9;&#x91CC;&#x628A;&#x56FE;&#x7247;&#x653E;&#x5728;&#x4E86;js&#x91CC;&#x9762;&#x904D;&#x5386;&#x3002;&#x6548;&#x679C;&#x5982;&#x56FE;&#x6240;&#x793A;<br><span class="img-wrap"><img data-src="/img/bVbb8w4?w=330&amp;h=274" src="https://static.alili.tech/img/bVbb8w4?w=330&amp;h=274" alt="&#x56FE;&#x7247;&#x63CF;&#x8FF0;" title="&#x56FE;&#x7247;&#x63CF;&#x8FF0;" style="cursor:pointer;display:inline"></span></p><h2 id="articleHeader3">2&#xFF1A;navigate&#x7684;&#x8DF3;&#x8F6C;&#x95EE;&#x9898;</h2><p>&#x5728;&#x70B9;&#x51FB;&#x52A0;&#x5165;&#x8D2D;&#x7269;&#x8F66;&#x4EE5;&#x540E;&#xFF0C;&#x52A0;&#x5165;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;&#x672C;&#x8BE5;&#x8DF3;&#x8F6C;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x8FDF;&#x8FDF;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x6548;&#x679C;&#x4E5F;&#x6CA1;&#x6709;&#x62A5;&#x9519;&#xFF0C;&#x6211;&#x4EE5;&#x4E3A;&#x6211;&#x62FC;&#x5199;&#x6216;&#x8DEF;&#x5F84;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x6211;&#x68C0;&#x67E5;&#x4E4B;&#x540E;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x554A;&#xFF0C;&#x540E;&#x6765;&#x7EC8;&#x4E8E;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x5751;&#x3002; &#x8FD9;&#x91CC;&#x8981;&#x8DF3;&#x8F6C;&#x7684;&#x662F;tabBar&#x7684;&#x9875;&#x9762;&#xFF0C;&#x6309;&#x7167;&#x9ED8;&#x8BA4;&#x7684;&#x8DF3;&#x8F6C;&#x662F;&#x4E0D;&#x5141;&#x8BB8;&#x7684;&#xFF0C;&#x67E5;&#x770B;&#x4E86;&#x4E00;&#x4E0B;&#x5F00;&#x53D1;&#x6587;&#x6863;&#x624D;&#x53D1;&#x73B0;&#x4E86;&#x95EE;&#x9898;&#x7684;&#x6240;&#x5728;&#x3002;</p><p><strong>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF1A;&#x628A;navigateTo&#x6362;&#x6210;switchTab&#x5C31;&#x53EF;&#x4EE5;&#x4E86; &#x8DF3;&#x8F6C;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5F00;&#x53D1;&#x6587;&#x6863;&#x3002;<a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui-navigate.html#wxnavigatetoobject" rel="nofollow noreferrer" target="_blank">&#x8DF3;&#x8F6C;&#x9875;&#x9762;&#x7684;api</a></strong></p><h2 id="articleHeader4">3&#xFF1A;&#x5546;&#x54C1;&#x5982;&#x4F55;&#x52A0;&#x5165;&#x8D2D;&#x7269;&#x8F66;&#x4E4B;&#x540E;&#x5982;&#x4F55;&#x63A7;&#x5236;&#x8D2D;&#x4E70;&#x5546;&#x54C1;&#x7684;&#x6570;&#x91CF;&#x5E76;&#x8BA1;&#x7B97;&#x4EF7;&#x683C;</h2><p>&#x672C;&#x6765;&#x60F3;&#x505A;&#x7684;&#x662F;&#x70B9;&#x51FB;&#x56FE;&#x7247;&#x8FDB;&#x5165;&#x8BE6;&#x60C5;&#x518D;&#x70B9;&#x51FB;&#x52A0;&#x5165;&#x8D2D;&#x7269;&#x8F66;&#x5C31;&#x80FD;&#x4FDD;&#x5B58;&#x5230;&#x540E;&#x53F0;&#x7684;&#x8D2D;&#x7269;&#x8F66;&#x91CC; &#x4F46;&#x662F;&#x7531;&#x4E8E;&#x81EA;&#x5B66;&#x7684;&#x77E5;&#x8BC6;&#x6709;&#x9650;&#xFF0C;&#x540E;&#x7AEF;&#x76EE;&#x524D;&#x8FD8;&#x6CA1;&#x5B66;&#xFF0C;&#x53EA;&#x80FD;&#x52A0;&#x5165;&#x4E00;&#x4E2A;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;&#x8DF3;&#x8F6C;&#x5230;&#x8D2D;&#x7269;&#x8F66;&#x3002;<br><span class="img-wrap"><img data-src="/img/bVbcbuT?w=300&amp;h=300" src="https://static.alili.tech/img/bVbcbuT?w=300&amp;h=300" alt="u=1654774462,4033204537&amp;fm=27&amp;gp=0.jpg" title="u=1654774462,4033204537&amp;fm=27&amp;gp=0.jpg" style="cursor:pointer;display:inline"></span></p><p>&#x63A5;&#x4E0B;&#x6765;&#x8BA1;&#x5165;&#x6B63;&#x9898;&#xFF1A;&#x5982;&#x4F55;&#x63A7;&#x5236;&#x8D2D;&#x7269;&#x8F66;&#x8D2D;&#x4E70;&#x7684;&#x6570;&#x91CF;&#x548C;&#x8BA1;&#x7B97;&#x603B;&#x4EF7;&#xFF1F;&#x5148;&#x5728;js&#x91CC;&#x9762;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;cart&#x7A7A;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x8D4B;&#x7ED9;&#x8FD9;&#x4E2A;&#x7A7A;&#x6570;&#x7EC4;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x53D6;&#x8FD9;&#x4E2A;&#x503C;&#x3002;&#x4E4B;&#x540E;&#x7ED9;&#x5546;&#x54C1;&#x7684;&#x72B6;&#x6001;&#x9ED8;&#x8BA4;&#x4E3A;&#x9009;&#x62E9;&#x72B6;&#x6001;&#xFF0C;&#x70B9;&#x51FB;&#x4E00;&#x4E0B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x72B6;&#x6001;&#x53D8;&#x4E3A;&#x53D6;&#x6D88;&#x3002;&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x4E4B;&#x540E;&#x8BA1;&#x7B97;&#x51FA;&#x9009;&#x62E9;&#x5546;&#x54C1;&#x7684;&#x603B;&#x4EF7;&#x3002;&#x5148;&#x770B;&#x8FD9;&#x4E2A;&#x6548;&#x679C;&#x5427;<br><span class="img-wrap"><img data-src="/img/bVbcbut?w=324&amp;h=551" src="https://static.alili.tech/img/bVbcbut?w=324&amp;h=551" alt="&#x56FE;&#x7247;&#x63CF;&#x8FF0;" title="&#x56FE;&#x7247;&#x63CF;&#x8FF0;" style="cursor:pointer"></span></p><p>js&#x4EE3;&#x7801;&#xFF1A;</p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="selectList(e){
    let selectAllStatus = this.data.selectAllStatus;
    const index=e.currentTarget.dataset.index;
    let carts=this.data.carts;
    const selected=carts[index].selected;
    carts[index].selected=!selected;
    selectAllStatus = carts[index].selected;
    // if( carts[index].selected=!selected){
    //   selectAllStatus:false;
    // }
    this.setData({
      carts,  
      selectAllStatus,
    });
    this.getTotalPrice();
  },
  deleteList(e) {
    const index = e.currentTarget.dataset.index;
    let carts = this.data.carts;
    carts.splice(index,1);
    this.setData({
      carts: carts
    });
    if(!carts.length){
      this.setData({
        hasList: false
      });
    }else{
      this.getTotalPrice();
    }
  },
  addCount (e){
    const index = e.currentTarget.dataset.index;
    let carts = this.data.carts;
    let num = carts[index].num;
    num++;
    carts[index].num = num
    this.setData({
      carts
    })
    this.getTotalPrice();
  },
  minuCount(e){
    const index = e.currentTarget.dataset.index;
    let carts = this.data.carts;
    let num = carts[index].num;
    if(num&lt;=1) return false;
    num--;
    carts[index].num = num
    this.setData({
      carts
    });
    this.getTotalPrice();
  },
  selectAll(e){
    let selectAllStatus = this.data.selectAllStatus;
    selectAllStatus = !selectAllStatus;
    let carts =this.data.carts;
    for(let i=0;i&lt;carts.length;i++){
      if( carts[i].selected=!selectAllStatus){
        selectAllStatus:false
      }
      carts[i].selected=selectAllStatus;
      
    }
    this.setData({
      carts,
      selectAllStatus
    })
    this.getTotalPrice();
  },
  getTotalPrice(){
    let carts = this.data.carts;
    let total = 0;
    for(let i =0;i&lt;carts.length;i++){
      // total += carts[i].num *carts[i].price;
      if(carts[i].selected){
        total+= carts[i].num * carts[i].price;

      }
    }
    this.setData({
      totalPrice:total.toFixed(2)
    })
  }" title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs kotlin"><code>selectList(e){
    let selectAllStatus = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.selectAllStatus;
    const index=e.currentTarget.dataset.index;
    let carts=<span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.carts;
    const selected=carts[index].selected;
    carts[index].selected=!selected;
    selectAllStatus = carts[index].selected;
    <span class="hljs-comment">// if( carts[index].selected=!selected){</span>
    <span class="hljs-comment">//   selectAllStatus:false;</span>
    <span class="hljs-comment">// }</span>
    <span class="hljs-keyword">this</span>.setData({
      carts,  
      selectAllStatus,
    });
    <span class="hljs-keyword">this</span>.getTotalPrice();
  },
  deleteList(e) {
    const index = e.currentTarget.dataset.index;
    let carts = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.carts;
    carts.splice(index,<span class="hljs-number">1</span>);
    <span class="hljs-keyword">this</span>.setData({
      carts: carts
    });
    <span class="hljs-keyword">if</span>(!carts.length){
      <span class="hljs-keyword">this</span>.setData({
        hasList: <span class="hljs-literal">false</span>
      });
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-keyword">this</span>.getTotalPrice();
    }
  },
  addCount (e){
    const index = e.currentTarget.dataset.index;
    let carts = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.carts;
    let num = carts[index].num;
    num++;
    carts[index].num = num
    <span class="hljs-keyword">this</span>.setData({
      carts
    })
    <span class="hljs-keyword">this</span>.getTotalPrice();
  },
  minuCount(e){
    const index = e.currentTarget.dataset.index;
    let carts = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.carts;
    let num = carts[index].num;
    <span class="hljs-keyword">if</span>(num&lt;=<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    num--;
    carts[index].num = num
    <span class="hljs-keyword">this</span>.setData({
      carts
    });
    <span class="hljs-keyword">this</span>.getTotalPrice();
  },
  selectAll(e){
    let selectAllStatus = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.selectAllStatus;
    selectAllStatus = !selectAllStatus;
    let carts =<span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.carts;
    <span class="hljs-keyword">for</span>(let i=<span class="hljs-number">0</span>;i&lt;carts.length;i++){
      <span class="hljs-keyword">if</span>( carts[i].selected=!selectAllStatus){
        selectAllStatus:<span class="hljs-literal">false</span>
      }
      carts[i].selected=selectAllStatus;
      
    }
    <span class="hljs-keyword">this</span>.setData({
      carts,
      selectAllStatus
    })
    <span class="hljs-keyword">this</span>.getTotalPrice();
  },
  getTotalPrice(){
    let carts = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.carts;
    let total = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(let i =<span class="hljs-number">0</span>;i&lt;carts.length;i++){
      <span class="hljs-comment">// total += carts[i].num *carts[i].price;</span>
      <span class="hljs-keyword">if</span>(carts[i].selected){
        total+= carts[i].num * carts[i].price;

      }
    }
    <span class="hljs-keyword">this</span>.setData({
      totalPrice:total.toFixed(<span class="hljs-number">2</span>)
    })
  }</code></pre><h2 id="articleHeader5">4&#xFF1A;&#x5982;&#x4F55;&#x83B7;&#x53D6;&#x767B;&#x5F55;&#x5FAE;&#x4FE1;&#x7684;&#x7528;&#x6237;&#x7684;&#x5934;&#x50CF;&#x548C;&#x4FE1;&#x606F;</h2><ol><li>&#x4F7F;&#x7528;wx.getUserInfo&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x5FAE;&#x4FE1;&#x5934;&#x50CF;&#xFF0C;&#x6635;&#x79F0;&#x3002;</li><li>&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;&#x5C0F;&#x7A0B;&#x5E8F;wx.login API&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;wx.getUserInfo&#x662F;&#x4E0D;&#x80FD;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#x7684;&#xFF0C;&#x5982;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x7684;openid&#x3002; &#x6211;&#x8FD9;&#x91CC;&#x662F;&#x7528;&#x7684;&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;</li></ol><p>wxml&#x4EE3;&#x7801;&#xFF1A;</p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="&lt;view class=&quot;userinfo&quot;&gt;
          &lt;button wx:if=&quot;"{{"!hasUserInfo &amp;&amp; canIUse"}}"&quot; open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;getUserInfo&quot;&gt; &#x83B7;&#x53D6;&#x5934;&#x50CF;&#x6635;&#x79F0; &lt;/button&gt;
          &lt;block wx:else&gt;
            &lt;image bindtap=&quot;bindViewTap&quot; class=&quot;userinfo-avatar&quot; src=&quot;"{{"userInfo.avatarUrl"}}"&quot; background-size=&quot;cover&quot;&gt;&lt;/image&gt;
            &lt;text class=&quot;userinfo-nickname&quot;&gt;"{{"userInfo.nickName"}}"&lt;/text&gt;
          &lt;/block&gt;
        &lt;/view&gt;
js&#x4EE3;&#x7801;&#xFF1A;

onLoad: function () {
    if (app.globalData.userInfo) {
      this.setData({
        userInfo: app.globalData.userInfo,
        hasUserInfo: true
      })
    } else if (this.data.canIUse){
      // &#x7531;&#x4E8E; getUserInfo &#x662F;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5728; Page.onLoad &#x4E4B;&#x540E;&#x624D;&#x8FD4;&#x56DE;
      // &#x6240;&#x4EE5;&#x6B64;&#x5904;&#x52A0;&#x5165; callback &#x4EE5;&#x9632;&#x6B62;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;
      app.userInfoReadyCallback = res =&gt; {
        this.setData({
          userInfo: res.userInfo,
          hasUserInfo: true
        })
      }
    } else {
      // &#x5728;&#x6CA1;&#x6709; open-type=getUserInfo &#x7248;&#x672C;&#x7684;&#x517C;&#x5BB9;&#x5904;&#x7406;
      wx.getUserInfo({
        success: res =&gt; {
          app.globalData.userInfo = res.userInfo
          this.setData({
            userInfo: res.userInfo,
            hasUserInfo: true
          })
        }
      })
    }
  },
  getUserInfo: function(e) {
    console.log(e)
    app.globalData.userInfo = e.detail.userInfo
    this.setData({
      userInfo: e.detail.userInfo,
      hasUserInfo: true
    })
  }" title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs stylus"><code>&lt;view class=<span class="hljs-string">&quot;userinfo&quot;</span>&gt;
          &lt;<span class="hljs-selector-tag">button</span> wx:<span class="hljs-keyword">if</span>=<span class="hljs-string">&quot;"{{"!hasUserInfo &amp;&amp; canIUse"}}"&quot;</span> open-type=<span class="hljs-string">&quot;getUserInfo&quot;</span> bindgetuserinfo=<span class="hljs-string">&quot;getUserInfo&quot;</span>&gt; &#x83B7;&#x53D6;&#x5934;&#x50CF;&#x6635;&#x79F0; &lt;/button&gt;
          &lt;block wx:<span class="hljs-keyword">else</span>&gt;
            &lt;image bindtap=<span class="hljs-string">&quot;bindViewTap&quot;</span> class=<span class="hljs-string">&quot;userinfo-avatar&quot;</span> src=<span class="hljs-string">&quot;"{{"userInfo.avatarUrl"}}"&quot;</span> <span class="hljs-attribute">background-size</span>=<span class="hljs-string">&quot;cover&quot;</span>&gt;&lt;/image&gt;
            &lt;text class=<span class="hljs-string">&quot;userinfo-nickname&quot;</span>&gt;"{{"userInfo.nickName"}}"&lt;/text&gt;
          &lt;/block&gt;
        &lt;/view&gt;
js&#x4EE3;&#x7801;&#xFF1A;

onLoad: function () {
    <span class="hljs-keyword">if</span> (app<span class="hljs-selector-class">.globalData</span><span class="hljs-selector-class">.userInfo</span>) {
      this.setData({
        userInfo: app<span class="hljs-selector-class">.globalData</span><span class="hljs-selector-class">.userInfo</span>,
        hasUserInfo: true
      })
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (this<span class="hljs-selector-class">.data</span><span class="hljs-selector-class">.canIUse</span>){
      <span class="hljs-comment">// &#x7531;&#x4E8E; getUserInfo &#x662F;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5728; Page.onLoad &#x4E4B;&#x540E;&#x624D;&#x8FD4;&#x56DE;</span>
      <span class="hljs-comment">// &#x6240;&#x4EE5;&#x6B64;&#x5904;&#x52A0;&#x5165; callback &#x4EE5;&#x9632;&#x6B62;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;</span>
      app<span class="hljs-selector-class">.userInfoReadyCallback</span> = res =&gt; {
        this.setData({
          userInfo: res<span class="hljs-selector-class">.userInfo</span>,
          hasUserInfo: true
        })
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// &#x5728;&#x6CA1;&#x6709; open-type=getUserInfo &#x7248;&#x672C;&#x7684;&#x517C;&#x5BB9;&#x5904;&#x7406;</span>
      wx.getUserInfo({
        success: res =&gt; {
          app<span class="hljs-selector-class">.globalData</span><span class="hljs-selector-class">.userInfo</span> = res<span class="hljs-selector-class">.userInfo</span>
          this.setData({
            userInfo: res<span class="hljs-selector-class">.userInfo</span>,
            hasUserInfo: true
          })
        }
      })
    }
  },
  getUserInfo: function(e) {
    console.log(e)
    app<span class="hljs-selector-class">.globalData</span><span class="hljs-selector-class">.userInfo</span> = e<span class="hljs-selector-class">.detail</span><span class="hljs-selector-class">.userInfo</span>
    this.setData({
      userInfo: e<span class="hljs-selector-class">.detail</span><span class="hljs-selector-class">.userInfo</span>,
      hasUserInfo: true
    })
  }</code></pre><p>&#x6574;&#x4F53;&#x6548;&#x679C;</p><p><span class="img-wrap"><img data-src="/img/bVbcbte?w=324&amp;h=551" src="https://static.alili.tech/img/bVbcbte?w=324&amp;h=551" alt="&#x56FE;&#x7247;&#x63CF;&#x8FF0;" title="&#x56FE;&#x7247;&#x63CF;&#x8FF0;" style="cursor:pointer"></span></p><p>&#x6700;&#x540E;<br>&#x8FD9;&#x4E2A;&#x5C0F;&#x7A0B;&#x5E8F;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x529F;&#x80FD;&#x8FD8;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#xFF0C;&#x6BD4;&#x5982;&#x8D2D;&#x7269;&#x8F66;&#xFF0C;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x7684;&#x4FDD;&#x5B58;&#x5728;&#x540E;&#x53F0;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4EE5;&#x540E;&#x7B49;&#x81EA;&#x5B66;&#x5B8C;&#x540E;&#x7AEF;&#x7684;&#x4E00;&#x4E9B;&#x77E5;&#x8BC6;&#xFF0C;&#x6211;&#x8FD8;&#x662F;&#x5F97;&#x628A;&#x8FD9;&#x4E2A;&#x5C0F;&#x7A0B;&#x5E8F;&#x5B8C;&#x6574;&#x7684;&#x505A;&#x51FA;&#x6765;&#xFF0C;&#x559C;&#x6B22;&#x7684;&#x8BDD;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x6211;&#x7684;github&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x5B66;&#x4E60;&#xFF0C;&#x4E00;&#x8D77;&#x641E;&#x57FA;&#x54C8;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x53EF;&#x4EE5;&#x7ED9;&#x6211;&#x63D0;&#x51FA;&#x4E00;&#x4E9B;&#x5B9D;&#x8D35;&#x7684;&#x610F;&#x89C1;<br><span class="img-wrap"><img data-src="/img/bVbcbtQ?w=300&amp;h=300" src="https://static.alili.tech/img/bVbcbtQ?w=300&amp;h=300" alt="u=1852459734,3366209779&amp;fm=27&amp;gp=0.jpg" title="u=1852459734,3366209779&amp;fm=27&amp;gp=0.jpg" style="cursor:pointer;display:inline"></span></p><p>&#x6E90;&#x6587;&#x4EF6;:<a href="https://github.com/duzuimoye/duzuimoye-xxf_fullstack/tree/master/duzuimoye-xxf_js_fullstack/wxapp/furniture" rel="nofollow noreferrer" target="_blank">github&#x5730;&#x5740;</a> &#x671F;&#x5F85;&#x4F60;&#x7684;star&#x548C;fork&#x54E6;</p><p><strong>&#x7B2C;&#x4E00;&#x6B21;&#x5199;&#x6587;&#x7AE0;&#xFF0C;&#x9879;&#x76EE;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x5F88;&#x597D;&#xFF0C;&#x8868;&#x8FBE;&#x7684;&#x4E5F;&#x672A;&#x5FC5;&#x6E05;&#x695A;&#xFF0C;&#x8BF7;&#x7ED9;&#x65B0;&#x624B;&#x591A;&#x4E00;&#x70B9;&#x7684;&#x9F13;&#x52B1;&#xFF0C;&#x70B9;&#x4E2A;&#x8D5E;&#xFF0C;&#x7559;&#x4E0B;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x5427;</strong></p>
{{< /raw >}}

# 版权声明
本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，

本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。

原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！

## 原文标题
6.18快要来临--家具电商大战一触即发

## 原文链接
[https://segmentfault.com/a/1190000015258507](https://segmentfault.com/a/1190000015258507)


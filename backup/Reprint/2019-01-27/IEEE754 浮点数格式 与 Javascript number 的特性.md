---
title: 'IEEE754 浮点数格式 与 Javascript number 的特性' 
date: 2019-01-27 2:30:59
hidden: true
slug: 1k98mcmz3w3
categories: [reprint]
---

{{< raw >}}

                    
<p>Javascript 作为一门动态语言，其数字类型只有 <code>number</code> 一种。 <code>nubmer</code> 类型使用的就是 IEEE754 标准中的 <strong>双精度浮点数</strong>。Javascript 数字的许多特性都依赖于此标准，例如令人费解的 0.1+0.2不等于0.3</p>
<p>这篇文章介绍 IEEE754 标准中双精度浮点数二进制储存格式，并由此推出 js 中数字的一些特性。</p>
<h1 id="articleHeader0">一、IEEE754 中浮点数的储存格式</h1>
<p>在 IEEE754 中，双精度浮点数储存为64位：</p>
<p><span class="img-wrap"><img data-src="/img/bVIRcL?w=1406&amp;h=387" src="https://static.alili.tech/img/bVIRcL?w=1406&amp;h=387" alt="双精度浮点数储存格式" title="双精度浮点数储存格式" style="cursor: pointer; display: inline;"></span></p>
<p>指数位可以通过下面的方法转换为使用的指数值：<br><span class="img-wrap"><img data-src="/img/bVIRcY?w=1379&amp;h=1007" src="https://static.alili.tech/img/bVIRcY?w=1379&amp;h=1007" alt="指数位代表的值" title="指数位代表的值" style="cursor: pointer; display: inline;"></span></p>
<p>浮点数表示的值的形式由 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-1" role="math" style="width: 0.55em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.441em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.873em, 1000.41em, 2.656em, -1000em); top: -2.479em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: STIXGeneral-Italic;">e</span></span><span style="display: inline-block; width: 0px; height: 2.479em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.08em; border-left: 0px solid; width: 0px; height: 0.68em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">e</script> 和 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-4" role="math" style="width: 0.55em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.441em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.636em, 1000.44em, 2.852em, -1000em); top: -2.479em; left: 0em;"><span class="mrow" id="MathJax-Span-5"><span class="mi" id="MathJax-Span-6" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.479em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.317em; border-left: 0px solid; width: 0px; height: 1.204em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">f</script> 确定：<br><span class="img-wrap"><img data-src="/img/bVIRdb?w=1477&amp;h=373" src="https://static.alili.tech/img/bVIRdb?w=1477&amp;h=373" alt="浮点数表示的值的形式" title="浮点数表示的值的形式" style="cursor: pointer; display: inline;"></span></p>
<h1 id="articleHeader1">二、根据 IEEE754 计算 0.1+0.2</h1>
<h2 id="articleHeader2">1. 将 0.1 使用转换为二进制</h2>
<p><span class="img-wrap"><img data-src="/img/bVIRdp?w=791&amp;h=867" src="https://static.alili.tech/img/bVIRdp?w=791&amp;h=867" alt="将 0.1 使用转换为二进制" title="将 0.1 使用转换为二进制" style="cursor: pointer; display: inline;"></span></p>
<p><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-7" role="math" style="width: 21.483em; display: inline-block;"><span style="display: inline-block; position: relative; width: 17.741em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.401em, 1017.74em, 2.822em, -1000em); top: -2.479em; left: 0em;"><span class="mrow" id="MathJax-Span-8"><span class="mn" id="MathJax-Span-9" style="font-family: STIXGeneral-Regular;">0.1</span><span class="mo" id="MathJax-Span-10" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mo" id="MathJax-Span-11" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">(</span><span class="mn" id="MathJax-Span-12" style="font-family: STIXGeneral-Regular;">0.0</span><span class="texatom" id="MathJax-Span-13"><span class="mrow" id="MathJax-Span-14"><span class="munderover" id="MathJax-Span-15"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.48em, 4.201em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-16" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-17" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-18"><span class="mrow" id="MathJax-Span-19"><span class="munderover" id="MathJax-Span-20"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.48em, 4.201em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-21" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-22" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-23"><span class="mrow" id="MathJax-Span-24"><span class="munderover" id="MathJax-Span-25"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.39em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-26" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-27" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-28"><span class="mrow" id="MathJax-Span-29"><span class="munderover" id="MathJax-Span-30"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.39em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-31" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-32" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="msubsup" id="MathJax-Span-33"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-34" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -3.872em; left: 0.333em;"><span class="mn" id="MathJax-Span-35" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-36" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mo" id="MathJax-Span-37" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">(</span><span class="mo" id="MathJax-Span-38" style="font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-39" style="font-family: STIXGeneral-Regular;">1</span><span class="msubsup" id="MathJax-Span-40"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-41" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.385em; left: 0.333em;"><span class="mn" id="MathJax-Span-42" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-43" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="msubsup" id="MathJax-Span-44" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.413em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.47em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-45" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.5em;"><span class="texatom" id="MathJax-Span-46"><span class="mrow" id="MathJax-Span-47"><span class="mo" id="MathJax-Span-48" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-49" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">4</span></span></span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-50" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="mo" id="MathJax-Span-51" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-52" style="font-family: STIXGeneral-Regular;">1.</span><span class="texatom" id="MathJax-Span-53"><span class="mrow" id="MathJax-Span-54"><span class="munderover" id="MathJax-Span-55"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.39em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-56" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-57" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-58"><span class="mrow" id="MathJax-Span-59"><span class="munderover" id="MathJax-Span-60"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.48em, 4.201em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-61" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-62" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-63"><span class="mrow" id="MathJax-Span-64"><span class="munderover" id="MathJax-Span-65"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.48em, 4.201em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-66" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-67" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-68"><span class="mrow" id="MathJax-Span-69"><span class="munderover" id="MathJax-Span-70"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.39em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-71" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-72" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="msubsup" id="MathJax-Span-73"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-74" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -3.872em; left: 0.333em;"><span class="mn" id="MathJax-Span-75" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.479em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.281em; border-left: 0px solid; width: 0px; height: 1.452em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">0.1 = (0.0\dot0\dot0\dot1\dot1)_2=(-1)^0\times2^{-4}\times(1.\dot1\dot0\dot0\dot1)_2</script></p>
<p><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-76" role="math" style="width: 20.217em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.694em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.401em, 1016.69em, 2.822em, -1000em); top: -2.479em; left: 0em;"><span class="mrow" id="MathJax-Span-77"><span class="mn" id="MathJax-Span-78" style="font-family: STIXGeneral-Regular;">0.2</span><span class="mo" id="MathJax-Span-79" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-80" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">0.1</span><span class="mo" id="MathJax-Span-81" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="msubsup" id="MathJax-Span-82" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 0.929em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.47em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-83" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.5em;"><span class="mn" id="MathJax-Span-84" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-85" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mo" id="MathJax-Span-86" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">(</span><span class="mo" id="MathJax-Span-87" style="font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-88" style="font-family: STIXGeneral-Regular;">1</span><span class="msubsup" id="MathJax-Span-89"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-90" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.385em; left: 0.333em;"><span class="mn" id="MathJax-Span-91" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-92" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="msubsup" id="MathJax-Span-93" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.413em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.47em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-94" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.5em;"><span class="texatom" id="MathJax-Span-95"><span class="mrow" id="MathJax-Span-96"><span class="mo" id="MathJax-Span-97" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-98" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">3</span></span></span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-99" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="mo" id="MathJax-Span-100" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-101" style="font-family: STIXGeneral-Regular;">1.</span><span class="texatom" id="MathJax-Span-102"><span class="mrow" id="MathJax-Span-103"><span class="munderover" id="MathJax-Span-104"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.39em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-105" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-106" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-107"><span class="mrow" id="MathJax-Span-108"><span class="munderover" id="MathJax-Span-109"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.48em, 4.201em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-110" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-111" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-112"><span class="mrow" id="MathJax-Span-113"><span class="munderover" id="MathJax-Span-114"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.48em, 4.201em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-115" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-116" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-117"><span class="mrow" id="MathJax-Span-118"><span class="munderover" id="MathJax-Span-119"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.39em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-120" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; clip: rect(3.235em, 1000.22em, 3.664em, -1000em); top: -4.313em; left: 0.083em;"><span class="mo" id="MathJax-Span-121" style="font-family: STIXGeneral-Regular;">˙</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span></span><span class="msubsup" id="MathJax-Span-122"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-123" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -3.872em; left: 0.333em;"><span class="mn" id="MathJax-Span-124" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.479em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.281em; border-left: 0px solid; width: 0px; height: 1.452em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">0.2 = 0.1\times2^1=(-1)^0\times2^{-3}\times(1.\dot1\dot0\dot0\dot1)_2</script></p>
<p>由于小数位 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-125" role="math" style="width: 0.55em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.441em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.636em, 1000.44em, 2.852em, -1000em); top: -2.479em; left: 0em;"><span class="mrow" id="MathJax-Span-126"><span class="mi" id="MathJax-Span-127" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.479em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.317em; border-left: 0px solid; width: 0px; height: 1.204em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">f</script> 仅储存 52bit, 储存时会将超出精度部分进行"零舍一入"</p>
<table>
<thead><tr>
<th>值类型</th>
<th>小数位(储存范围内)</th>
<th>小数位(储存范围外)</th>
</tr></thead>
<tbody>
<tr>
<td>无限精确值</td>
<td>1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001</td>
<td>1001 1001...</td>
</tr>
<tr>
<td>实际储存值</td>
<td>1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1010</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>由于计算加减时不会对指数位进行位运算，这里不计算指数位的表示，直接使用数字表示最终的指数值</p>
<p>0.1、0.2 的表示如下：</p>
<table>
<thead><tr>
<th>浮点数数值</th>
<th>符号位 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-128" role="math" style="width: 0.483em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.376em; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(1.924em, 1000.35em, 2.701em, -1000em); top: -2.527em; left: 0em;"><span class="mrow" id="MathJax-Span-129"><span class="mi" id="MathJax-Span-130" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.527em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.083em; border-left: 0px solid; width: 0px; height: 0.698em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">s</script></th>
<th>指数值 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-131" role="math" style="width: 0.817em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.645em; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(1.713em, 1000.64em, 2.688em, -1000em); top: -2.527em; left: 0em;"><span class="mrow" id="MathJax-Span-132"><span class="mi" id="MathJax-Span-133" style="font-family: STIXGeneral-Italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.527em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.067em; border-left: 0px solid; width: 0px; height: 0.943em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-7">E</script></th>
<th>小数位 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-134" role="math" style="width: 0.55em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.43em; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(1.688em, 1000.43em, 2.895em, -1000em); top: -2.527em; left: 0em;"><span class="mrow" id="MathJax-Span-135"><span class="mi" id="MathJax-Span-136" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.527em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.323em; border-left: 0px solid; width: 0px; height: 1.231em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">f</script></th>
</tr></thead>
<tbody>
<tr>
<td>0.1</td>
<td>0</td>
<td>-4</td>
<td>1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1010</td>
</tr>
<tr>
<td>0.2</td>
<td>0</td>
<td>-3</td>
<td>1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1010</td>
</tr>
</tbody>
</table>
<h2 id="articleHeader3">2. 将 0.1 与 0.2 相加</h2>
<p>在计算浮点数相加时需要先进行“对位”，将较小的指数化为较大的指数，并将小数部分相应右移</p>
<p><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-137" role="math" style="width: 44.683em; display: inline-block;"><span style="display: inline-block; position: relative; width: 36.915em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.433em, 1036.91em, 2.822em, -1000em); top: -2.479em; left: 0em;"><span class="mrow" id="MathJax-Span-138"><span class="mn" id="MathJax-Span-139" style="font-family: STIXGeneral-Regular;">0.1</span><span class="mo" id="MathJax-Span-140" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">→</span><span class="mo" id="MathJax-Span-141" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">(</span><span class="mo" id="MathJax-Span-142" style="font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-143" style="font-family: STIXGeneral-Regular;">1</span><span class="msubsup" id="MathJax-Span-144"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-145" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.385em; left: 0.333em;"><span class="mn" id="MathJax-Span-146" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-147" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="msubsup" id="MathJax-Span-148" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.413em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.47em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-149" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.5em;"><span class="texatom" id="MathJax-Span-150"><span class="mrow" id="MathJax-Span-151"><span class="mo" id="MathJax-Span-152" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-153" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">3</span></span></span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-154" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="mo" id="MathJax-Span-155" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-156" style="font-family: STIXGeneral-Regular;">0.1100</span><span class="mn" id="MathJax-Span-157" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-158" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-159" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-160" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-161" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-162" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-163" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-164" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-165" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-166" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-167" style="font-family: STIXGeneral-Regular;">1100</span><span class="mn" id="MathJax-Span-168" style="font-family: STIXGeneral-Regular;">1101</span><span class="mn" id="MathJax-Span-169" style="font-family: STIXGeneral-Regular;">0</span><span class="msubsup" id="MathJax-Span-170"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-171" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -3.872em; left: 0.333em;"><span class="mn" id="MathJax-Span-172" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.479em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.281em; border-left: 0px solid; width: 0px; height: 1.413em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-9">0.1 \rightarrow (-1)^0\times2^{-3}\times(0.1100 1100 1100 1100 1100 1100 1100 1100 1100 1100 1100 1100 1101 0)_2</script><br><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-173" role="math" style="width: 44.083em; display: inline-block;"><span style="display: inline-block; position: relative; width: 36.419em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.433em, 1036.42em, 2.822em, -1000em); top: -2.479em; left: 0em;"><span class="mrow" id="MathJax-Span-174"><span class="mn" id="MathJax-Span-175" style="font-family: STIXGeneral-Regular;">0.2</span><span class="mo" id="MathJax-Span-176" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">→</span><span class="mo" id="MathJax-Span-177" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">(</span><span class="mo" id="MathJax-Span-178" style="font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-179" style="font-family: STIXGeneral-Regular;">1</span><span class="msubsup" id="MathJax-Span-180"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-181" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.385em; left: 0.333em;"><span class="mn" id="MathJax-Span-182" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-183" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="msubsup" id="MathJax-Span-184" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.413em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.47em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-185" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.5em;"><span class="texatom" id="MathJax-Span-186"><span class="mrow" id="MathJax-Span-187"><span class="mo" id="MathJax-Span-188" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-189" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">3</span></span></span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-190" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="mo" id="MathJax-Span-191" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-192" style="font-family: STIXGeneral-Regular;">1.1001</span><span class="mn" id="MathJax-Span-193" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-194" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-195" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-196" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-197" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-198" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-199" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-200" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-201" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-202" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-203" style="font-family: STIXGeneral-Regular;">1001</span><span class="mn" id="MathJax-Span-204" style="font-family: STIXGeneral-Regular;">1010</span><span class="msubsup" id="MathJax-Span-205"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-206" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -3.872em; left: 0.333em;"><span class="mn" id="MathJax-Span-207" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.479em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.281em; border-left: 0px solid; width: 0px; height: 1.413em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-10">0.2 \rightarrow (-1)^0\times2^{-3}\times(1.1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1010)_2</script>  </p>
<p><span class="img-wrap"><img data-src="/img/bVIRdy?w=1551&amp;h=691" src="https://static.alili.tech/img/bVIRdy?w=1551&amp;h=691" alt="计算0.1与0.2相加" title="计算0.1与0.2相加" style="cursor: pointer;"></span></p>
<p><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-208" role="math" style="width: 46.683em; display: inline-block;"><span style="display: inline-block; position: relative; width: 38.567em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.433em, 1038.57em, 2.822em, -1000em); top: -2.479em; left: 0em;"><span class="mrow" id="MathJax-Span-209"><span class="mn" id="MathJax-Span-210" style="font-family: STIXGeneral-Regular;">0.1</span><span class="mo" id="MathJax-Span-211" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mn" id="MathJax-Span-212" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">0.2</span><span class="mo" id="MathJax-Span-213" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mo" id="MathJax-Span-214" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">(</span><span class="mo" id="MathJax-Span-215" style="font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-216" style="font-family: STIXGeneral-Regular;">1</span><span class="msubsup" id="MathJax-Span-217"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-218" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.385em; left: 0.333em;"><span class="mn" id="MathJax-Span-219" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-220" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="msubsup" id="MathJax-Span-221" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.413em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.47em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-222" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.5em;"><span class="texatom" id="MathJax-Span-223"><span class="mrow" id="MathJax-Span-224"><span class="mo" id="MathJax-Span-225" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-226" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span></span></span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span><span class="mo" id="MathJax-Span-227" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">×</span><span class="mo" id="MathJax-Span-228" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-229" style="font-family: STIXGeneral-Regular;">1.0011001100110011001100110011001100110011001100110100</span><span class="msubsup" id="MathJax-Span-230"><span style="display: inline-block; position: relative; width: 0.762em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.28em, 4.364em, -1000em); top: -4.022em; left: 0em;"><span class="mo" id="MathJax-Span-231" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -3.872em; left: 0.333em;"><span class="mn" id="MathJax-Span-232" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.479em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.281em; border-left: 0px solid; width: 0px; height: 1.413em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-11">0.1 + 0.2 = (-1)^0\times2^{-2}\times(1.0011001100110011001100110011001100110011001100110100)_2</script></p>
<p>可以通过下面的方法检验计算结果是否于 js 中一致：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="0.1 + 0.2 === (-1)**0 * 2**-2 * (0b10011001100110011001100110011001100110011001100110100 * 2**-52)
//> true
//计算正确" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span> === (<span class="hljs-number">-1</span>)**<span class="hljs-number">0</span> * <span class="hljs-number">2</span>**<span class="hljs-number">-2</span> * (<span class="hljs-number">0b10011001100110011001100110011001100110011001100110100</span> * <span class="hljs-number">2</span>**<span class="hljs-number">-52</span>)
<span class="hljs-comment">//&gt; true</span>
<span class="hljs-comment">//计算正确</span></code></pre>
<h1 id="articleHeader4">三、计算 javascript Number 的特性</h1>
<p>在js中 Number对象上附带了许多属性，表示可数的范围等信息，例如 <code>Number.MAX_SAFE_INTEGER</code> 是一个16位的数字，这一部分将解释如何计算出这些有特殊意义的数字。</p>
<h2 id="articleHeader5">1.计算 <code>Number.MAX_VALUE</code> 和 <code>Number.MIN_VALUE</code>
</h2>
<p>当符号位为0、指数取到1023、小数位全为1时，为可表示的最大值  <br>当符号位为0、指数位全为0（表示非规格浮点数）、小数位仅最后一位为1时，为可表示的最小正值</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="var max = (-1)**0 * 2**1023 * (Number.parseInt( &quot;1&quot;.repeat(53) ,2) * 2**-52);
max === Number.MAX_VALUE;
//> true

var min = (-1)**0 * 2**-1022 * (Number.parseInt( &quot;0&quot;.repeat(52)+&quot;1&quot; ,2) * 2**-52);
min === Number.MIN_VALUE;
//> true" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-keyword">var</span> max = (<span class="hljs-number">-1</span>)**<span class="hljs-number">0</span> * <span class="hljs-number">2</span>**<span class="hljs-number">1023</span> * (<span class="hljs-built_in">Number</span>.parseInt( <span class="hljs-string">"1"</span>.repeat(<span class="hljs-number">53</span>) ,<span class="hljs-number">2</span>) * <span class="hljs-number">2</span>**<span class="hljs-number">-52</span>);
max === <span class="hljs-built_in">Number</span>.MAX_VALUE;
<span class="hljs-comment">//&gt; true</span>

<span class="hljs-keyword">var</span> min = (<span class="hljs-number">-1</span>)**<span class="hljs-number">0</span> * <span class="hljs-number">2</span>**<span class="hljs-number">-1022</span> * (<span class="hljs-built_in">Number</span>.parseInt( <span class="hljs-string">"0"</span>.repeat(<span class="hljs-number">52</span>)+<span class="hljs-string">"1"</span> ,<span class="hljs-number">2</span>) * <span class="hljs-number">2</span>**<span class="hljs-number">-52</span>);
min === <span class="hljs-built_in">Number</span>.MIN_VALUE;
<span class="hljs-comment">//&gt; true</span></code></pre>
<h2 id="articleHeader6">2.计算 <code>Number.MAX_SAFE_INTEGER</code> 和 <code>Number.MIN_SAFE_INTEGER</code>
</h2>
<p><code>Number.MAX_SAFE_INTEGER</code> 表示最大安全整数，它是9开头的16位数字，也表明js number最大精度不超过16位。</p>
<p>ECMASCRIPT-262 定义：</p>
<blockquote><p>The value of Number.MAX_SAFE_INTEGER is the largest integer n such that n and n + 1 are both exactly representable as a Number value.  <br><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer" rel="nofollow noreferrer" target="_blank">http://www.ecma-international...</a></p></blockquote>
<p>改变指数位为53，这让每个小数位都表示浮点数的整数部分，小数位最低位对应 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-233" role="math" style="width: 1.15em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.937em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.158em, 1000.94em, 2.369em, -1000em); top: -2.204em; left: 0em;"><span class="mrow" id="MathJax-Span-234"><span class="msubsup" id="MathJax-Span-235"><span style="display: inline-block; position: relative; width: 0.929em; height: 0px;"><span style="position: absolute; clip: rect(3.181em, 1000.47em, 4.187em, -1000em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-236" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.5em;"><span class="mn" id="MathJax-Span-237" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.022em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.204em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.067em; border-left: 0px solid; width: 0px; height: 1.199em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-12">2^0</script>，然后将每个小数位都置1，可得最大准确整数：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="var max_safe_int = (-1)**0 * 2**52 * (Number.parseInt(&quot;1&quot;.repeat(53),2) * 2**-52);
max_safe_int === Number.MAX_SAFE_INTEGER;
//> true
//当它 +1 时，可由 (-1)**0 * 2**53 * (Number.parseInt(&quot;1&quot;+&quot;0&quot;.repeat(52),2) * 2**-52) 正确表示，而再 +1 时则无法准确表示

//符号位取反可得最小安全整数
-1 * max_safe_int === Number.MIN_SAFE_INTEGER;" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-keyword">var</span> max_safe_int = (<span class="hljs-number">-1</span>)**<span class="hljs-number">0</span> * <span class="hljs-number">2</span>**<span class="hljs-number">52</span> * (<span class="hljs-built_in">Number</span>.parseInt(<span class="hljs-string">"1"</span>.repeat(<span class="hljs-number">53</span>),<span class="hljs-number">2</span>) * <span class="hljs-number">2</span>**<span class="hljs-number">-52</span>);
max_safe_int === <span class="hljs-built_in">Number</span>.MAX_SAFE_INTEGER;
<span class="hljs-comment">//&gt; true</span>
<span class="hljs-comment">//当它 +1 时，可由 (-1)**0 * 2**53 * (Number.parseInt("1"+"0".repeat(52),2) * 2**-52) 正确表示，而再 +1 时则无法准确表示</span>

<span class="hljs-comment">//符号位取反可得最小安全整数</span>
<span class="hljs-number">-1</span> * max_safe_int === <span class="hljs-built_in">Number</span>.MIN_SAFE_INTEGER;</code></pre>
<h2 id="articleHeader7">3.计算 <code>Number.EPSILON</code>
</h2>
<p><code>Number.EPSILON</code> 是一个极小值，<del>用于检测计算结果是否在误差范围内</del>。例如：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="Math.abs(0.1 + 0.2 - 0.3) < Number.EPSILON;
//> true

//2017-9-27 补充
1.1 + 1.3 - 2.4 < Number.EPSILON
//> false" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-built_in">Math</span>.abs(<span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span> - <span class="hljs-number">0.3</span>) &lt; <span class="hljs-built_in">Number</span>.EPSILON;
<span class="hljs-comment">//&gt; true</span>

<span class="hljs-comment">//2017-9-27 补充</span>
<span class="hljs-number">1.1</span> + <span class="hljs-number">1.3</span> - <span class="hljs-number">2.4</span> &lt; <span class="hljs-built_in">Number</span>.EPSILON
<span class="hljs-comment">//&gt; false</span></code></pre>
<p>根据 ECMASCRIPT-262 定义：</p>
<blockquote><p>The value of Number.EPSILON is the difference between 1 and the smallest value greater than 1 that is representable as a Number value, which is approximately 2.2204460492503130808472633361816 x 10‍−‍16.</p></blockquote>
<p><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-number.epsilon" rel="nofollow noreferrer" target="_blank">http://www.ecma-international...</a></p>
<p>根据定义<code>Number.EPSILON</code>是大于1的最小可表示数与1的差，可以据此计算出 <code>Number.EPSILON</code> 的值：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="//将表示1的二进制小数位的最左端置1，可表示大于1的最小数
var epsilon = (-1)**0 * 2**0 * (Number.parseInt(&quot;1&quot;+&quot;0&quot;.repeat(51)+&quot;1&quot;,2) * 2**-52) - 1;
// (-1)**0 * 2**0 * (+`0b1${&quot;0&quot;.repeat(51)}1` * 2**-52) - 1;
epsilon === Number.EPSILON;
//> true" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">//将表示1的二进制小数位的最左端置1，可表示大于1的最小数</span>
<span class="hljs-keyword">var</span> epsilon = (<span class="hljs-number">-1</span>)**<span class="hljs-number">0</span> * <span class="hljs-number">2</span>**<span class="hljs-number">0</span> * (<span class="hljs-built_in">Number</span>.parseInt(<span class="hljs-string">"1"</span>+<span class="hljs-string">"0"</span>.repeat(<span class="hljs-number">51</span>)+<span class="hljs-string">"1"</span>,<span class="hljs-number">2</span>) * <span class="hljs-number">2</span>**<span class="hljs-number">-52</span>) - <span class="hljs-number">1</span>;
<span class="hljs-comment">// (-1)**0 * 2**0 * (+`0b1${"0".repeat(51)}1` * 2**-52) - 1;</span>
epsilon === <span class="hljs-built_in">Number</span>.EPSILON;
<span class="hljs-comment">//&gt; true</span></code></pre>

                
{{< /raw >}}

# 版权声明
本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，

本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。

原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！

## 原文标题
IEEE754 浮点数格式 与 Javascript number 的特性

## 原文链接
[https://segmentfault.com/a/1190000008268668](https://segmentfault.com/a/1190000008268668)


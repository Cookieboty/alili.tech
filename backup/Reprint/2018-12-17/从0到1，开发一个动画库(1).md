---
title: '从0到1，开发一个动画库(1)' 
date: 2018-12-17 2:30:06
hidden: true
slug: 0lk8ykuj573s
categories: [reprint]
---

{{< raw >}}

                    
<p>传送门：<a href="https://segmentfault.com/a/1190000013010057">从0到1，开发一个动画库(2)</a></p>
<p>如今市面上关于动画的开源库多得数不胜数，有关于CSS、js甚至是canvas渲染的，百花齐放，效果炫酷。但你是否曾想过，自己亲手去实现（封装）一个简单的动画库？</p>
<p>本文将从零开始，讲授如何搭建一个简单的动画库，它将具备以下几个特征：</p>
<ul>
<li>从实际动画中抽象出来，根据给定的动画速度曲线，完成“由帧到值”的计算过程，而实际渲染则交给开发者决定，更具拓展性</li>
<li>支持基本的事件监听，如<code>onPlay</code>、<code>onStop</code>、<code>onReset </code>、<code>onEnd</code>，及相应的回调函数</li>
<li>支持手动式触发动画的各种状态，如<code>play</code>、<code>stop</code>、<code>reset</code>、<code>end</code>
</li>
<li>支持自定义路径动画</li>
<li>支持多组动画的链式触发</li>
</ul>
<p>完整的项目在这里：<a href="https://github.com/JS-Hao/timeline" rel="nofollow noreferrer" target="_blank">https://github.com/JS-Hao/tim...</a>，欢迎各种吐槽和指正^_^</p>
<p>OK，话不多说，现在正式开始。</p>
<p>作为开篇，本节将介绍的是最基本、最核心的步骤——构建“帧-值”对应的函数关系，完成“由帧到值”的计算过程。</p>
<h3 id="articleHeader0">目录结构</h3>
<p>首先介绍下我们的项目目录结构：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="/timeline
    /index..js
    /core.js
    /tween.js" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="hljs stylus"><code>/timeline
    /index.<span class="hljs-selector-class">.js</span>
    /core<span class="hljs-selector-class">.js</span>
    /tween.js</code></pre>
<p><code>/timeline</code>是本项目的根目录，各文件的作用分别如下：</p>
<ul>
<li>
<code>index.js</code>  项目入口文件</li>
<li>
<code>core.js</code>  动画核心文件</li>
<li>
<code>easing.js</code>  存放基本缓动函数</li>
</ul>
<h3 id="articleHeader1">引入缓动函数</h3>
<p>所谓动画，简单来说，就是在一段时间内不断改变目标某些状态的结果。<strong>这些状态值在运动过程中，随着时间不断发生变化，状态值与时间存在一一对应的关系，这就是所谓的“帧-值”对应关系，常说的<a href="http://easings.net/zh-cn" rel="nofollow noreferrer" target="_blank">动画缓动函数</a>也是相同的道理。</strong></p>
<p>有了这种函数关系，给定任意一个时间点，我们都能计算出对应的状态值。OK，那如何在动画中引入缓动函数呢？不说废话，直接上代码：</p>
<p>首先我们在core.js中创建了一个<code>Core</code>类：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="class Core {
  constructor(opt) {
    // 初始化，并将实例当前状态设置为'init'
    this._init(opt);
    this.state = 'init';
  }
  
  _init(opt) {
    this._initValue(opt.value);
    // 保存动画总时长、缓动函数以及渲染函数
    this.duration = opt.duration || 1000;
    this.timingFunction = opt.timingFunction || 'linear';
    this.renderFunction = opt.render || this._defaultFunc;

    // 未来会用到的事件函数
    this.onPlay = opt.onPlay;
    this.onEnd = opt.onEnd;
    this.onStop = opt.onStop;
    this.onReset = opt.onReset;
  }

  _initValue(value) {
    // 初始化运动值
      this.value = [];
      value.forEach(item => {
        this.value.push({
          start: parseFloat(item[0]),
          end: parseFloat(item[1]),
        });
      });
  }
}" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Core</span> </span>{
  <span class="hljs-keyword">constructor</span>(opt) {
    <span class="hljs-comment">// 初始化，并将实例当前状态设置为'init'</span>
    <span class="hljs-keyword">this</span>._init(opt);
    <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'init'</span>;
  }
  
  _init(opt) {
    <span class="hljs-keyword">this</span>._initValue(opt.value);
    <span class="hljs-comment">// 保存动画总时长、缓动函数以及渲染函数</span>
    <span class="hljs-keyword">this</span>.duration = opt.duration || <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">this</span>.timingFunction = opt.timingFunction || <span class="hljs-string">'linear'</span>;
    <span class="hljs-keyword">this</span>.renderFunction = opt.render || <span class="hljs-keyword">this</span>._defaultFunc;

    <span class="hljs-comment">// 未来会用到的事件函数</span>
    <span class="hljs-keyword">this</span>.onPlay = opt.onPlay;
    <span class="hljs-keyword">this</span>.onEnd = opt.onEnd;
    <span class="hljs-keyword">this</span>.onStop = opt.onStop;
    <span class="hljs-keyword">this</span>.onReset = opt.onReset;
  }

  _initValue(value) {
    <span class="hljs-comment">// 初始化运动值</span>
      <span class="hljs-keyword">this</span>.value = [];
      value.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.value.push({
          <span class="hljs-attr">start</span>: <span class="hljs-built_in">parseFloat</span>(item[<span class="hljs-number">0</span>]),
          <span class="hljs-attr">end</span>: <span class="hljs-built_in">parseFloat</span>(item[<span class="hljs-number">1</span>]),
        });
      });
  }
}</code></pre>
<p>我们在构造函数中对实例调用<code>_init</code>函数，对其初始化：将传入的参数保存在实例属性中。</p>
<p>当你看到<code>_initValue</code>的时候可能不大明白：外界传入的<code>value</code>到底是啥？其实<code>value</code>是一个数组，<strong>它的每一个元素都保存着独立动画的起始与结束两种状态。</strong>这样说好像有点乱，举个栗子好了：假设我们要创建一个动画，让页面上的div同时往右、左分别平移300px、500px，此外还同时把自己放大1.5倍。在这个看似复杂的动画过程中，其实可以拆解成三个独立的动画，每一动画都有自己的起始与终止值：</p>
<ul>
<li>对于往右平移，就是把css属性的<code>translateX</code>的0px变成了300px</li>
<li>同理，往下平移，就是把<code>tranlateY</code>的0px变成500px</li>
<li>放大1.5倍，也就是把<code>`scale</code>从1变成1.5</li>
</ul>
<p>因此传入的value应该长成这样：<code>[[0, 300], [0, 500], [1, 1.5]]</code> 。我们将数组的每一个元素依次保存在实例的value属性中。</p>
<p>此外，<code>renderFunction</code>是由外界提供的渲染函数，即<code>opt.render</code>，它的作用是：</p>
<p>动画运动的每一帧，都会调用一次该函数，并把计算好的当前状态值以参数形式传入，有了当前状态值，我们就可以自由地选择渲染动画的方式啦。</p>
<p>接下来我们给Core类添加一个循环函数：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="_loop() {
  const t = Date.now() - this.beginTime,
        d = this.duration,
        func = Tween[this.timingFunction] || Tween['linear'];

  if (t >= d) {
    this.state = 'end';
    this._renderFunction(d, d, func);
  } else {
    this._renderFunction(t, d, func);
    window.requestAnimationFrame(this._loop.bind(this));
  }
}

_renderFunction(t, d, func) {
  const values = this.value.map(value => func(t, value.start, value.end - value.start, d));
  this.renderFunction.apply(this, values);
}" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">_loop() {
  <span class="hljs-keyword">const</span> t = <span class="hljs-built_in">Date</span>.now() - <span class="hljs-keyword">this</span>.beginTime,
        d = <span class="hljs-keyword">this</span>.duration,
        func = Tween[<span class="hljs-keyword">this</span>.timingFunction] || Tween[<span class="hljs-string">'linear'</span>];

  <span class="hljs-keyword">if</span> (t &gt;= d) {
    <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'end'</span>;
    <span class="hljs-keyword">this</span>._renderFunction(d, d, func);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>._renderFunction(t, d, func);
    <span class="hljs-built_in">window</span>.requestAnimationFrame(<span class="hljs-keyword">this</span>._loop.bind(<span class="hljs-keyword">this</span>));
  }
}

_renderFunction(t, d, func) {
  <span class="hljs-keyword">const</span> values = <span class="hljs-keyword">this</span>.value.map(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> func(t, value.start, value.end - value.start, d));
  <span class="hljs-keyword">this</span>.renderFunction.apply(<span class="hljs-keyword">this</span>, values);
}</code></pre>
<p><code>_loop</code>的作用是：倘若当前时间进度<code>t</code>还未到终点，则根据当前时间进度计算出目标现在的状态值，并以参数的形式传给即将调用的渲染函数，即<code>renderFunction</code>，并继续循环。如果大于<code>duration</code>，则将目标的运动终止值传给<code>renderFunction</code>，运动结束，将状态设为<code>end</code>。</p>
<p>代码中的<code>Tween</code>是从tween.js文件引入的缓动函数，tween.js的代码如下（网上搜搜基本都差不多= =）:</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="/*
 * t: current time（当前时间）；
 * b: beginning value（初始值）；
 * c: change in value（变化量）；
 * d: duration（持续时间）。
 * Get effect on 'http://easings.net/zh-cn'
 */

const Tween = {
    linear: function (t, b, c, d) {
        return c * t / d + b;
    },
    // Quad
    easeIn: function (t, b, c, d) {
        return c * (t /= d) * t + b;
    },
    easeOut: function (t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
    },
    easeInOut: function (t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return -c / 2 * ((--t) * (t - 2) - 1) + b;
    },
    // Cubic
    easeInCubic: function (t, b, c, d) {
        return c * (t /= d) * t * t + b;
    },
    easeOutCubic: function (t, b, c, d) {
        return c * ((t = t / d - 1) * t * t + 1) + b;
    },
    easeInOutCubic: function (t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t + 2) + b;
    },
    // Quart
    easeInQuart: function (t, b, c, d) {
        return c * (t /= d) * t * t * t + b;
    },
    easeOutQuart: function (t, b, c, d) {
        return -c * ((t = t / d - 1) * t * t * t - 1) + b;
    },
    easeInOutQuart: function (t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    },
    // Quint
    easeInQuint: function (t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b;
    },
    easeOutQuint: function (t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
    },
    easeInOutQuint: function (t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    },
    // Sine
    easeInSine: function (t, b, c, d) {
        return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
    },
    easeOutSine: function (t, b, c, d) {
        return c * Math.sin(t / d * (Math.PI / 2)) + b;
    },
    easeInOutSine: function (t, b, c, d) {
        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
    },
    // Expo
    easeInExpo: function (t, b, c, d) {
        return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
    },
    easeOutExpo: function (t, b, c, d) {
        return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
    },
    easeInOutExpo: function (t, b, c, d) {
        if (t == 0) return b;
        if (t == d) return b + c;
        if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    },
    // Circ
    easeInCirc: function (t, b, c, d) {
        return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
    },
    easeOutCirc: function (t, b, c, d) {
        return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
    },
    easeInOutCirc: function (t, b, c, d) {
        if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    },
    // Elastic
    easeInElastic: function (t, b, c, d, a, p) {
        let s;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (typeof p == &quot;undefined&quot;) p = d * .3;
        if (!a || a < Math.abs(c)) {
            s = p / 4;
            a = c;
        } else {
            s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    },
    easeOutElastic: function (t, b, c, d, a, p) {
        let s;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (typeof p == &quot;undefined&quot;) p = d * .3;
        if (!a || a < Math.abs(c)) {
            a = c;
            s = p / 4;
        } else {
            s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        return (a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b);
    },
    easeInOutElastic: function (t, b, c, d, a, p) {
        let s;
        if (t == 0) return b;
        if ((t /= d / 2) == 2) return b + c;
        if (typeof p == &quot;undefined&quot;) p = d * (.3 * 1.5);
        if (!a || a < Math.abs(c)) {
            a = c;
            s = p / 4;
        } else {
            s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
    },
    // Back
    easeInBack: function (t, b, c, d, s) {
        if (typeof s == &quot;undefined&quot;) s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b;
    },
    easeOutBack: function (t, b, c, d, s) {
        if (typeof s == &quot;undefined&quot;) s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
    },
    easeInOutBack: function (t, b, c, d, s) {
        if (typeof s == &quot;undefined&quot;) s = 1.70158;
        if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
    },
    // Bounce
    easeInBounce: function (t, b, c, d) {
        return c - Tween.easeOutBounce(d - t, 0, c, d) + b;
    },
    easeOutBounce: function (t, b, c, d) {
        if ((t /= d) < (1 / 2.75)) {
            return c * (7.5625 * t * t) + b;
        } else if (t < (2 / 2.75)) {
            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
        } else if (t < (2.5 / 2.75)) {
            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
        } else {
            return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
        }
    },
    easeInOutBounce: function (t, b, c, d) {
        if (t < d / 2) {
            return Tween.easeInBounce(t * 2, 0, c, d) * .5 + b;
        } else {
            return Tween.easeOutBounce(t * 2 - d, 0, c, d) * .5 + c * .5 + b;
        }
    }
};

export default Tween;" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-comment">/*
 * t: current time（当前时间）；
 * b: beginning value（初始值）；
 * c: change in value（变化量）；
 * d: duration（持续时间）。
 * Get effect on 'http://easings.net/zh-cn'
 */</span>

<span class="hljs-keyword">const</span> Tween = {
    <span class="hljs-attr">linear</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * t / d + b;
    },
    <span class="hljs-comment">// Quad</span>
    easeIn: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * (t /= d) * t + b;
    },
    <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> -c * (t /= d) * (t - <span class="hljs-number">2</span>) + b;
    },
    <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * t * t + b;
        <span class="hljs-keyword">return</span> -c / <span class="hljs-number">2</span> * ((--t) * (t - <span class="hljs-number">2</span>) - <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-comment">// Cubic</span>
    easeInCubic: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * (t /= d) * t * t + b;
    },
    <span class="hljs-attr">easeOutCubic</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * ((t = t / d - <span class="hljs-number">1</span>) * t * t + <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-attr">easeInOutCubic</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * t * t * t + b;
        <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * ((t -= <span class="hljs-number">2</span>) * t * t + <span class="hljs-number">2</span>) + b;
    },
    <span class="hljs-comment">// Quart</span>
    easeInQuart: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * (t /= d) * t * t * t + b;
    },
    <span class="hljs-attr">easeOutQuart</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> -c * ((t = t / d - <span class="hljs-number">1</span>) * t * t * t - <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-attr">easeInOutQuart</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * t * t * t * t + b;
        <span class="hljs-keyword">return</span> -c / <span class="hljs-number">2</span> * ((t -= <span class="hljs-number">2</span>) * t * t * t - <span class="hljs-number">2</span>) + b;
    },
    <span class="hljs-comment">// Quint</span>
    easeInQuint: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * (t /= d) * t * t * t * t + b;
    },
    <span class="hljs-attr">easeOutQuint</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * ((t = t / d - <span class="hljs-number">1</span>) * t * t * t * t + <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-attr">easeInOutQuint</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * t * t * t * t * t + b;
        <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * ((t -= <span class="hljs-number">2</span>) * t * t * t * t + <span class="hljs-number">2</span>) + b;
    },
    <span class="hljs-comment">// Sine</span>
    easeInSine: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> -c * <span class="hljs-built_in">Math</span>.cos(t / d * (<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">2</span>)) + c + b;
    },
    <span class="hljs-attr">easeOutSine</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * <span class="hljs-built_in">Math</span>.sin(t / d * (<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">2</span>)) + b;
    },
    <span class="hljs-attr">easeInOutSine</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> -c / <span class="hljs-number">2</span> * (<span class="hljs-built_in">Math</span>.cos(<span class="hljs-built_in">Math</span>.PI * t / d) - <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-comment">// Expo</span>
    easeInExpo: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> (t == <span class="hljs-number">0</span>) ? b : c * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> * (t / d - <span class="hljs-number">1</span>)) + b;
    },
    <span class="hljs-attr">easeOutExpo</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> (t == d) ? b + c : c * (-<span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-10</span> * t / d) + <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-attr">easeInOutExpo</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">if</span> (t == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> b;
        <span class="hljs-keyword">if</span> (t == d) <span class="hljs-keyword">return</span> b + c;
        <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> * (t - <span class="hljs-number">1</span>)) + b;
        <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * (-<span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-10</span> * --t) + <span class="hljs-number">2</span>) + b;
    },
    <span class="hljs-comment">// Circ</span>
    easeInCirc: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> -c * (<span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span> - (t /= d) * t) - <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-attr">easeOutCirc</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c * <span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span> - (t = t / d - <span class="hljs-number">1</span>) * t) + b;
    },
    <span class="hljs-attr">easeInOutCirc</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> -c / <span class="hljs-number">2</span> * (<span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span> - t * t) - <span class="hljs-number">1</span>) + b;
        <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * (<span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span> - (t -= <span class="hljs-number">2</span>) * t) + <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-comment">// Elastic</span>
    easeInElastic: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, a, p</span>) </span>{
        <span class="hljs-keyword">let</span> s;
        <span class="hljs-keyword">if</span> (t == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> b;
        <span class="hljs-keyword">if</span> ((t /= d) == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> b + c;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> p == <span class="hljs-string">"undefined"</span>) p = d * <span class="hljs-number">.3</span>;
        <span class="hljs-keyword">if</span> (!a || a &lt; <span class="hljs-built_in">Math</span>.abs(c)) {
            s = p / <span class="hljs-number">4</span>;
            a = c;
        } <span class="hljs-keyword">else</span> {
            s = p / (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) * <span class="hljs-built_in">Math</span>.asin(c / a);
        }
        <span class="hljs-keyword">return</span> -(a * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> * (t -= <span class="hljs-number">1</span>)) * <span class="hljs-built_in">Math</span>.sin((t * d - s) * (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) / p)) + b;
    },
    <span class="hljs-attr">easeOutElastic</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, a, p</span>) </span>{
        <span class="hljs-keyword">let</span> s;
        <span class="hljs-keyword">if</span> (t == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> b;
        <span class="hljs-keyword">if</span> ((t /= d) == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> b + c;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> p == <span class="hljs-string">"undefined"</span>) p = d * <span class="hljs-number">.3</span>;
        <span class="hljs-keyword">if</span> (!a || a &lt; <span class="hljs-built_in">Math</span>.abs(c)) {
            a = c;
            s = p / <span class="hljs-number">4</span>;
        } <span class="hljs-keyword">else</span> {
            s = p / (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) * <span class="hljs-built_in">Math</span>.asin(c / a);
        }
        <span class="hljs-keyword">return</span> (a * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-10</span> * t) * <span class="hljs-built_in">Math</span>.sin((t * d - s) * (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) / p) + c + b);
    },
    <span class="hljs-attr">easeInOutElastic</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, a, p</span>) </span>{
        <span class="hljs-keyword">let</span> s;
        <span class="hljs-keyword">if</span> (t == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> b;
        <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> b + c;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> p == <span class="hljs-string">"undefined"</span>) p = d * (<span class="hljs-number">.3</span> * <span class="hljs-number">1.5</span>);
        <span class="hljs-keyword">if</span> (!a || a &lt; <span class="hljs-built_in">Math</span>.abs(c)) {
            a = c;
            s = p / <span class="hljs-number">4</span>;
        } <span class="hljs-keyword">else</span> {
            s = p / (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) * <span class="hljs-built_in">Math</span>.asin(c / a);
        }
        <span class="hljs-keyword">if</span> (t &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-.5</span> * (a * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> * (t -= <span class="hljs-number">1</span>)) * <span class="hljs-built_in">Math</span>.sin((t * d - s) * (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) / p)) + b;
        <span class="hljs-keyword">return</span> a * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-10</span> * (t -= <span class="hljs-number">1</span>)) * <span class="hljs-built_in">Math</span>.sin((t * d - s) * (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) / p) * <span class="hljs-number">.5</span> + c + b;
    },
    <span class="hljs-comment">// Back</span>
    easeInBack: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, s</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> s == <span class="hljs-string">"undefined"</span>) s = <span class="hljs-number">1.70158</span>;
        <span class="hljs-keyword">return</span> c * (t /= d) * t * ((s + <span class="hljs-number">1</span>) * t - s) + b;
    },
    <span class="hljs-attr">easeOutBack</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, s</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> s == <span class="hljs-string">"undefined"</span>) s = <span class="hljs-number">1.70158</span>;
        <span class="hljs-keyword">return</span> c * ((t = t / d - <span class="hljs-number">1</span>) * t * ((s + <span class="hljs-number">1</span>) * t + s) + <span class="hljs-number">1</span>) + b;
    },
    <span class="hljs-attr">easeInOutBack</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, s</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> s == <span class="hljs-string">"undefined"</span>) s = <span class="hljs-number">1.70158</span>;
        <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * (t * t * (((s *= (<span class="hljs-number">1.525</span>)) + <span class="hljs-number">1</span>) * t - s)) + b;
        <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * ((t -= <span class="hljs-number">2</span>) * t * (((s *= (<span class="hljs-number">1.525</span>)) + <span class="hljs-number">1</span>) * t + s) + <span class="hljs-number">2</span>) + b;
    },
    <span class="hljs-comment">// Bounce</span>
    easeInBounce: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">return</span> c - Tween.easeOutBounce(d - t, <span class="hljs-number">0</span>, c, d) + b;
    },
    <span class="hljs-attr">easeOutBounce</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">if</span> ((t /= d) &lt; (<span class="hljs-number">1</span> / <span class="hljs-number">2.75</span>)) {
            <span class="hljs-keyword">return</span> c * (<span class="hljs-number">7.5625</span> * t * t) + b;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t &lt; (<span class="hljs-number">2</span> / <span class="hljs-number">2.75</span>)) {
            <span class="hljs-keyword">return</span> c * (<span class="hljs-number">7.5625</span> * (t -= (<span class="hljs-number">1.5</span> / <span class="hljs-number">2.75</span>)) * t + <span class="hljs-number">.75</span>) + b;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t &lt; (<span class="hljs-number">2.5</span> / <span class="hljs-number">2.75</span>)) {
            <span class="hljs-keyword">return</span> c * (<span class="hljs-number">7.5625</span> * (t -= (<span class="hljs-number">2.25</span> / <span class="hljs-number">2.75</span>)) * t + <span class="hljs-number">.9375</span>) + b;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> c * (<span class="hljs-number">7.5625</span> * (t -= (<span class="hljs-number">2.625</span> / <span class="hljs-number">2.75</span>)) * t + <span class="hljs-number">.984375</span>) + b;
        }
    },
    <span class="hljs-attr">easeInOutBounce</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
        <span class="hljs-keyword">if</span> (t &lt; d / <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">return</span> Tween.easeInBounce(t * <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, c, d) * <span class="hljs-number">.5</span> + b;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> Tween.easeOutBounce(t * <span class="hljs-number">2</span> - d, <span class="hljs-number">0</span>, c, d) * <span class="hljs-number">.5</span> + c * <span class="hljs-number">.5</span> + b;
        }
    }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Tween;</code></pre>
<p>最后，给<code>Core</code>类增加<code>play</code>方法：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="_play() {
  this.state = 'play';
  this.beginTime = Date.now();
  // 执行动画循环
  const loop = this._loop.bind(this);
  window.requestAnimationFrame(loop);
}

play() {
  this._play();
}" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">_play() {
  <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'play'</span>;
  <span class="hljs-keyword">this</span>.beginTime = <span class="hljs-built_in">Date</span>.now();
  <span class="hljs-comment">// 执行动画循环</span>
  <span class="hljs-keyword">const</span> loop = <span class="hljs-keyword">this</span>._loop.bind(<span class="hljs-keyword">this</span>);
  <span class="hljs-built_in">window</span>.requestAnimationFrame(loop);
}

play() {
  <span class="hljs-keyword">this</span>._play();
}</code></pre>
<p>core.js的完整代码如下：</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="import Tween from './tween';

class Core {
    constructor(opt) {
        this._init(opt);
        this.state = 'init';
    }

    _init(opt) {
    this._initValue(opt.value);
    this.duration = opt.duration || 1000;
    this.timingFunction = opt.timingFunction || 'linear';
    this.renderFunction = opt.render || this._defaultFunc;

    /* Events */
    this.onPlay = opt.onPlay;
    this.onEnd = opt.onEnd;
    this.onStop = opt.onStop;
    this.onReset = opt.onReset;
  }

  _initValue(value) {
      this.value = [];
      value.forEach(item => {
          this.value.push({
              start: parseFloat(item[0]),
              end: parseFloat(item[1]),
          });
      })
  }

  _loop() {
      const t = Date.now() - this.beginTime,
          d = this.duration,
          func = Tween[this.timingFunction] || Tween['linear'];

    if (t >= d) {
        this.state = 'end';
        this._renderFunction(d, d, func);
    } else {
        this._renderFunction(t, d, func);
        window.requestAnimationFrame(this._loop.bind(this));
    }
  }

  _renderFunction(t, d, func) {
      const values = this.value.map(value => func(t, value.start, value.end - value.start, d));
      this.renderFunction.apply(this, values);
  }

  _play() {
      this.state = 'play';
      this.beginTime = Date.now();
      const loop = this._loop.bind(this);
    window.requestAnimationFrame(loop);
  }

  play() {
      this._play();
  }
}

window.Timeline = Core;" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript"><span class="hljs-keyword">import</span> Tween <span class="hljs-keyword">from</span> <span class="hljs-string">'./tween'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Core</span> </span>{
    <span class="hljs-keyword">constructor</span>(opt) {
        <span class="hljs-keyword">this</span>._init(opt);
        <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'init'</span>;
    }

    _init(opt) {
    <span class="hljs-keyword">this</span>._initValue(opt.value);
    <span class="hljs-keyword">this</span>.duration = opt.duration || <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">this</span>.timingFunction = opt.timingFunction || <span class="hljs-string">'linear'</span>;
    <span class="hljs-keyword">this</span>.renderFunction = opt.render || <span class="hljs-keyword">this</span>._defaultFunc;

    <span class="hljs-comment">/* Events */</span>
    <span class="hljs-keyword">this</span>.onPlay = opt.onPlay;
    <span class="hljs-keyword">this</span>.onEnd = opt.onEnd;
    <span class="hljs-keyword">this</span>.onStop = opt.onStop;
    <span class="hljs-keyword">this</span>.onReset = opt.onReset;
  }

  _initValue(value) {
      <span class="hljs-keyword">this</span>.value = [];
      value.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
          <span class="hljs-keyword">this</span>.value.push({
              <span class="hljs-attr">start</span>: <span class="hljs-built_in">parseFloat</span>(item[<span class="hljs-number">0</span>]),
              <span class="hljs-attr">end</span>: <span class="hljs-built_in">parseFloat</span>(item[<span class="hljs-number">1</span>]),
          });
      })
  }

  _loop() {
      <span class="hljs-keyword">const</span> t = <span class="hljs-built_in">Date</span>.now() - <span class="hljs-keyword">this</span>.beginTime,
          d = <span class="hljs-keyword">this</span>.duration,
          func = Tween[<span class="hljs-keyword">this</span>.timingFunction] || Tween[<span class="hljs-string">'linear'</span>];

    <span class="hljs-keyword">if</span> (t &gt;= d) {
        <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'end'</span>;
        <span class="hljs-keyword">this</span>._renderFunction(d, d, func);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>._renderFunction(t, d, func);
        <span class="hljs-built_in">window</span>.requestAnimationFrame(<span class="hljs-keyword">this</span>._loop.bind(<span class="hljs-keyword">this</span>));
    }
  }

  _renderFunction(t, d, func) {
      <span class="hljs-keyword">const</span> values = <span class="hljs-keyword">this</span>.value.map(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> func(t, value.start, value.end - value.start, d));
      <span class="hljs-keyword">this</span>.renderFunction.apply(<span class="hljs-keyword">this</span>, values);
  }

  _play() {
      <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'play'</span>;
      <span class="hljs-keyword">this</span>.beginTime = <span class="hljs-built_in">Date</span>.now();
      <span class="hljs-keyword">const</span> loop = <span class="hljs-keyword">this</span>._loop.bind(<span class="hljs-keyword">this</span>);
    <span class="hljs-built_in">window</span>.requestAnimationFrame(loop);
  }

  play() {
      <span class="hljs-keyword">this</span>._play();
  }
}

<span class="hljs-built_in">window</span>.Timeline = Core;</code></pre>
<p>在html中引入它后就可以愉快地调用啦^ _ ^</p>
<p>PS：该项目是用webpack打包并以timeline.min.js作为输出文件，由于暂时没用到index.js文件，因此暂时以core.js作为打包入口啦~</p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style type=&quot;text/css&quot;>
        #box {
            width: 100px;
            height: 100px;
            background: green;
        }
    </style>
</head>
<body>
<div id=&quot;box&quot;></div>
<script type=&quot;text/javascript&quot; src=&quot;timeline.js&quot;></script>
<script type=&quot;text/javascript&quot;>
    const box = document.querySelector('#box');
    const timeline = new Timeline({
        duration: 3000,
        value: [[0, 400], [0, 600]],
        render: function(value1, value2) {
            box.style.transform = `translate(${ value1 }px, ${ value2 }px)`;
        },
        timingFunction: 'easeOut',
    })
    timeline.play();
</script>
</body>
</html>" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="xml hljs"><code class="html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span>&gt;</span><span class="css">
        <span class="hljs-selector-id">#box</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
            <span class="hljs-attribute">background</span>: green;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"box"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"timeline.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> box = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#box'</span>);
    <span class="hljs-keyword">const</span> timeline = <span class="hljs-keyword">new</span> Timeline({
        <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>,
        <span class="hljs-attr">value</span>: [[<span class="hljs-number">0</span>, <span class="hljs-number">400</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">600</span>]],
        <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value1, value2</span>) </span>{
            box.style.transform = <span class="hljs-string">`translate(<span class="hljs-subst">${ value1 }</span>px, <span class="hljs-subst">${ value2 }</span>px)`</span>;
        },
        <span class="hljs-attr">timingFunction</span>: <span class="hljs-string">'easeOut'</span>,
    })
    timeline.play();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
<p>看到这里，本文就差不多结束了，下节将介绍如何在项目中加入各类事件监听及触发方式。</p>
<p>本系列文章将会继续不定期更新，欢迎各位大大指正^_^</p>

                
{{< /raw >}}

# 版权声明
本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，

本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。

原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！

## 原文标题
从0到1，开发一个动画库(1)

## 原文链接
[https://segmentfault.com/a/1190000012923589](https://segmentfault.com/a/1190000012923589)


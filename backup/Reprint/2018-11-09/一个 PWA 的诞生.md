---
title: 一个 PWA 的诞生
hidden: true
categories: [reprint]
slug: c1d2213
date: 2018-11-09 02:30:05
---

{{< raw >}}
<p>PWA&#xFF08;Progressive Web Apps&#xFF09;&#x867D;&#x7136;&#x662F;&#x7F51;&#x9875;&#x5E94;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x4EE5;&#x5E26;&#x6765;&#x5AB2;&#x7F8E;&#x539F;&#x751F;&#x7684;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x79BB;&#x7EBF;&#x53EF;&#x7528;&#xFF0C;&#x540E;&#x53F0;&#x63A8;&#x9001;&#x7B49;&#x529F;&#x80FD;&#x3002;PWA &#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x65B0;&#x540D;&#x8BCD;&#xFF0C;&#x65E9;&#x5728; 2015 &#x5E74;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x63D0;&#x51FA;&#x8FD9;&#x4E2A;&#x601D;&#x60F3;&#x5E76;&#x660E;&#x660E;&#xFF0C;&#x4F46;&#x662F;&#x76F4;&#x5230; iOS12 &#x53D1;&#x5E03;&#xFF0C;PWA &#x7EC8;&#x4E8E;&#x53EF;&#x4EE5;&#x5728; iOS &#x4E2D;&#x6DFB;&#x52A0;&#x5230;&#x4E3B;&#x5C4F;&#xFF0C;&#x53EA;&#x6709;&#x5B89;&#x5353;&#x548C; iOS &#x90FD;&#x80FD;&#x4F7F;&#x7528; PWA &#x7684;&#x57FA;&#x672C;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x624D;&#x7B97;&#x662F;&#x771F;&#x7684;&#x5F00;&#x59CB;&#x8D70;&#x8FD1;&#x5927;&#x4F17;&#x3002;&#x60F3;&#x4E86;&#x89E3; PWA&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x767E;&#x5EA6;&#x7684; <a href="https://lavas.baidu.com/pwa" rel="nofollow noreferrer" target="_blank">LAVAS</a> &#x5B98;&#x7F51;&#xFF0C;&#x5728;&#x56FD;&#x5185;&#x7F51;&#x7AD9;&#x4E2D; LAVAS &#x5B98;&#x7F51;&#x4F1A;&#x6709;&#x6BD4;&#x8F83;&#x5B8C;&#x6574;&#x7684; PWA &#x8D44;&#x6599;&#x3002;</p><p>&#x672C;&#x6587;&#x53EF;&#x4EE5;&#x63D0;&#x524D;&#x8BA9;&#x5927;&#x5BB6;&#x719F;&#x6089; PWA &#x642D;&#x5EFA;&#xFF0C;&#x6587;&#x4E2D;&#x63D0;&#x5230;&#x7684;&#x914D;&#x7F6E;&#x6765;&#x81EA;&#x4E00;&#x4E2A; Redesign &#x7684; <a href="http://nipponcolors.com/" rel="nofollow noreferrer" target="_blank">nipponcolors</a>&#xFF0C;&#x6700;&#x8FD1;&#x624D;&#x505A;&#x597D;&#x7684;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x5404;&#x79CD;&#x5E93;&#x90FD;&#x662F;&#x73B0;&#x5728;&#xFF08;2018.09.14&#xFF09;&#x6700;&#x65B0;&#x7684;&#xFF0C;&#x53EF;&#x7528;&#x7684;&#xFF0C;&#x53E6;&#x5916;&#x672C;&#x6587;&#x4E0D;&#x8BA8;&#x8BBA;&#x5E94;&#x7528;&#x529F;&#x80FD;&#xFF0C;&#x5355;&#x7EAF;&#x8BB2;&#x8BB2; PWA &#x7684;&#x642D;&#x5EFA;&#x3002;</p><p>&#x4ED3;&#x5E93;&#x5730;&#x5740;&#xFF1A;<a href="https://github.com/ssshooter/nippon-color" rel="nofollow noreferrer" target="_blank">https://github.com/ssshooter/...</a><br>&#x7F51;&#x9875;&#x5730;&#x5740;&#xFF1A;<a href="https://ssshooter.github.io/nippon-color/#/" rel="nofollow noreferrer" target="_blank">https://ssshooter.github.io/n...</a></p><h1 id="articleHeader0">&#x642D;&#x5EFA;</h1><h2 id="articleHeader1">&#x4F7F;&#x7528; <a href="https://cli.vuejs.org/guide/creating-a-project.html#vue-create" rel="nofollow noreferrer" target="_blank">Vue-cli3</a></h2><p>Vue-cli3 &#x4E0E; 2 &#x7684;&#x533A;&#x522B;&#x633A;&#x5927;&#x7684;&#xFF0C;3 &#x9ED8;&#x8BA4;&#x642D;&#x5EFA;&#x5DE5;&#x7A0B;&#x5E76;&#x975E;&#x50CF; 2 &#x4E00;&#x6837;&#x62C9;&#x53D6;&#x6A21;&#x677F;&#xFF0C;&#x800C;&#x662F;&#x81EA;&#x5DF1;&#x9009;&#x62E9;&#x9700;&#x8981;&#x7684; feature &#x751F;&#x6210;&#x9879;&#x76EE;&#x3002;</p><p><span class="img-wrap"><img data-src="/img/bVbgXUI?w=1492&amp;h=818" src="https://static.alili.tech/img/bVbgXUI?w=1492&amp;h=818" alt="clipboard.png" title="clipboard.png" style="cursor:pointer;display:inline"></span></p><p>&#x8981;&#x751F;&#x6210; PWA &#x9879;&#x76EE;&#x8BF7;&#x52FE;&#x4E0A; <code>PWA Support</code></p><h2 id="articleHeader2">Vue-cli3 &#x7684;&#x4E00;&#x4E2A;&#x5173;&#x4E8E; HMR &#x7684;&#x5DF2;&#x77E5;&#x95EE;&#x9898;</h2><p><a href="https://github.com/vuejs/vue-cli/issues/1559" rel="nofollow noreferrer" target="_blank">Issue &#x5730;&#x5740;</a><br>&#x5047;&#x8BBE;&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053; HMR&#xFF08;&#x70ED;&#x6A21;&#x5757;&#x66F4;&#x65B0;&#xFF09;&#x662F;&#x4EC0;&#x4E48;&#x4E86;&#xFF0C;vue-cli3 &#x7684;&#x67D0;&#x4E9B;&#x7248;&#x672C;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;HMR &#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#xFF0C;&#x63A7;&#x5236;&#x53F0;&#x5C31;&#x4E00;&#x76F4;&#x663E;&#x793A; waiting &#x8FDE;&#x63A5;&#xFF0C;&#x6587;&#x4EF6;&#x4E00;&#x6539;&#x76F4;&#x63A5;&#x663E;&#x793A;&#x8FDE;&#x63A5;&#x65AD;&#x5F00;&#x3002;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x6709;&#x4E8C;&#xFF1A;</p><ol><li>&#x5982;&#x679C;&#x4F60;&#x7684;&#x4F9D;&#x8D56;&#x4F7F;&#x7528; cnpm &#x5B89;&#x88C5;&#xFF0C;&#x5C1D;&#x8BD5;&#x5220;&#x6389; <code>node_modules</code> &#x540E;&#x4F7F;&#x7528; npm &#x4E0B;&#x8F7D;&#x3002;</li><li><p>&#x5728; <code>vue.config.js</code> &#x4F5C;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;</p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="chainWebpack: config =&gt; {
    config.resolve.symlinks(true)
    return config
}," title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs lua"><code>chainWebpack: <span class="hljs-built_in">config</span> =&gt; {
    <span class="hljs-built_in">config</span>.resolve.symlinks(<span class="hljs-literal">true</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">config</span>
},</code></pre></li></ol><h1 id="articleHeader3">&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x914D;&#x7F6E;</h1><h2 id="articleHeader4">eslint &#x914D;&#x7F6E;</h2><p>&#x5728;&#x8FD9;&#x91CC;&#x9996;&#x5148;&#x63A8;&#x8350;&#x4E00;&#x4E0B;&#x5C3E;&#x9017;&#x53F7;&#xFF0C;&#x52A0;&#x4E0A;&#x5C3E;&#x9017;&#x53F7;&#x7684;&#x597D;&#x5904;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x4F46;&#x771F;&#x7684;&#x5341;&#x5206;&#x91CD;&#x8981;&#xFF0C;&#x90A3;&#x5C31;&#x662F; diff &#x4F1A;&#x975E;&#x5E38;&#x597D;&#x770B;&#x3002;&#x7136;&#x540E; <a>eslint-plugin-vue</a> &#x63D2;&#x4EF6;&#x662F;&#x4E00;&#x4E9B;&#x9884;&#x8BBE;&#x89C4;&#x5219;&#x7EC4;&#x5408;&#xFF0C;&#x5206; base&#xFF0C;essential&#xFF0C;strongly-recommended&#xFF0C;recommended &#x56DB;&#x7EA7;&#xFF0C;&#x8BF7;&#x81EA;&#x7531;&#x9009;&#x62E9;&#xFF0C;&#x6CA1;&#x6709;&#x6700;&#x597D;&#x7684;&#x642D;&#x914D;&#xFF0C;&#x53EA;&#x8981;&#x7528;&#x5F97;&#x8212;&#x670D;&#x5C31;&#x597D;&#xFF0C;&#x56E2;&#x961F;&#x5408;&#x4F5C;&#x8FD8;&#x662F;&#x975E;&#x5E38;&#x63A8;&#x8350;&#x5B9A;&#x597D; eslint &#x89C4;&#x5219;&#xFF0C;&#x4F7F;&#x7528;&#x5C3D;&#x91CF;&#x8BE6;&#x7EC6;&#x7684;&#x540C;&#x4E00;&#x5957;&#x89C4;&#x5219;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x5408;&#x5E76;&#x65F6;&#x611F;&#x89C9;&#x4F1A;&#x975E;&#x5E38;&#x723D;&#x5FEB;&#x3002;</p><p><span class="img-wrap"><img data-src="/img/bVbgZ1H?w=681&amp;h=372" src="https://static.alili.tech/img/bVbgZ1H?w=681&amp;h=372" alt="clipboard.png" title="clipboard.png" style="cursor:pointer;display:inline"></span></p><p>&#x8BBE;&#x7F6E; eslint &#x540E;&#x5EFA;&#x8BAE;&#x914D;&#x7F6E;&#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668;&#x7684; overlay &#x9009;&#x9879;&#xFF0C;&#x5728; eslint &#x62A5;&#x9519;&#x65F6;&#x4F1A;&#x8986;&#x76D6;&#x5728;&#x9875;&#x9762;&#x4E0A;&#xFF0C;&#x65F6;&#x523B;&#x63D0;&#x9192;&#x4F60;&#x5199;&#x4EE3;&#x7801;&#x5F97;&#x6709;&#x4FE1;&#x6761;&#x3002;</p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="  devServer: {
    overlay: {
      warnings: true,
      errors: true,
    },
  }," title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs yaml"><code><span class="hljs-attr">  devServer:</span> <span class="hljs-string">{</span>
<span class="hljs-attr">    overlay:</span> <span class="hljs-string">{</span>
<span class="hljs-attr">      warnings:</span> <span class="hljs-literal">true</span><span class="hljs-string">,</span>
<span class="hljs-attr">      errors:</span> <span class="hljs-literal">true</span><span class="hljs-string">,</span>
    <span class="hljs-string">},</span>
  <span class="hljs-string">},</span></code></pre><h1 id="articleHeader5">&#x8D44;&#x6E90;&#x4F18;&#x5316;</h1><h2 id="articleHeader6">&#x56FE;&#x7247;</h2><p>vue-cli3 &#x642D;&#x5EFA;&#x7684;&#x5DE5;&#x7A0B;&#x6CA1;&#x6709;&#x81EA;&#x5E26;&#x56FE;&#x7247;&#x4F18;&#x5316;&#x63D2;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x8BF7;&#x81EA;&#x884C;&#x5B89;&#x88C5;&#x3002;&#x6709;&#x66F4;&#x597D;&#x7684;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x63D2;&#x4EF6;&#x6C42;&#x63A8;&#x8350;&#x5566;&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F; <code>imagemin-webpack-plugin</code>&#xFF0C;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="var ImageminPlugin = require(&apos;imagemin-webpack-plugin&apos;).default
// Or if using ES2015:
// import ImageminPlugin from &apos;imagemin-webpack-plugin&apos;
 
module.exports = {
  plugins: [
    // Make sure that the plugin is after any plugins that add images
    new ImageminPlugin({
      disable: process.env.NODE_ENV !== &apos;production&apos;, // Disable during development
      pngquant: {
        quality: &apos;95-100&apos;
      }
    })
  ]
}" title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs stylus"><code><span class="hljs-selector-tag">var</span> ImageminPlugin = require(<span class="hljs-string">&apos;imagemin-webpack-plugin&apos;</span>)<span class="hljs-selector-class">.default</span>
<span class="hljs-comment">// Or if using ES2015:</span>
<span class="hljs-comment">// import ImageminPlugin from &apos;imagemin-webpack-plugin&apos;</span>
 
module<span class="hljs-selector-class">.exports</span> = {
  plugins: [
    <span class="hljs-comment">// Make sure that the plugin is after any plugins that add images</span>
    new ImageminPlugin({
      disable: process<span class="hljs-selector-class">.env</span><span class="hljs-selector-class">.NODE_ENV</span> !== <span class="hljs-string">&apos;production&apos;</span>, <span class="hljs-comment">// Disable during development</span>
      pngquant: {
        quality: <span class="hljs-string">&apos;95-100&apos;</span>
      }
    })
  ]
}</code></pre><h2 id="articleHeader7">&#x5B57;&#x4F53;</h2><p>&#x5BF9;&#x4E8E;&#x4E2D;&#x6587;&#x7AD9;&#x70B9;&#xFF0C;&#x5B57;&#x4F53;&#x95EE;&#x9898;&#x53EF;&#x662F;&#x4E2A;&#x5927;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x4E2D;&#x6587;&#x5B57;&#x4F53;&#x5B9E;&#x5728;&#x592A;&#x592A;&#x592A;&#x592A;&#x5927;&#x4E86;&#xFF0C;&#x968F;&#x968F;&#x4FBF;&#x4FBF;&#x4E00;&#x4E2A;&#x90FD; 10m &#x4E86;&#xFF0C;&#x7B49;&#x5F85;&#x8FD9;&#x4E1C;&#x897F;&#x4E0B;&#x8F7D;&#x771F;&#x7684;&#x7D66;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x5E26;&#x6765;&#x81F4;&#x547D;&#x6253;&#x51FB;&#xFF0C;&#x4F46;&#x662F;&#xFF01;&#x4F46;&#x662F;&#xFF01;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF01;</p><h3 id="articleHeader8"><a href="https://github.com/allanguys/font-spider-plus" rel="nofollow noreferrer" target="_blank">font-spider-plus</a></h3><p>&#x4E4B;&#x524D;&#x4E00;&#x76F4;&#x77E5;&#x9053; font-spider&#xFF0C;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x662F;&#x83B7;&#x53D6;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x5B57;&#x4F53;&#xFF0C;&#x7136;&#x540E;&#x5206;&#x6790;&#x51FA;&#x4F7F;&#x7528;&#x4E86;&#x6539;&#x5B57;&#x4F53;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x6700;&#x540E;&#x628A;&#x5B57;&#x7B26;&#x62BD;&#x79BB;&#x51FA;&#x6765;&#x3002;&#x8FD9;&#x5927;&#x5927;&#x51CF;&#x5C11;&#x4E86;&#x4E2D;&#x6587;&#x5B57;&#x4F53;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x4F46;&#x662F;&#x7F3A;&#x4E0D;&#x80FD;&#x7528;&#x4E8E; js &#x6E32;&#x67D3;&#x7684;&#x7F51;&#x9875;&#xFF0C;&#x540E;&#x6765;&#x624D;&#x627E;&#x5230; font-spider-plus&#xFF0C;&#x867D;&#x7136;&#x8981;&#x624B;&#x52A8;&#x64CD;&#x4F5C;&#x4E00;&#x4E0B;&#xFF08;&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;&#x53D1;&#x5E03;&#x7F51;&#x9875;&#x4E4B;&#x540E;&#x7528; fsp &#x628A;&#x7528;&#x5230;&#x7684;&#x5B57;&#x722C;&#x51FA;&#x6765;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x5F97;&#x5230;&#x7684;&#x4F18;&#x5316;&#x771F;&#x7684;&#x5F88;&#x5927;&#x54E6;&#xFF01;</p><h1 id="articleHeader9">&#x54CD;&#x5E94;&#x5F0F;&#x8BBE;&#x8BA1;</h1><p>PWA &#x7ED9;&#x4E86;&#x6211;&#x4EEC;&#x4E00;&#x4E2A;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x8DE8;&#x5E73;&#x53F0;&#x65B9;&#x6CD5;&#xFF0C;&#x4E0D;&#x53EA;&#x6709;&#x79FB;&#x52A8;&#x7AEF;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5230;&#x9996;&#x5C4F;&#xFF0C;PC &#x7AEF;&#x4E5F;&#x540C;&#x6837;&#x53EF;&#x4EE5;&#xFF0C;&#x6240;&#x4EE5;&#x54CD;&#x5E94;&#x5F0F;&#x8BBE;&#x8BA1;&#x5BF9; PWA &#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x5FC5;&#x987B;&#x7684;&#x3002;<br>PC &#x7AEF;&#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x5728; F12 &#x91CC;&#xFF0C;&#x81F3;&#x4E8E;&#x66F4;&#x52A0;&#x65B9;&#x4FBF;&#x7684;&#x65B9;&#x6CD5;...&#x597D;&#x50CF;&#x662F;&#x8981;&#x6539; flag &#x624D;&#x80FD;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x4E5F;&#x8C08;&#x4E0D;&#x4E0A;&#x591A;&#x65B9;&#x4FBF;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4ECB;&#x7ECD;&#x4E86;&#xFF0C;&#x7B49;&#x5230;&#x6B64;&#x9879;&#x6280;&#x672F;&#x66F4;&#x52A0;&#x6210;&#x719F;&#xFF0C;&#x60F3;&#x5FC5;&#x8FD9;&#x4E2A;&#x6309;&#x94AE;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5728;&#x663E;&#x773C;&#x7684;&#x4F4D;&#x7F6E; &#x1F602;</p><p><span class="img-wrap"><img data-src="/img/bVbg0NK?w=627&amp;h=372" src="https://static.alili.tech/img/bVbg0NK?w=627&amp;h=372" alt="clipboard.png" title="clipboard.png" style="cursor:pointer;display:inline"></span></p><h1 id="articleHeader10">PWA &#x4E13;&#x5C5E;&#x95EE;&#x9898;</h1><p>&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; LightHouse &#x7ED9;&#x4F60;&#x7684; PWA &#x8BC4;&#x5206;&#xFF0C;&#x62A5;&#x544A;&#x4E2D;&#x8FD8;&#x4F1A;&#x5E26;&#x6709;&#x4FEE;&#x6539;&#x5EFA;&#x8BAE;&#xFF0C;&#x5341;&#x5206;&#x5B9E;&#x7528;&#x3002;</p><p><span class="img-wrap"><img data-src="/img/bVbg30E?w=853&amp;h=299" src="https://static.alili.tech/img/bVbg30E?w=853&amp;h=299" alt="clipboard.png" title="clipboard.png" style="cursor:pointer;display:inline"></span></p><h2 id="articleHeader11">manifest.json</h2><p>PWA &#x6DFB;&#x52A0;&#x81F3;&#x684C;&#x9762;&#x7684;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x4F9D;&#x8D56;&#x4E8E; <code>manifest.json</code>&#x3002;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7ED3;&#x6784;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x586B;&#x5199;&#x5BF9;&#x5E94;&#x5B57;&#x6BB5;&#x5373;&#x53EF;&#xFF0C;&#x53EF;&#x5728;<a href="https://lavas.baidu.com/pwa/engage-retain-users/add-to-home-screen/introduction" rel="nofollow noreferrer" target="_blank">&#x8FD9;&#x91CC;</a>&#x4E86;&#x89E3;&#x8BE6;&#x60C5;&#x3002;</p><h2 id="articleHeader12">Service Worker &#x5237;&#x65B0;</h2><p>&#x9488;&#x5BF9; PWA &#x529F;&#x80FD;&#x6765;&#x8BF4;&#xFF0C;&#x9879;&#x76EE;&#x6210;&#x529F;&#x751F;&#x6210;&#x5C31;&#x5DF2;&#x7ECF;&#x914D;&#x7F6E;&#x597D;&#x79BB;&#x7EBF;&#x7F13;&#x5B58;&#x529F;&#x80FD;&#xFF0C;&#x5BF9; Service Worker &#x4E0D;&#x719F;&#x6089;&#x7684;&#x540C;&#x5B66;&#x6765;&#x8BF4;&#x53EF;&#x4EE5;&#x8BF4;&#x5F88;&#x65B9;&#x4FBF;&#x4E86;&#x3002;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x63A8;&#x9001;&#x529F;&#x80FD;&#x548C; Service Worker &#x7684;&#x66F4;&#x591A;&#x7EC6;&#x8282;&#x4ECD;&#x7136;&#x9700;&#x8981;&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x624D;&#x80FD;&#x6D41;&#x7545;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x65B0;&#x5174;&#x73A9;&#x610F;&#x3002;<br>&#xFF08;&#x4EE5;&#x4E0B;&#x79F0; Service Worker &#x4E3A; SW&#xFF09;<br>&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x7279;&#x522B;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#xFF0C;&#x90A3;&#x5C31;&#x662F; SW &#x7684;&#x66F4;&#x65B0;&#x95EE;&#x9898;&#x3002;SW &#x63A7;&#x5236;&#x9879;&#x76EE;&#x73AF;&#x5883;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x4F46;&#x662F; SW &#x66F4;&#x65B0;&#x540E;&#x600E;&#x4E48;&#x5237;&#x65B0;&#x7F13;&#x5B58;&#x5C31;&#x4E0D;&#x90A3;&#x4E48;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x4E86;&#x3002;SW &#x66F4;&#x65B0;&#x540E;&#xFF0C;&#x4F1A;&#x8FDB;&#x5165; waiting &#x72B6;&#x6001;&#xFF0C;&#x65E7;&#x7684; SW &#x4F9D;&#x65E7;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x65B0;&#x7684; SW &#x65E0;&#x6CD5;&#x6FC0;&#x6D3B;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x5173;&#x95ED;&#x6574;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x624D;&#x80FD;&#x628A;&#x65E7;&#x7684; SW &#x5173;&#x95ED;&#xFF0C;&#x518D;&#x6B21;&#x6253;&#x5F00;&#x7F51;&#x9875;&#x5C31;&#x80FD;&#x770B;&#x5230;&#x65B0;&#x7684; SW &#x8FD0;&#x4F5C;&#x4E86;&#x3002;<br>&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x4FBF;&#x4E00;&#x70B9;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x914D;&#x7F6E;</p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="    workboxOptions: {
      skipWaiting: true,
      clientsClaim: true,
    }," title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs yaml"><code><span class="hljs-attr">    workboxOptions:</span> <span class="hljs-string">{</span>
<span class="hljs-attr">      skipWaiting:</span> <span class="hljs-literal">true</span><span class="hljs-string">,</span>
<span class="hljs-attr">      clientsClaim:</span> <span class="hljs-literal">true</span><span class="hljs-string">,</span>
    <span class="hljs-string">},</span></code></pre><p>&#x4E4B;&#x540E;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x9009;&#x9879;&#x5982;&#x5176;&#x5B57;&#x9762;&#x610F;&#x601D;&#xFF0C;&#x4F1A;&#x8DF3;&#x8FC7; Waiting &#x72B6;&#x6001;&#xFF0C;&#x800C; clientsClaim &#x53EF;&#x4EE5;&#x8BA9; SW &#x8FDB;&#x5165; activated &#x72B6;&#x6001;&#x540E;&#x7ACB;&#x5373;&#x63A7;&#x5236;&#x9875;&#x9762;&#xFF08;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;SW &#x5373;&#x4F7F;&#x7ACB;&#x523B;&#x63A7;&#x5236;&#x9875;&#x9762;&#x5E76;&#x8F93;&#x51FA;&#x65B0;&#x6570;&#x636E;&#xFF0C;SPA &#x4E5F;&#x8981;&#x5237;&#x65B0;&#x624D;&#x80FD;&#x6E32;&#x67D3;&#x4E3A;&#x6700;&#x65B0;&#x7248;&#x672C;&#xFF0C;&#x4F46;&#x8FD9;&#x4E5F;&#x603B;&#x6BD4;&#x5173;&#x95ED;&#x6D4F;&#x89C8;&#x5668;&#x597D;&#x591A;&#x4E86;&#xFF09;&#x3002;<br>&#x8BE6;&#x7EC6;&#x539F;&#x7406;&#x8BF7;&#x67E5;&#x9605;<a href="https://developers.google.com/web/fundamentals/primers/service-workers/lifecycle" rel="nofollow noreferrer" target="_blank">&#x8C37;&#x6B4C;&#x5B98;&#x65B9;&#x8D44;&#x6599;</a>&#xFF08;&#x9700;&#x8981;&#x68AF;&#x5B50;&#xFF09;&#x3002;</p><h3 id="articleHeader13">&#x6700;&#x540E;&#xFF0C;&#x7ED9;&#x4F60;&#x4E00;&#x4E2A;&#x4F5B;&#x7CFB;&#x5237;&#x65B0;&#x65B9;&#x6CD5;</h3><blockquote>Service Worker &#x7684;&#x7279;&#x6B8A;&#x4E4B;&#x5904;&#x9664;&#x4E86;&#x7531;&#x6D4F;&#x89C8;&#x5668;&#x89E6;&#x53D1;&#x66F4;&#x65B0;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x5E94;&#x7528;&#x4E86;&#x7279;&#x6B8A;&#x7684;&#x7F13;&#x5B58;&#x7B56;&#x7565;&#xFF1A; &#x5982;&#x679C;&#x8BE5;&#x6587;&#x4EF6;&#x5DF2; 24 &#x5C0F;&#x65F6;&#x6CA1;&#x6709;&#x66F4;&#x65B0;&#xFF0C;&#x5F53; Update &#x89E6;&#x53D1;&#x65F6;&#x4F1A;&#x5F3A;&#x5236;&#x66F4;&#x65B0;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B; Service Worker &#x4F1A;&#x6BCF;&#x5929;&#x66F4;&#x65B0;&#x4E00;&#x6B21;&#x3002;</blockquote><h2 id="articleHeader14">Preload</h2><p><span class="img-wrap"><img data-src="/img/bVbgZ3i?w=515&amp;h=427" src="https://static.alili.tech/img/bVbgZ3i?w=515&amp;h=427" alt="clipboard.png" title="clipboard.png" style="cursor:pointer"></span></p><p>&#x8FD9;&#x4E2A;&#x662F; Lighthouse &#x63D0;&#x9192;&#x6211;&#x7684;&#x3002;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x5FC5;&#x8981;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Preload &#x9884;&#x5148;&#x4E0B;&#x8F7D;&#xFF08;&#x7279;&#x522B;&#x662F;&#x5B57;&#x4F53;&#x6216;&#x56FE;&#x7247;&#x7B49;&#x8D44;&#x6E90;&#xFF09;&#xFF0C;&#x4E0D;&#x5FC5;&#x7B49;&#x4F7F;&#x7528;&#x65F6;&#x518D;&#x4E0B;&#x8F7D;&#xFF0C;&#x8FD9;&#x53C8;&#x5C06;&#x4F1A;&#x662F;&#x51E0;&#x767E;&#x6BEB;&#x79D2;&#x7684;&#x7B49;&#x5F85;&#x3002;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x53C2;&#x8003; vue-cli &#x5B98;&#x7F51;&#x76F8;&#x5173;&#x9875;&#x9762;&#xFF1A;<a href="https://cli.vuejs.org/zh/guide/html-and-static-assets.html#preload" rel="nofollow noreferrer" target="_blank">https://cli.vuejs.org/zh/guid...</a></p><h1 id="articleHeader15">&#x6700;&#x540E;</h1><p>&#x5B8C;&#x6574;&#x914D;&#x7F6E;&#x5730;&#x5740;<br><a href="https://github.com/ssshooter/nippon-color/blob/master/vue.config.js" rel="nofollow noreferrer" target="_blank">https://github.com/ssshooter/...</a><br><a href="https://github.com/ssshooter/nippon-color/blob/master/.eslintrc.js" rel="nofollow noreferrer" target="_blank">https://github.com/ssshooter/...</a><br>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6700;&#x6700;&#x7B80;&#x5355;&#x7684; PWA&#xFF0C;&#x6CA1;&#x6709;&#x5BF9; SW &#x8FDB;&#x884C;&#x6DF1;&#x5EA6;&#x914D;&#x7F6E;&#xFF0C;&#x5F88;&#x591A;&#x529F;&#x80FD;&#x6CA1;&#x6709;&#x7528;&#x4E0A;&#x3002;Vue-cli3 &#x642D;&#x5EFA;&#x7684;&#x9879;&#x76EE;&#x4F7F;&#x7528; <a href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin" rel="nofollow noreferrer" target="_blank"><code>workbox-webpack-plugin</code></a>&#xFF0C;SW &#x9ED8;&#x8BA4;&#x662F;&#x81EA;&#x5DF1;&#x751F;&#x6210;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x9644;&#x52A0; SW &#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; InjectManifest &#x63D2;&#x4EF6;&#x3002;&#x6700;&#x540E;&#x63D0;&#x4E00;&#x4E0B; <a href="https://lavas.baidu.com/app" rel="nofollow noreferrer" target="_blank">Lavas App</a>&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x4F60;&#x7684; PWA &#x5305;&#x88C5;&#x6210;&#x4E00;&#x4E2A; apk&#xFF0C;&#x672C;&#x8D28;&#x662F;&#x5FEB;&#x6377;&#x65B9;&#x5F0F;&#xFF0C;&#x65B9;&#x4FBF;&#x4E86;&#x8FD8;&#x6CA1;&#x652F;&#x6301; PWA &#x7684;&#x5B89;&#x5353;&#x7CFB;&#x7EDF;&#x3002;</p><p>&#x5982;&#x679C;&#x6709;&#x5176;&#x4ED6;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x8BC4;&#x8BBA;&#x533A;&#x8BA8;&#x8BBA;~</p>
{{< /raw >}}

# 版权声明
本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，

本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。 

原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！

## 原文标题
一个 PWA 的诞生

## 原文链接
[https://segmentfault.com/a/1190000016420122](https://segmentfault.com/a/1190000016420122)


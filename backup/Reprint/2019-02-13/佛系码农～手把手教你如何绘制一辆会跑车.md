---
title: '佛系码农～手把手教你如何绘制一辆会跑车' 
date: 2019-02-13 2:31:23
hidden: true
slug: 8pg1qg21xnv
categories: [reprint]
---

{{< raw >}}

                    
<p><span class="img-wrap"><img data-src="/img/bVbisxs?w=1008&amp;h=298" src="https://static.alili.tech/img/bVbisxs?w=1008&amp;h=298" alt="手把手教你如何绘制一辆会跑车，首席填坑官∙苏南分享" title="手把手教你如何绘制一辆会跑车，首席填坑官∙苏南分享" style="cursor: pointer; display: inline;"></span></p>
<blockquote>作者：<a href="https://github.com/meibin08/" rel="nofollow noreferrer" target="_blank">首席填坑官∙苏南</a><br>来源：<a href="https://honeybadger8.github.io/blog/" rel="nofollow noreferrer" target="_blank">@IT·平头哥联盟</a> <br>交流群：<a href="https://shang.qq.com/wpa/qunwpa?idkey=265166274bca82709718a0ae1fa9c55d65dd3608ebc780f9e6ea41e2761f5ec2" rel="nofollow noreferrer" target="_blank">912594095</a>。本文原创，著作权归作者所有，转载请注明原链接及出处</blockquote>
<h2 id="articleHeader0">前言</h2>
<p>　　灵感来源于前些天捡到钱了，就想着是时候给自己买辆车了，工作这么多年了应该对自己好一点，在网上搜索了一下看到这个车型。其实几年前是买过一辆的，但是不到一个月就被人偷了，伤心了好久。这次一定锁好，上三把锁保证小偷再也偷不走了，于是我拿着钱去买了些<a href="https://segmentfault.com/a/1190000016615237">益力多</a>，跟同事分享了，心情还是比较愉悦的。—— <a href="https://honeybadger8.github.io/blog/" rel="nofollow noreferrer" target="_blank">@IT·平头哥联盟</a>，我是<code>首席填坑官</code>∙<a href="https://github.com/meibin08" rel="nofollow noreferrer" target="_blank">苏南</a>(South·Su) ^_^～</p>
<p>　　但想来作为一名程序（嗯，还是个菜鸟，专业首席填坑官哦😇），车基本是用不上的啦，为啥？因为有改不完的bug，记得刚毕业那时候最大的梦想是：“撩个妹子 携手仗剑天涯，惩奸除恶、劫富济贫，快意人生～”，无奈一入IT深似海，<a href="https://github.com/meibin08" rel="nofollow noreferrer" target="_blank">从此BUG改不完啊</a>。所以还是多学习吧，这不就学着画了个车满足一下自己的心里安慰，在这里把大家一起分享一下，唉，有点扯偏了～，大家先来看一下最终的效果图吧！</p>
<p><span class="img-wrap"><img data-src="/img/bVbimWo?w=396&amp;h=300" src="https://static.alili.tech/img/bVbimWo?w=396&amp;h=300" alt="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车的绘制,图片来源于Google搜索" title="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车的绘制,图片来源于Google搜索" style="cursor: pointer;"></span><br>　　</p>
<h2 id="articleHeader1">过程解析：</h2>
<p>　　效果已经看了到，有没有感觉很牛B？？其实也就一般般啦～，接下来就让我带大家一起分解一下它的实现过程吧<br>　　<code>canvas</code>中文名中：<a href="https://juejin.im/post/5bbaeb48f265da0aca3323c1" rel="nofollow noreferrer" target="_blank">画布</a>，它就跟我们在纸上画画一样，画某样东西之前，我们要先学会构思、拆解你要画的东西，就跟汽车、手机等东西一样，一个成品都是由很多零件组成的，当你拆解开来，一点点完成再组装的，就会变的容易的多。</p>
<ul><li>
<p><strong>绘制地平线</strong> ：</p>
<ul>
<li>首先我们基于画布的高度取一定的比例，在底部画一条线;</li>
<li>从观察动画，它还有几个点，这个是用于视差滚动的时候，来欺骗我们的眼睛的，直接一条线肯定再怎么动也没有用，点的移动可以形成一个动画的效果;</li>
<li>再加一点修饰，几个点移动有点太单调了，大家可以想像一下，当你骑车的时候，<code>车的速度</code>与周围的事物、建筑、人产生一个交差，那种感觉是很刺激的，那么我们也来加一点东西，让动画看起来更丰富一些，我选择了 三条线，线本身有个渐变过渡的效果，比纯色要灵动些动画看起来更逼真，而且初始它是不在画布范围内的，这个点要注意一下;</li>
<li>下面的两张图，第二张是生成gif工具里截出来的，它就是动画的分解，其实<code>所谓的动画</code>，也是由一张张静态图组成，然后快速过渡，让视觉形成了视差，最后欺骗了大脑，我看见动画了……</li>
<li>
<strong>知识点</strong>：<code>lineTo</code>、<code>strokeStyle</code>、<code>stroke</code>、<code>restore</code>等，这里不一一讲解了，如有不了解可自行<a href="http://www.w3school.com.cn/tags/html_ref_canvas.asp" rel="nofollow noreferrer" target="_blank">查看 w3school API</a>，</li>
</ul>
</li></ul>
<p><span class="img-wrap"><img data-src="/img/bVbimWw?w=360&amp;h=240" src="https://static.alili.tech/img/bVbimWw?w=360&amp;h=240" alt="本文由@IT·平头哥联盟-首席填坑官∙苏南分享 - Pure Canvas Bike " title="本文由@IT·平头哥联盟-首席填坑官∙苏南分享 - Pure Canvas Bike " style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimWX?w=1994&amp;h=1082" src="https://static.alili.tech/img/bVbimWX?w=1994&amp;h=1082" alt="每周动画一点点之canvas自行车的绘制" title="每周动画一点点之canvas自行车的绘制" style="cursor: pointer; display: inline;"></span></p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="  horizon(){
      /**
      * 轮子的底部，也称地平线：
      1.清除画布
      2.画一条直线，且高度6px
      本文@IT·平头哥联盟-首席填坑官∙苏南分享，非商业转载请注明原链接及出处
       */

      this.wheelPos = [];
      this.ctx.save();
      this.ctx.clearRect(0, 0, this.canvasW, this.canvasH);

      let horizonX = 0,horizonY = this.canvasH-100;
      this.ctx.beginPath();
      this.ctx.strokeStyle = this.color;
      this.ctx.lineWidth=6;
      this.ctx.moveTo(horizonX,horizonY);
      this.ctx.lineTo(this.canvasW,horizonY);
      this.ctx.closePath();
      this.ctx.stroke();

      Array.from({length:5}).map((k,v)=>{
          let dotProportion = (this.canvasW*0.49)*v-this.oneCent;
          this.wheelPos.push({x:dotProportion,y:horizonY-this.wheelRadius});
          let startX = dotProportion-(this.animateNum*2); //用于动画滚动移动
          this.ctx.beginPath();
          this.ctx.strokeStyle = &quot;#f9f8ef&quot;;
          this.ctx.lineWidth=6;
          this.ctx.moveTo(startX,horizonY);
          this.ctx.lineTo(startX+5,horizonY);
          this.ctx.closePath();
          this.ctx.stroke();
      });
      this.ctx.restore();
      this.shuttle();
      // this.wheel();
  }
  shuttle(){
      /**
      * 画几根横线，有点视差，感觉骑车在飞速穿梭的感觉：
      本文@IT·平头哥联盟-首席填坑官∙苏南分享，非商业转载请注明原链接及出处
       */
      let shuttleX = this.canvasW+100,
              shuttleY = this.canvasH/6;
      let shuttleW = shuttleX+100;
      [0,40,0].map((k,v)=>{
          let random = Math.random()+2;
          let x = shuttleX+k-(this.animateNum*(2.2*random));
          let y = shuttleY+v*24;
          let w = shuttleW+k-(this.animateNum*(2.2*random));
          let grd=this.ctx.createLinearGradient(x,y,w,y);
          grd.addColorStop(0,&quot;#30212c&quot;);
          grd.addColorStop(1,&quot;#fff&quot;);
          this.ctx.beginPath();
          this.ctx.lineCap=&quot;round&quot;;
          this.ctx.strokeStyle = grd;
          this.ctx.lineWidth=3;
          this.ctx.moveTo(x,y);
          this.ctx.lineTo(w,y);
          this.ctx.stroke();
          this.ctx.closePath();

      });

  }" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">  horizon(){
      <span class="hljs-comment">/**
      * 轮子的底部，也称地平线：
      1.清除画布
      2.画一条直线，且高度6px
      本文@IT·平头哥联盟-首席填坑官∙苏南分享，非商业转载请注明原链接及出处
       */</span>

      <span class="hljs-keyword">this</span>.wheelPos = [];
      <span class="hljs-keyword">this</span>.ctx.save();
      <span class="hljs-keyword">this</span>.ctx.clearRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.canvasW, <span class="hljs-keyword">this</span>.canvasH);

      <span class="hljs-keyword">let</span> horizonX = <span class="hljs-number">0</span>,horizonY = <span class="hljs-keyword">this</span>.canvasH<span class="hljs-number">-100</span>;
      <span class="hljs-keyword">this</span>.ctx.beginPath();
      <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-keyword">this</span>.color;
      <span class="hljs-keyword">this</span>.ctx.lineWidth=<span class="hljs-number">6</span>;
      <span class="hljs-keyword">this</span>.ctx.moveTo(horizonX,horizonY);
      <span class="hljs-keyword">this</span>.ctx.lineTo(<span class="hljs-keyword">this</span>.canvasW,horizonY);
      <span class="hljs-keyword">this</span>.ctx.closePath();
      <span class="hljs-keyword">this</span>.ctx.stroke();

      <span class="hljs-built_in">Array</span>.from({<span class="hljs-attr">length</span>:<span class="hljs-number">5</span>}).map(<span class="hljs-function">(<span class="hljs-params">k,v</span>)=&gt;</span>{
          <span class="hljs-keyword">let</span> dotProportion = (<span class="hljs-keyword">this</span>.canvasW*<span class="hljs-number">0.49</span>)*v-<span class="hljs-keyword">this</span>.oneCent;
          <span class="hljs-keyword">this</span>.wheelPos.push({<span class="hljs-attr">x</span>:dotProportion,<span class="hljs-attr">y</span>:horizonY-<span class="hljs-keyword">this</span>.wheelRadius});
          <span class="hljs-keyword">let</span> startX = dotProportion-(<span class="hljs-keyword">this</span>.animateNum*<span class="hljs-number">2</span>); <span class="hljs-comment">//用于动画滚动移动</span>
          <span class="hljs-keyword">this</span>.ctx.beginPath();
          <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-string">"#f9f8ef"</span>;
          <span class="hljs-keyword">this</span>.ctx.lineWidth=<span class="hljs-number">6</span>;
          <span class="hljs-keyword">this</span>.ctx.moveTo(startX,horizonY);
          <span class="hljs-keyword">this</span>.ctx.lineTo(startX+<span class="hljs-number">5</span>,horizonY);
          <span class="hljs-keyword">this</span>.ctx.closePath();
          <span class="hljs-keyword">this</span>.ctx.stroke();
      });
      <span class="hljs-keyword">this</span>.ctx.restore();
      <span class="hljs-keyword">this</span>.shuttle();
      <span class="hljs-comment">// this.wheel();</span>
  }
  shuttle(){
      <span class="hljs-comment">/**
      * 画几根横线，有点视差，感觉骑车在飞速穿梭的感觉：
      本文@IT·平头哥联盟-首席填坑官∙苏南分享，非商业转载请注明原链接及出处
       */</span>
      <span class="hljs-keyword">let</span> shuttleX = <span class="hljs-keyword">this</span>.canvasW+<span class="hljs-number">100</span>,
              shuttleY = <span class="hljs-keyword">this</span>.canvasH/<span class="hljs-number">6</span>;
      <span class="hljs-keyword">let</span> shuttleW = shuttleX+<span class="hljs-number">100</span>;
      [<span class="hljs-number">0</span>,<span class="hljs-number">40</span>,<span class="hljs-number">0</span>].map(<span class="hljs-function">(<span class="hljs-params">k,v</span>)=&gt;</span>{
          <span class="hljs-keyword">let</span> random = <span class="hljs-built_in">Math</span>.random()+<span class="hljs-number">2</span>;
          <span class="hljs-keyword">let</span> x = shuttleX+k-(<span class="hljs-keyword">this</span>.animateNum*(<span class="hljs-number">2.2</span>*random));
          <span class="hljs-keyword">let</span> y = shuttleY+v*<span class="hljs-number">24</span>;
          <span class="hljs-keyword">let</span> w = shuttleW+k-(<span class="hljs-keyword">this</span>.animateNum*(<span class="hljs-number">2.2</span>*random));
          <span class="hljs-keyword">let</span> grd=<span class="hljs-keyword">this</span>.ctx.createLinearGradient(x,y,w,y);
          grd.addColorStop(<span class="hljs-number">0</span>,<span class="hljs-string">"#30212c"</span>);
          grd.addColorStop(<span class="hljs-number">1</span>,<span class="hljs-string">"#fff"</span>);
          <span class="hljs-keyword">this</span>.ctx.beginPath();
          <span class="hljs-keyword">this</span>.ctx.lineCap=<span class="hljs-string">"round"</span>;
          <span class="hljs-keyword">this</span>.ctx.strokeStyle = grd;
          <span class="hljs-keyword">this</span>.ctx.lineWidth=<span class="hljs-number">3</span>;
          <span class="hljs-keyword">this</span>.ctx.moveTo(x,y);
          <span class="hljs-keyword">this</span>.ctx.lineTo(w,y);
          <span class="hljs-keyword">this</span>.ctx.stroke();
          <span class="hljs-keyword">this</span>.ctx.closePath();

      });

  }</code></pre>
<ul><li>
<p><strong>绘制车轮</strong> ：</p>
<ul>
<li>接下来我们来画车的两个轮子，轮子的位置在哪里呢？我也是观察了有一会才发现的，其实刚才的地平线，两点的位置，就是车轮的中心点;</li>
<li>所以在刚才绘制点的时候，就记录了5个点的坐标，这样就省去了一次计算，中间有两次是我们需要的</li>
<li>
<strong>知识点</strong>：<code>arc</code>、<code>fill</code>
</li>
</ul>
</li></ul>
<p><span class="img-wrap"><img data-src="/img/bVbimWZ?w=1876&amp;h=878" src="https://static.alili.tech/img/bVbimWZ?w=1876&amp;h=878" alt="每周动画一点点之canvas自行车的车轮" title="每周动画一点点之canvas自行车的车轮" style="cursor: pointer;"></span></p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="  console.log(this.wheelPos);
  this.wheelPos = this.wheelPos.slice(1,3); //这里取1-3
  console.log(this.wheelPos);
  this.wheelPos.map((wheelItem,v)=>{
    let wheelItemX = wheelItem.x, 
    wheelItemY= wheelItem.y-this.wheelBorder/1.5;

    //外胎
    this.ctx.beginPath();
    this.ctx.lineWidth=this.wheelBorder;
    this.ctx.fillStyle = &quot;#f5f5f0&quot;;
    this.ctx.strokeStyle = this.color;
    this.ctx.arc(wheelItemX,wheelItemY,this.wheelRadius,0,Math.PI*2,false);
    this.ctx.closePath();
    this.ctx.stroke();
    this.ctx.fill();


    //最后两轮胎中心点圆轴承
    this.axisDot(wheelItemX,wheelItemY);
    this.ctx.restore();
    
  });
  this.ctx.restore();" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.wheelPos);
  <span class="hljs-keyword">this</span>.wheelPos = <span class="hljs-keyword">this</span>.wheelPos.slice(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>); <span class="hljs-comment">//这里取1-3</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.wheelPos);
  <span class="hljs-keyword">this</span>.wheelPos.map(<span class="hljs-function">(<span class="hljs-params">wheelItem,v</span>)=&gt;</span>{
    <span class="hljs-keyword">let</span> wheelItemX = wheelItem.x, 
    wheelItemY= wheelItem.y-<span class="hljs-keyword">this</span>.wheelBorder/<span class="hljs-number">1.5</span>;

    <span class="hljs-comment">//外胎</span>
    <span class="hljs-keyword">this</span>.ctx.beginPath();
    <span class="hljs-keyword">this</span>.ctx.lineWidth=<span class="hljs-keyword">this</span>.wheelBorder;
    <span class="hljs-keyword">this</span>.ctx.fillStyle = <span class="hljs-string">"#f5f5f0"</span>;
    <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-keyword">this</span>.color;
    <span class="hljs-keyword">this</span>.ctx.arc(wheelItemX,wheelItemY,<span class="hljs-keyword">this</span>.wheelRadius,<span class="hljs-number">0</span>,<span class="hljs-built_in">Math</span>.PI*<span class="hljs-number">2</span>,<span class="hljs-literal">false</span>);
    <span class="hljs-keyword">this</span>.ctx.closePath();
    <span class="hljs-keyword">this</span>.ctx.stroke();
    <span class="hljs-keyword">this</span>.ctx.fill();


    <span class="hljs-comment">//最后两轮胎中心点圆轴承</span>
    <span class="hljs-keyword">this</span>.axisDot(wheelItemX,wheelItemY);
    <span class="hljs-keyword">this</span>.ctx.restore();
    
  });
  <span class="hljs-keyword">this</span>.ctx.restore();</code></pre>
<ul>
<li>同理，上面画好了两个圆，但车轮肯定有轴承，前后轮我做了些汪样的处理，后轮是实心的加了个填充;</li>
<li>前轮是画了一点断点的圆，用于动画的转动，</li>
<li>在外轮的半径上进行缩小一定比较，画内圈，这里我取了外圈的.94，作为内圆的半径，</li>
<li>还加了两个半圆的描边修饰，让动画跑起来的时候，车轮有动起来的感觉，半圆 Math.PI 就是一个180,(Math.PI * degrees) / 180;  degrees 就是我们想要绘制的起始/结束角度;</li>
<li>从下图可以看出，圆的填充用了 放射性渐变，<code>createRadialGradient</code>-创建放射状/环形的渐变（用在画布内容上）</li>
</ul>
<p><span class="img-wrap"><img data-src="/img/bVbimW3?w=1102&amp;h=846" src="https://static.alili.tech/img/bVbimW3?w=1102&amp;h=846" alt="每周动画一点点之canvas自行车的车轮，本文由@IT·平头哥联盟-首席填坑官∙苏南分享" title="每周动画一点点之canvas自行车的车轮，本文由@IT·平头哥联盟-首席填坑官∙苏南分享" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimXg?w=360&amp;h=240" src="https://static.alili.tech/img/bVbimXg?w=360&amp;h=240" alt="每周动画一点点之canvas自行车的车轮动画" title="每周动画一点点之canvas自行车的车轮动画" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimXk?w=1954&amp;h=1150" src="https://static.alili.tech/img/bVbimXk?w=1954&amp;h=1150" alt="每周动画一点点之canvas自行车的车轮动画分解图，由@IT·平头哥联盟-首席填坑官∙苏南分享" title="每周动画一点点之canvas自行车的车轮动画分解图，由@IT·平头哥联盟-首席填坑官∙苏南分享" style="cursor: pointer;"></span></p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="  context.createRadialGradient(x0,y0,r0,x1,y1,r1);
  + createRadialGradient API 说明：
    x0 = 渐变的开始圆的 x 坐标
    y0 = 渐变的开始圆的 y 坐标
    r0 = 开始圆的半径
    x1 = 渐变的结束圆的 x 坐标
    y1 = 渐变的结束圆的 y 坐标
    r1 = 结束圆的半径

    详细使用请看下面代码的实例" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="js">  context.createRadialGradient(x0,y0,r0,x1,y1,r1);
  + createRadialGradient API 说明：
    x0 = 渐变的开始圆的 x 坐标
    y0 = 渐变的开始圆的 y 坐标
    r0 = 开始圆的半径
    x1 = 渐变的结束圆的 x 坐标
    y1 = 渐变的结束圆的 y 坐标
    r1 = 结束圆的半径

    详细使用请看下面代码的实例</code></pre>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="
  let scaleMultiple = this.wheelRadius*.94;
  let speed1 = this.animateNum*2; //外圈半圆速度
  let speed2 = this.animateNum*3; //内小圈半圆速度
  //后轮
  if(v === 0){
    
    //内圆
    this.ctx.beginPath();
    let circleGrd=this.ctx.createRadialGradient(wheelItemX,wheelItemY,18,wheelItemX,wheelItemY,scaleMultiple);
      circleGrd.addColorStop(0,&quot;#584a51&quot;);
      circleGrd.addColorStop(1,&quot;#11090d&quot;);
    this.ctx.fillStyle = circleGrd;
    this.ctx.arc(wheelItemX,wheelItemY,scaleMultiple,0,Math.PI*2,false);
    this.ctx.fill();
    this.ctx.closePath();

    //两个半圆线
    
    [
      {lineW:2,radius:scaleMultiple*.6,sAngle:getRads(-135+speed1) , eAngle:getRads(110+speed1)},
      {lineW:1.2,radius:scaleMultiple*.45,sAngle:getRads(45+speed2) , eAngle:getRads(-50+speed2)}
    ].map((k,v)=>{
      this.ctx.beginPath();
      this.ctx.lineCap=&quot;round&quot;;
      this.ctx.strokeStyle =&quot;#fff&quot;;
      this.ctx.lineWidth=k.lineW;
      this.ctx.arc(wheelItemX,wheelItemY,k.radius,k.sAngle,k.eAngle,true);
      this.ctx.stroke();
      this.ctx.closePath();

    });
    this.ctx.restore();

  }
" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">
  <span class="hljs-keyword">let</span> scaleMultiple = <span class="hljs-keyword">this</span>.wheelRadius*<span class="hljs-number">.94</span>;
  <span class="hljs-keyword">let</span> speed1 = <span class="hljs-keyword">this</span>.animateNum*<span class="hljs-number">2</span>; <span class="hljs-comment">//外圈半圆速度</span>
  <span class="hljs-keyword">let</span> speed2 = <span class="hljs-keyword">this</span>.animateNum*<span class="hljs-number">3</span>; <span class="hljs-comment">//内小圈半圆速度</span>
  <span class="hljs-comment">//后轮</span>
  <span class="hljs-keyword">if</span>(v === <span class="hljs-number">0</span>){
    
    <span class="hljs-comment">//内圆</span>
    <span class="hljs-keyword">this</span>.ctx.beginPath();
    <span class="hljs-keyword">let</span> circleGrd=<span class="hljs-keyword">this</span>.ctx.createRadialGradient(wheelItemX,wheelItemY,<span class="hljs-number">18</span>,wheelItemX,wheelItemY,scaleMultiple);
      circleGrd.addColorStop(<span class="hljs-number">0</span>,<span class="hljs-string">"#584a51"</span>);
      circleGrd.addColorStop(<span class="hljs-number">1</span>,<span class="hljs-string">"#11090d"</span>);
    <span class="hljs-keyword">this</span>.ctx.fillStyle = circleGrd;
    <span class="hljs-keyword">this</span>.ctx.arc(wheelItemX,wheelItemY,scaleMultiple,<span class="hljs-number">0</span>,<span class="hljs-built_in">Math</span>.PI*<span class="hljs-number">2</span>,<span class="hljs-literal">false</span>);
    <span class="hljs-keyword">this</span>.ctx.fill();
    <span class="hljs-keyword">this</span>.ctx.closePath();

    <span class="hljs-comment">//两个半圆线</span>
    
    [
      {<span class="hljs-attr">lineW</span>:<span class="hljs-number">2</span>,<span class="hljs-attr">radius</span>:scaleMultiple*<span class="hljs-number">.6</span>,<span class="hljs-attr">sAngle</span>:getRads(<span class="hljs-number">-135</span>+speed1) , <span class="hljs-attr">eAngle</span>:getRads(<span class="hljs-number">110</span>+speed1)},
      {<span class="hljs-attr">lineW</span>:<span class="hljs-number">1.2</span>,<span class="hljs-attr">radius</span>:scaleMultiple*<span class="hljs-number">.45</span>,<span class="hljs-attr">sAngle</span>:getRads(<span class="hljs-number">45</span>+speed2) , <span class="hljs-attr">eAngle</span>:getRads(<span class="hljs-number">-50</span>+speed2)}
    ].map(<span class="hljs-function">(<span class="hljs-params">k,v</span>)=&gt;</span>{
      <span class="hljs-keyword">this</span>.ctx.beginPath();
      <span class="hljs-keyword">this</span>.ctx.lineCap=<span class="hljs-string">"round"</span>;
      <span class="hljs-keyword">this</span>.ctx.strokeStyle =<span class="hljs-string">"#fff"</span>;
      <span class="hljs-keyword">this</span>.ctx.lineWidth=k.lineW;
      <span class="hljs-keyword">this</span>.ctx.arc(wheelItemX,wheelItemY,k.radius,k.sAngle,k.eAngle,<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">this</span>.ctx.stroke();
      <span class="hljs-keyword">this</span>.ctx.closePath();

    });
    <span class="hljs-keyword">this</span>.ctx.restore();

  }
</code></pre>
<ul>
<li>
<strong> 拉下来我们就拿前轮开刀</strong> ：</li>
<li>前轮也是画了几个半圆，大概就是以某个角度为起点，然后分别画几个半圆，整体是一个半径，中间有断开，如： eAngle = [0，135，270], sAngle = [-45，0，180];就能画出如下图的圆：</li>
</ul>
<p><span class="img-wrap"><img data-src="/img/bVbimXs?w=1098&amp;h=834" src="https://static.alili.tech/img/bVbimXs?w=1098&amp;h=834" alt="每周动画一点点之canvas自行车的车轮动画分解图" title="每周动画一点点之canvas自行车的车轮动画分解图" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimXz?w=1104&amp;h=628" src="https://static.alili.tech/img/bVbimXz?w=1104&amp;h=628" alt="本文由@IT·平头哥联盟-首席填坑官∙苏南分享" title="本文由@IT·平头哥联盟-首席填坑官∙苏南分享" style="cursor: pointer; display: inline;"></span></p>
<ul><li>
<strong> 具体实现请看下面代码 </strong> ：</li></ul>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="  //两个圆，再缩小一圈，画线圆
  Array.from({length:3}).map((k,v)=>{
    let prevIndex = v-1 <= 0 ? 0 : v-1;
    let eAngle = v*135, sAngle = -45+(prevIndex*45)+v*90;
    let radius = scaleMultiple*.75;
    let _color_ = &quot;#120008&quot;;
    this.ctx.beginPath();
    this.ctx.lineCap=&quot;round&quot;;
    this.ctx.strokeStyle = _color_;
    this.ctx.lineWidth=3.5;
    this.ctx.arc(wheelItemX,wheelItemY,radius,getRads(sAngle+speed1),getRads(eAngle+speed1),false);
    this.ctx.stroke();
    this.ctx.closePath();

    if(v<2){
      //再缩小一圈
      let eAngleSmaller = 15+ v*210, sAngleSmaller = -30+v*90;
      let radiusSmaller = scaleMultiple*.45;
      this.ctx.beginPath();
      this.ctx.lineCap=&quot;round&quot;;
      this.ctx.strokeStyle = _color_;
      this.ctx.lineWidth=3;
      this.ctx.arc(wheelItemX,wheelItemY,radiusSmaller,getRads(sAngleSmaller+speed2),getRads(eAngleSmaller+speed2),false);
      this.ctx.stroke();
      this.ctx.closePath();
    }
    this.ctx.restore();
  });

" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">  <span class="hljs-comment">//两个圆，再缩小一圈，画线圆</span>
  <span class="hljs-built_in">Array</span>.from({<span class="hljs-attr">length</span>:<span class="hljs-number">3</span>}).map(<span class="hljs-function">(<span class="hljs-params">k,v</span>)=&gt;</span>{
    <span class="hljs-keyword">let</span> prevIndex = v<span class="hljs-number">-1</span> &lt;= <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : v<span class="hljs-number">-1</span>;
    <span class="hljs-keyword">let</span> eAngle = v*<span class="hljs-number">135</span>, sAngle = <span class="hljs-number">-45</span>+(prevIndex*<span class="hljs-number">45</span>)+v*<span class="hljs-number">90</span>;
    <span class="hljs-keyword">let</span> radius = scaleMultiple*<span class="hljs-number">.75</span>;
    <span class="hljs-keyword">let</span> _color_ = <span class="hljs-string">"#120008"</span>;
    <span class="hljs-keyword">this</span>.ctx.beginPath();
    <span class="hljs-keyword">this</span>.ctx.lineCap=<span class="hljs-string">"round"</span>;
    <span class="hljs-keyword">this</span>.ctx.strokeStyle = _color_;
    <span class="hljs-keyword">this</span>.ctx.lineWidth=<span class="hljs-number">3.5</span>;
    <span class="hljs-keyword">this</span>.ctx.arc(wheelItemX,wheelItemY,radius,getRads(sAngle+speed1),getRads(eAngle+speed1),<span class="hljs-literal">false</span>);
    <span class="hljs-keyword">this</span>.ctx.stroke();
    <span class="hljs-keyword">this</span>.ctx.closePath();

    <span class="hljs-keyword">if</span>(v&lt;<span class="hljs-number">2</span>){
      <span class="hljs-comment">//再缩小一圈</span>
      <span class="hljs-keyword">let</span> eAngleSmaller = <span class="hljs-number">15</span>+ v*<span class="hljs-number">210</span>, sAngleSmaller = <span class="hljs-number">-30</span>+v*<span class="hljs-number">90</span>;
      <span class="hljs-keyword">let</span> radiusSmaller = scaleMultiple*<span class="hljs-number">.45</span>;
      <span class="hljs-keyword">this</span>.ctx.beginPath();
      <span class="hljs-keyword">this</span>.ctx.lineCap=<span class="hljs-string">"round"</span>;
      <span class="hljs-keyword">this</span>.ctx.strokeStyle = _color_;
      <span class="hljs-keyword">this</span>.ctx.lineWidth=<span class="hljs-number">3</span>;
      <span class="hljs-keyword">this</span>.ctx.arc(wheelItemX,wheelItemY,radiusSmaller,getRads(sAngleSmaller+speed2),getRads(eAngleSmaller+speed2),<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">this</span>.ctx.stroke();
      <span class="hljs-keyword">this</span>.ctx.closePath();
    }
    <span class="hljs-keyword">this</span>.ctx.restore();
  });

</code></pre>
<ul><li>
<p><strong>绘制车身车架</strong> ：</p>
<ul>
<li>车架，应该也是本次分享中较大的难点之一，刚开始我也是这么认为的，但认真冷静、冷静、静静之后分析也还好，</li>
<li>
<p>最开始是用了最笨的办法，<code>lineTO</code>、<code>moveTo</code>、一根一根线的画，画到一半时发现画两个<code>三角</code>或者<code>一个菱形</code>即可，然后再把几根主轴重新画一下，于是两种方法都尝试了一下，</p>
<ul>
<li>先说三角的吧，配合下面画的一个图讲解一下，</li>
<li>找到圆盘的中心点，介于后轮半径之上;</li>
<li>分析车架的结构，我们可以看为是一个菱形，也可以看着是两个三角形，这里以三角为例，菱形可以看 carBracket2方法;</li>
<li>首先算出三角形的起点、再算出三角形的角度、高度，请看下面示图;</li>
<li>最后在后轮的中心点盖上一个圆点 用于遮挡三角的部分</li>
</ul>
</li>
<li>菱形 就要简单些的，但看起来逼格没有这么高端，就是用<code>lineTo</code>点对点的划线，</li>
<li>以上就是车架的绘制过程，其实感觉菱形是是要简单、代码量也少些的，有兴趣的同学可以自己尝试一下，大家可以看下面的主要代码，新手上路，如果有更好的方式，欢迎老司机指点：</li>
</ul>
</li></ul>
<blockquote>
<strong>结论</strong> ：使用<code>moveTo</code>把画布坐标从<code>O</code>移动到<code>A</code>点 x/y，<code>lineTo</code>从<code>A</code>开始画到<code>B</code>结束,再从<code>B</code>到<code>C</code>点，闭合，即一个三角完成</blockquote>
<p><span class="img-wrap"><img data-src="/img/bVbimXn?w=500&amp;h=400" src="https://static.alili.tech/img/bVbimXn?w=500&amp;h=400" alt="每周动画一点点之canvas自行车的车架分解图" title="每周动画一点点之canvas自行车的车架分解图" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimXD?w=1112&amp;h=840" src="https://static.alili.tech/img/bVbimXD?w=1112&amp;h=840" alt="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车的车架分解图，三角形绘制" title="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车的车架分解图，三角形绘制" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimXF?w=1112&amp;h=710" src="https://static.alili.tech/img/bVbimXF?w=1112&amp;h=710" alt="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，绘制过程图" title="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，绘制过程图" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimXG?w=1106&amp;h=850" src="https://static.alili.tech/img/bVbimXG?w=1106&amp;h=850" alt="每周动画一点点之canvas自行车的车架菱形分解图，方法二" title="每周动画一点点之canvas自行车的车架菱形分解图，方法二" style="cursor: pointer;"></span></p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="
//方法二：三角形
  …………此处省略N行代码
  [
  {
    moveX:triangleX1,
    moveY:triangleY1,
    lineX1:coordinateX,
    lineY1:triangleH1,
    lineX2:discX,
    lineY2:discY,
  },
  {
    moveX:triangleX2+15,
    moveY:triangleY2,
    lineX1:triangleX1,
    lineY1:triangleY1,
    lineX2:discX,
    lineY2:triangleH2,
  },
  ].map((k,v)=>{
    this.ctx.beginPath();
    this.ctx.moveTo(k.moveX,k.moveY); //把坐标移动到A点，从A开始
    this.ctx.strokeStyle = this.gearColor;
    this.ctx.lineWidth=coordinateW;
    this.ctx.lineTo(k.lineX1,k.lineY1);//从A开始，画到B点结束
    this.ctx.lineTo(k.lineX2,k.lineY2); //再从B到C点，闭合
    this.ctx.closePath();
    this.ctx.stroke();
    this.ctx.restore();
  });
  ……

//方法一：菱形
  
  …………此处省略N行代码
  this.ctx.beginPath();
  this.ctx.strokeStyle = this.gearColor;
  this.ctx.lineWidth=coordinateW;
  this.ctx.moveTo(polygon1X,polygon1Y);
  this.ctx.lineTo(coordinateX,height);
  this.ctx.lineTo(discX,discY); 
  this.ctx.lineTo(polygon2X,polygon1Y+5);
  this.ctx.lineTo(polygon2X-5,polygon1Y);
  this.ctx.lineTo(polygon1X,polygon1Y);
  this.ctx.closePath();
  this.ctx.stroke();
  ……" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">
<span class="hljs-comment">//方法二：三角形</span>
  …………此处省略N行代码
  [
  {
    <span class="hljs-attr">moveX</span>:triangleX1,
    <span class="hljs-attr">moveY</span>:triangleY1,
    <span class="hljs-attr">lineX1</span>:coordinateX,
    <span class="hljs-attr">lineY1</span>:triangleH1,
    <span class="hljs-attr">lineX2</span>:discX,
    <span class="hljs-attr">lineY2</span>:discY,
  },
  {
    <span class="hljs-attr">moveX</span>:triangleX2+<span class="hljs-number">15</span>,
    <span class="hljs-attr">moveY</span>:triangleY2,
    <span class="hljs-attr">lineX1</span>:triangleX1,
    <span class="hljs-attr">lineY1</span>:triangleY1,
    <span class="hljs-attr">lineX2</span>:discX,
    <span class="hljs-attr">lineY2</span>:triangleH2,
  },
  ].map(<span class="hljs-function">(<span class="hljs-params">k,v</span>)=&gt;</span>{
    <span class="hljs-keyword">this</span>.ctx.beginPath();
    <span class="hljs-keyword">this</span>.ctx.moveTo(k.moveX,k.moveY); <span class="hljs-comment">//把坐标移动到A点，从A开始</span>
    <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-keyword">this</span>.gearColor;
    <span class="hljs-keyword">this</span>.ctx.lineWidth=coordinateW;
    <span class="hljs-keyword">this</span>.ctx.lineTo(k.lineX1,k.lineY1);<span class="hljs-comment">//从A开始，画到B点结束</span>
    <span class="hljs-keyword">this</span>.ctx.lineTo(k.lineX2,k.lineY2); <span class="hljs-comment">//再从B到C点，闭合</span>
    <span class="hljs-keyword">this</span>.ctx.closePath();
    <span class="hljs-keyword">this</span>.ctx.stroke();
    <span class="hljs-keyword">this</span>.ctx.restore();
  });
  ……

<span class="hljs-comment">//方法一：菱形</span>
  
  …………此处省略N行代码
  <span class="hljs-keyword">this</span>.ctx.beginPath();
  <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-keyword">this</span>.gearColor;
  <span class="hljs-keyword">this</span>.ctx.lineWidth=coordinateW;
  <span class="hljs-keyword">this</span>.ctx.moveTo(polygon1X,polygon1Y);
  <span class="hljs-keyword">this</span>.ctx.lineTo(coordinateX,height);
  <span class="hljs-keyword">this</span>.ctx.lineTo(discX,discY); 
  <span class="hljs-keyword">this</span>.ctx.lineTo(polygon2X,polygon1Y+<span class="hljs-number">5</span>);
  <span class="hljs-keyword">this</span>.ctx.lineTo(polygon2X<span class="hljs-number">-5</span>,polygon1Y);
  <span class="hljs-keyword">this</span>.ctx.lineTo(polygon1X,polygon1Y);
  <span class="hljs-keyword">this</span>.ctx.closePath();
  <span class="hljs-keyword">this</span>.ctx.stroke();
  ……</code></pre>
<p><span class="img-wrap"><img data-src="/img/bVbimXH?w=1082&amp;h=746" src="https://static.alili.tech/img/bVbimXH?w=1082&amp;h=746" alt="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车的车架分解图" title="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车的车架分解图" style="cursor: pointer;"></span></p>
<ul><li>
<p><strong>绘制车的豪华宝坐、扶手</strong> ：</p>
<ul>
<li>坐位一开始是比较懵逼的，不知道如何下手，圆也不圆、方也不方，后面又去复习一下canvas的API，发现了<code>quadraticCurveTo</code>能满足这个需求，—— <strong>二次贝塞尔曲线</strong>
</li>
<li>画完之后，思考了很久，也没有发现什么技巧，或者规律，可能数学学的不好，没办法只能这样慢慢描了</li>
<li>扶手也是一样的，开始尝试<code>quadraticCurveTo</code>，半天也没画成功，后面尝试去找了它邻居<code>bezierCurveTo</code>，—— <strong>三次贝塞尔曲线</strong>
</li>
<li>
<strong>提示</strong>：三次贝塞尔曲线需要三个点。前两个点是用于三次贝塞尔计算中的控制点，第三个点是曲线的结束点。曲线的开始点是当前路径中最后一个点</li>
<li>
<strong>知识点</strong>：<code>quadraticCurveTo</code>、<code>bezierCurveTo</code>、<code>createLinearGradient</code>
</li>
</ul>
</li></ul>
<p><span class="img-wrap"><img data-src="/img/bVbimXO?w=1100&amp;h=500" src="https://static.alili.tech/img/bVbimXO?w=1100&amp;h=500" alt="每周动画一点点之canvas自行车的坐位分解图，quadraticCurveTo API" title="每周动画一点点之canvas自行车的坐位分解图，quadraticCurveTo API" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimXP?w=2062&amp;h=904" src="https://static.alili.tech/img/bVbimXP?w=2062&amp;h=904" alt="每周动画一点点之canvas自行车的坐位分解图，quadraticCurveTo,演示" title="每周动画一点点之canvas自行车的坐位分解图，quadraticCurveTo,演示" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimXQ?w=1098&amp;h=668" src="https://static.alili.tech/img/bVbimXQ?w=1098&amp;h=668" alt="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车的坐位分解图，quadraticCurveTo" title="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车的坐位分解图，quadraticCurveTo" style="cursor: pointer;"></span></p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="  //坐位
  this.ctx.restore();
  let seatX = (discX-85),seatY=discY-140;
  let curve1Cpx = [seatX-5,seatY+30,seatX+75,seatY+8];
  let curve2Cpx =[seatX+85,seatY-5,seatX,seatY]; 
  this.ctx.beginPath();
  // this.ctx.fillStyle = this.gearColor;
  let grd=this.ctx.createLinearGradient(seatX,seatY,seatX+10,seatY+60); //渐变的角度 
  grd.addColorStop(0,&quot;#712450&quot;);
  grd.addColorStop(1,&quot;#11090d&quot;);
  this.ctx.fillStyle = grd;
  this.ctx.moveTo(seatX,seatY);
  this.ctx.quadraticCurveTo(...curve1Cpx);
  this.ctx.quadraticCurveTo(...curve2Cpx);
  this.ctx.fill();

  //车前轴上的手柄
  let steeringX = lever1X-20,steeringY = lever1Y-45;
  let steeringStep1 = [steeringX+40,steeringY-10,steeringX+40,steeringY-10,steeringX+35,steeringY+15]
  let steeringStep2 = [steeringX+30,steeringY+25,steeringX+25,steeringY+23,steeringX+18,steeringY+23]
  this.ctx.beginPath();
  this.ctx.lineCap=&quot;round&quot;;
  this.ctx.strokeStyle = &quot;#712450&quot;;
  this.ctx.lineWidth=coordinateW;
  this.ctx.moveTo(steeringX,steeringY); //40 60;
  this.ctx.bezierCurveTo(...steeringStep1);
  this.ctx.bezierCurveTo(...steeringStep2);
  this.ctx.stroke();
  this.ctx.closePath();
" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="js">  <span class="hljs-comment">//坐位</span>
  <span class="hljs-keyword">this</span>.ctx.restore();
  <span class="hljs-keyword">let</span> seatX = (discX<span class="hljs-number">-85</span>),seatY=discY<span class="hljs-number">-140</span>;
  <span class="hljs-keyword">let</span> curve1Cpx = [seatX<span class="hljs-number">-5</span>,seatY+<span class="hljs-number">30</span>,seatX+<span class="hljs-number">75</span>,seatY+<span class="hljs-number">8</span>];
  <span class="hljs-keyword">let</span> curve2Cpx =[seatX+<span class="hljs-number">85</span>,seatY<span class="hljs-number">-5</span>,seatX,seatY]; 
  <span class="hljs-keyword">this</span>.ctx.beginPath();
  <span class="hljs-comment">// this.ctx.fillStyle = this.gearColor;</span>
  <span class="hljs-keyword">let</span> grd=<span class="hljs-keyword">this</span>.ctx.createLinearGradient(seatX,seatY,seatX+<span class="hljs-number">10</span>,seatY+<span class="hljs-number">60</span>); <span class="hljs-comment">//渐变的角度 </span>
  grd.addColorStop(<span class="hljs-number">0</span>,<span class="hljs-string">"#712450"</span>);
  grd.addColorStop(<span class="hljs-number">1</span>,<span class="hljs-string">"#11090d"</span>);
  <span class="hljs-keyword">this</span>.ctx.fillStyle = grd;
  <span class="hljs-keyword">this</span>.ctx.moveTo(seatX,seatY);
  <span class="hljs-keyword">this</span>.ctx.quadraticCurveTo(...curve1Cpx);
  <span class="hljs-keyword">this</span>.ctx.quadraticCurveTo(...curve2Cpx);
  <span class="hljs-keyword">this</span>.ctx.fill();

  <span class="hljs-comment">//车前轴上的手柄</span>
  <span class="hljs-keyword">let</span> steeringX = lever1X<span class="hljs-number">-20</span>,steeringY = lever1Y<span class="hljs-number">-45</span>;
  <span class="hljs-keyword">let</span> steeringStep1 = [steeringX+<span class="hljs-number">40</span>,steeringY<span class="hljs-number">-10</span>,steeringX+<span class="hljs-number">40</span>,steeringY<span class="hljs-number">-10</span>,steeringX+<span class="hljs-number">35</span>,steeringY+<span class="hljs-number">15</span>]
  <span class="hljs-keyword">let</span> steeringStep2 = [steeringX+<span class="hljs-number">30</span>,steeringY+<span class="hljs-number">25</span>,steeringX+<span class="hljs-number">25</span>,steeringY+<span class="hljs-number">23</span>,steeringX+<span class="hljs-number">18</span>,steeringY+<span class="hljs-number">23</span>]
  <span class="hljs-keyword">this</span>.ctx.beginPath();
  <span class="hljs-keyword">this</span>.ctx.lineCap=<span class="hljs-string">"round"</span>;
  <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-string">"#712450"</span>;
  <span class="hljs-keyword">this</span>.ctx.lineWidth=coordinateW;
  <span class="hljs-keyword">this</span>.ctx.moveTo(steeringX,steeringY); <span class="hljs-comment">//40 60;</span>
  <span class="hljs-keyword">this</span>.ctx.bezierCurveTo(...steeringStep1);
  <span class="hljs-keyword">this</span>.ctx.bezierCurveTo(...steeringStep2);
  <span class="hljs-keyword">this</span>.ctx.stroke();
  <span class="hljs-keyword">this</span>.ctx.closePath();
</code></pre>
<ul><li>
<p><strong>绘制车的发动机、脚踏板</strong> ：</p>
<ul>
<li>到了这里，也快接近本文的尾声了，接下来要讲的是是车辆中最重要的部分，车中间齿轮盘，一辆车没有它，你做的再好也是白搭了;</li>
<li>前面多次讲到齿轮的中心点，包括两个三角都是以它的中心计算的三角角度，知道了位置那就容易了，一样的先画几个圆，每个按一定的比例缩小;</li>
<li>然后外围再画一圈锯齿，这样齿轮大概就画好了，齿轮的技巧在于以圆盘为中心点，画一圈线，它跟<a href="https://segmentfault.com/blog/honeybadger">时钟的刻度</a>原理是一样的;</li>
<li>
<p>脚踏板，这个好理解，就是用<code>lineTo</code>画两跟线，其中一根进行一个90度的旋转就ok了，但重点是它在动画过程中的一个过程呢，我的分析过程是这样：</p>
<ul>
<li>竖着的这根轴是，以圆盘齿轮的中点为基点 <code>N* (Math.PI / 180)</code>转动;</li>
<li>横着的这根轴，也就是脚踏板，它是以竖着的轴底部为Y轴中心点，以自身宽度的二分之一为X轴为中心点，同样以 <code>N* (Math.PI / 180)</code>的 <code>rotate</code>角度旋转。</li>
</ul>
</li>
<li>说了这么多，我们来看几张<a href="https://juejin.im/user/597de6e0f265da3e3c5f6d7d/posts" rel="nofollow noreferrer" target="_blank">动态图</a>吧，顺便贴上代码：</li>
</ul>
</li></ul>
<p><span class="img-wrap"><img data-src="/img/bVbimX1?w=360&amp;h=240" src="https://static.alili.tech/img/bVbimX1?w=360&amp;h=240" alt="每周动画一点点之canvas自行车的齿轮展示" title="每周动画一点点之canvas自行车的齿轮展示" style="cursor: pointer;"></span><br><span class="img-wrap"><img data-src="/img/bVbimYc?w=360&amp;h=240" src="https://static.alili.tech/img/bVbimYc?w=360&amp;h=240" alt="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车脚踏板的展示" title="本文由@IT·平头哥联盟-首席填坑官∙苏南分享，每周动画一点点之canvas自行车脚踏板的展示" style="cursor: pointer;"></span></p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="
  discGear(coordinateX,coordinateY,coordinateW){
    //车中间齿轮盘 disc
    let discX = coordinateX,discY = coordinateY;
    let discRadius = this.wheelRadius*.36;//车轮的3.6;

    let discDotX = discX+discRadius+8,discDotY = discRadius/.98;
    this.ctx.restore();
    this.ctx.save();
    this.ctx.translate(discX,discY);
    // this.ctx.rotate(-(Math.PI/2));

    Array.from({length:30}).map((v,index)=>{
      let radian = (Math.PI / 15) ;
      this.ctx.beginPath();
      this.ctx.lineCap=&quot;round&quot;;
      this.ctx.strokeStyle = this.color;
      this.ctx.rotate(radian);
      this.ctx.lineWidth=3;
      this.ctx.moveTo(0,discDotY);
      this.ctx.lineTo(1.5,discDotY);
      // ctx.arc(discDotX,discDotY,6,0,Math.PI*2,false);
      this.ctx.closePath();
      this.ctx.stroke();

    });
    this.pedal(discX,discY,discRadius);
    this.pedal(discX,discY,discRadius,1);
    
    this.ctx.restore();
  }
  pedal(coordinateX,coordinateY,discRadius,turnAngle=0){

    //脚踏板，分两次初始化，一次在中心齿轮绘制之前，一次在之后，

    let pedalX = coordinateX, pedalY = coordinateY - discRadius*.7;
    let pedalW = 6,
        pedalH =  discRadius*1.9;
    let radian = (this.animateNum)*(Math.PI / 180) ;
    let radianHor = (this.animateNum)*(Math.PI / 180) ;
    let turnAngleNum = 1;
    let moveY = 28;
    if(turnAngle !== 0){
      this.ctx.rotate(-180*(Math.PI/180));
      turnAngleNum = (Math.PI/180);
    };
    this.ctx.beginPath();
    this.ctx.rotate(radian*turnAngleNum);
    this.ctx.lineCap=&quot;round&quot;;
    this.ctx.strokeStyle = this.gearColor;
    this.ctx.lineWidth=pedalW;
    this.ctx.moveTo(-1,moveY);
    this.ctx.lineTo(0,pedalH);
    this.ctx.closePath();
    this.ctx.stroke();
    
    this.ctx.save();
    let pedalHorW = pedalH/1.5,pedalHorH=pedalW;
    this.ctx.translate(0,pedalH);
    this.ctx.beginPath();
    this.ctx.rotate(-radianHor);

    this.ctx.lineCap=&quot;round&quot;;
    this.ctx.fillStyle = &quot;#fff&quot;;
    this.ctx.strokeStyle = this.gearColor;
    this.ctx.lineWidth =2;
    this.ctx.roundRect(-pedalHorW/2,-2,pedalHorW,pedalHorH,5);
    this.ctx.closePath();
    this.ctx.fill();
    this.ctx.stroke();

    this.ctx.restore();
  }
" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">
  discGear(coordinateX,coordinateY,coordinateW){
    <span class="hljs-comment">//车中间齿轮盘 disc</span>
    <span class="hljs-keyword">let</span> discX = coordinateX,discY = coordinateY;
    <span class="hljs-keyword">let</span> discRadius = <span class="hljs-keyword">this</span>.wheelRadius*<span class="hljs-number">.36</span>;<span class="hljs-comment">//车轮的3.6;</span>

    <span class="hljs-keyword">let</span> discDotX = discX+discRadius+<span class="hljs-number">8</span>,discDotY = discRadius/<span class="hljs-number">.98</span>;
    <span class="hljs-keyword">this</span>.ctx.restore();
    <span class="hljs-keyword">this</span>.ctx.save();
    <span class="hljs-keyword">this</span>.ctx.translate(discX,discY);
    <span class="hljs-comment">// this.ctx.rotate(-(Math.PI/2));</span>

    <span class="hljs-built_in">Array</span>.from({<span class="hljs-attr">length</span>:<span class="hljs-number">30</span>}).map(<span class="hljs-function">(<span class="hljs-params">v,index</span>)=&gt;</span>{
      <span class="hljs-keyword">let</span> radian = (<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">15</span>) ;
      <span class="hljs-keyword">this</span>.ctx.beginPath();
      <span class="hljs-keyword">this</span>.ctx.lineCap=<span class="hljs-string">"round"</span>;
      <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-keyword">this</span>.color;
      <span class="hljs-keyword">this</span>.ctx.rotate(radian);
      <span class="hljs-keyword">this</span>.ctx.lineWidth=<span class="hljs-number">3</span>;
      <span class="hljs-keyword">this</span>.ctx.moveTo(<span class="hljs-number">0</span>,discDotY);
      <span class="hljs-keyword">this</span>.ctx.lineTo(<span class="hljs-number">1.5</span>,discDotY);
      <span class="hljs-comment">// ctx.arc(discDotX,discDotY,6,0,Math.PI*2,false);</span>
      <span class="hljs-keyword">this</span>.ctx.closePath();
      <span class="hljs-keyword">this</span>.ctx.stroke();

    });
    <span class="hljs-keyword">this</span>.pedal(discX,discY,discRadius);
    <span class="hljs-keyword">this</span>.pedal(discX,discY,discRadius,<span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">this</span>.ctx.restore();
  }
  pedal(coordinateX,coordinateY,discRadius,turnAngle=<span class="hljs-number">0</span>){

    <span class="hljs-comment">//脚踏板，分两次初始化，一次在中心齿轮绘制之前，一次在之后，</span>

    <span class="hljs-keyword">let</span> pedalX = coordinateX, pedalY = coordinateY - discRadius*<span class="hljs-number">.7</span>;
    <span class="hljs-keyword">let</span> pedalW = <span class="hljs-number">6</span>,
        pedalH =  discRadius*<span class="hljs-number">1.9</span>;
    <span class="hljs-keyword">let</span> radian = (<span class="hljs-keyword">this</span>.animateNum)*(<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>) ;
    <span class="hljs-keyword">let</span> radianHor = (<span class="hljs-keyword">this</span>.animateNum)*(<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>) ;
    <span class="hljs-keyword">let</span> turnAngleNum = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> moveY = <span class="hljs-number">28</span>;
    <span class="hljs-keyword">if</span>(turnAngle !== <span class="hljs-number">0</span>){
      <span class="hljs-keyword">this</span>.ctx.rotate(<span class="hljs-number">-180</span>*(<span class="hljs-built_in">Math</span>.PI/<span class="hljs-number">180</span>));
      turnAngleNum = (<span class="hljs-built_in">Math</span>.PI/<span class="hljs-number">180</span>);
    };
    <span class="hljs-keyword">this</span>.ctx.beginPath();
    <span class="hljs-keyword">this</span>.ctx.rotate(radian*turnAngleNum);
    <span class="hljs-keyword">this</span>.ctx.lineCap=<span class="hljs-string">"round"</span>;
    <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-keyword">this</span>.gearColor;
    <span class="hljs-keyword">this</span>.ctx.lineWidth=pedalW;
    <span class="hljs-keyword">this</span>.ctx.moveTo(<span class="hljs-number">-1</span>,moveY);
    <span class="hljs-keyword">this</span>.ctx.lineTo(<span class="hljs-number">0</span>,pedalH);
    <span class="hljs-keyword">this</span>.ctx.closePath();
    <span class="hljs-keyword">this</span>.ctx.stroke();
    
    <span class="hljs-keyword">this</span>.ctx.save();
    <span class="hljs-keyword">let</span> pedalHorW = pedalH/<span class="hljs-number">1.5</span>,pedalHorH=pedalW;
    <span class="hljs-keyword">this</span>.ctx.translate(<span class="hljs-number">0</span>,pedalH);
    <span class="hljs-keyword">this</span>.ctx.beginPath();
    <span class="hljs-keyword">this</span>.ctx.rotate(-radianHor);

    <span class="hljs-keyword">this</span>.ctx.lineCap=<span class="hljs-string">"round"</span>;
    <span class="hljs-keyword">this</span>.ctx.fillStyle = <span class="hljs-string">"#fff"</span>;
    <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-keyword">this</span>.gearColor;
    <span class="hljs-keyword">this</span>.ctx.lineWidth =<span class="hljs-number">2</span>;
    <span class="hljs-keyword">this</span>.ctx.roundRect(-pedalHorW/<span class="hljs-number">2</span>,<span class="hljs-number">-2</span>,pedalHorW,pedalHorH,<span class="hljs-number">5</span>);
    <span class="hljs-keyword">this</span>.ctx.closePath();
    <span class="hljs-keyword">this</span>.ctx.fill();
    <span class="hljs-keyword">this</span>.ctx.stroke();

    <span class="hljs-keyword">this</span>.ctx.restore();
  }
</code></pre>
<ul><li>
<p><strong>绘制车的链条</strong> ：</p>
<ul><li>链条用的是 <code>bezierCurveTo</code> ，cp1x,cp1y,cp2x,cp2y,x,y等参数画出来的，具体看下面代码吧，其实就是两个半椭圆的拼接……</li></ul>
</li></ul>
<p><span class="img-wrap"><img data-src="/img/bVbimYj?w=1106&amp;h=711" src="https://static.alili.tech/img/bVbimYj?w=1106&amp;h=711" alt="每周动画一点点之canvas自行车绘制车的链条" title="每周动画一点点之canvas自行车绘制车的链条" style="cursor: pointer;"></span></p>
<div class="widget-codetool" style="display:none;">
      <div class="widget-codetool--inner">
      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="全选"></span>
      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="  //链条

  let chainW = ( coordinateX+discRadius - this.wheelPos[0].x) / 2;
  let chainX = this.wheelPos[0].x +chainW-5 ;
  let chainY = coordinateY;
  this.ctx.save();
  this.ctx.translate(chainX,chainY+4.8);
  this.ctx.rotate(-2*(Math.PI/180));
  let r = chainW+chainW*.06,h = discRadius/2;
  this.ctx.beginPath();
  this.ctx.moveTo(-r, -1);
  this.ctx.lineWidth=3;
  this.ctx.strokeStyle = &quot;#1e0c1a&quot;;
  this.ctx.bezierCurveTo(-r,h*1.5,r,h*4,r,0);
  this.ctx.bezierCurveTo(r,-h*4,-r,-h*1.5,-r,0);
  this.ctx.closePath();
  this.ctx.stroke();
  this.ctx.restore();
" title="" data-original-title="复制"></span>
      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="放进笔记"></span>
      </div>
      </div><pre class="javascript hljs"><code class="javascript">  <span class="hljs-comment">//链条</span>

  <span class="hljs-keyword">let</span> chainW = ( coordinateX+discRadius - <span class="hljs-keyword">this</span>.wheelPos[<span class="hljs-number">0</span>].x) / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">let</span> chainX = <span class="hljs-keyword">this</span>.wheelPos[<span class="hljs-number">0</span>].x +chainW<span class="hljs-number">-5</span> ;
  <span class="hljs-keyword">let</span> chainY = coordinateY;
  <span class="hljs-keyword">this</span>.ctx.save();
  <span class="hljs-keyword">this</span>.ctx.translate(chainX,chainY+<span class="hljs-number">4.8</span>);
  <span class="hljs-keyword">this</span>.ctx.rotate(<span class="hljs-number">-2</span>*(<span class="hljs-built_in">Math</span>.PI/<span class="hljs-number">180</span>));
  <span class="hljs-keyword">let</span> r = chainW+chainW*<span class="hljs-number">.06</span>,h = discRadius/<span class="hljs-number">2</span>;
  <span class="hljs-keyword">this</span>.ctx.beginPath();
  <span class="hljs-keyword">this</span>.ctx.moveTo(-r, <span class="hljs-number">-1</span>);
  <span class="hljs-keyword">this</span>.ctx.lineWidth=<span class="hljs-number">3</span>;
  <span class="hljs-keyword">this</span>.ctx.strokeStyle = <span class="hljs-string">"#1e0c1a"</span>;
  <span class="hljs-keyword">this</span>.ctx.bezierCurveTo(-r,h*<span class="hljs-number">1.5</span>,r,h*<span class="hljs-number">4</span>,r,<span class="hljs-number">0</span>);
  <span class="hljs-keyword">this</span>.ctx.bezierCurveTo(r,-h*<span class="hljs-number">4</span>,-r,-h*<span class="hljs-number">1.5</span>,-r,<span class="hljs-number">0</span>);
  <span class="hljs-keyword">this</span>.ctx.closePath();
  <span class="hljs-keyword">this</span>.ctx.stroke();
  <span class="hljs-keyword">this</span>.ctx.restore();
</code></pre>
<h2 id="articleHeader2">尾声</h2>
<p>　　以上就是今天<a href="https://honeybadger8.github.io/blog/" rel="nofollow noreferrer" target="_blank">@IT·平头哥联盟</a>-<code>首席填坑官</code>∙<a href="https://github.com/meibin08" rel="nofollow noreferrer" target="_blank">苏南</a>给你带来的分享，整个车的绘制过程，感觉车架部分应该还有更好的做法，如果您有更好的建议及想法，欢迎斧正，最后送上完整的示例图，如觉得不错，记得关注我们的<code>公众号哦</code>！</p>
<p>　　<a href="https://github.com/honeybadger8/" rel="nofollow noreferrer" target="_blank">文章源码获取-&gt; blog-resource 👈</a><br>　　<a href="https://codepen.io/meibin08/pen/xyXmNq" rel="nofollow noreferrer" target="_blank">想直接在线预览 👈</a><button class="btn btn-xs btn-default ml10 preview" data-url="meibin08/pen/xyXmNq" data-typeid="3">点击预览</button></p>
<p><span class="img-wrap"><img data-src="/img/bVbimYE?w=360&amp;h=240" src="https://static.alili.tech/img/bVbimYE?w=360&amp;h=240" alt="每周动画一点点之canvas自行车脚的展示" title="每周动画一点点之canvas自行车脚的展示" style="cursor: pointer;"></span></p>
<p><span class="img-wrap"><img data-src="/img/bVbiCYL?w=600&amp;h=336" src="https://static.alili.tech/img/bVbiCYL?w=600&amp;h=336" alt="宝剑锋从磨砺出，梅花香自苦寒来，做有温度的攻城狮，公众号：honeyBadger8，!本文由@IT·平头哥联盟-首席填坑官∙苏南分享,@IT·平头哥联盟 主要分享前端、测试 等领域的积累，文章来源于(自己/群友)工作中积累的经验、填过的坑，希望能尽绵薄之力 助其他同学少走一些弯路" title="宝剑锋从磨砺出，梅花香自苦寒来，做有温度的攻城狮，公众号：honeyBadger8，!本文由@IT·平头哥联盟-首席填坑官∙苏南分享,@IT·平头哥联盟 主要分享前端、测试 等领域的积累，文章来源于(自己/群友)工作中积累的经验、填过的坑，希望能尽绵薄之力 助其他同学少走一些弯路" style="cursor: pointer;"></span></p>
<blockquote>作者：苏南 - <a href="https://github.com/meibin08/" rel="nofollow noreferrer" target="_blank">首席填坑官</a><br>交流群：912594095，公众号：<code>honeyBadger8</code><br>本文原创，著作权归作者所有。商业转载请联系<code>@IT·平头哥联盟</code>获得授权，非商业转载请注明原链接及出处。</blockquote>

                
{{< /raw >}}

# 版权声明
本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，

本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。

原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！

## 原文标题
佛系码农～手把手教你如何绘制一辆会跑车

## 原文链接
[https://segmentfault.com/a/1190000016732240](https://segmentfault.com/a/1190000016732240)

